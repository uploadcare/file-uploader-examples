var Zo=Object.defineProperty;var Qo=(i,r,e)=>r in i?Zo(i,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[r]=e;var f=(i,r,e)=>(Qo(i,typeof r!="symbol"?r+"":r,e),e),gr=(i,r,e)=>{if(!r.has(i))throw TypeError("Cannot "+e)};var re=(i,r,e)=>(gr(i,r,"read from private field"),e?e.call(i):r.get(i)),pt=(i,r,e)=>{if(r.has(i))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(i):r.set(i,e)},Qt=(i,r,e,t)=>(gr(i,r,"write to private field"),t?t.call(i,e):r.set(i,e),e);var Si=(i,r,e)=>(gr(i,r,"access private method"),e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(n){if(n.ep)return;n.ep=!0;const a=e(n);fetch(n.href,a)}})();var Jo=Object.defineProperty,es=(i,r,e)=>r in i?Jo(i,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[r]=e,Br=(i,r,e)=>(es(i,typeof r!="symbol"?r+"":r,e),e);function ts(i){let r=e=>{var t;for(let n in e)((t=e[n])==null?void 0:t.constructor)===Object&&(e[n]=r(e[n]));return{...e}};return r(i)}var X=class{constructor(i){i.constructor===Object?this.store=ts(i):(this._storeIsProxy=!0,this.store=i),this.callbackMap=Object.create(null)}static warn(i,r){console.warn(`Symbiote Data: cannot ${i}. Prop name: `+r)}read(i){return!this._storeIsProxy&&!this.store.hasOwnProperty(i)?(X.warn("read",i),null):this.store[i]}has(i){return this._storeIsProxy?this.store[i]!==void 0:this.store.hasOwnProperty(i)}add(i,r,e=!1){!e&&Object.keys(this.store).includes(i)||(this.store[i]=r,this.notify(i))}pub(i,r){if(!this._storeIsProxy&&!this.store.hasOwnProperty(i)){X.warn("publish",i);return}this.store[i]=r,this.notify(i)}multiPub(i){for(let r in i)this.pub(r,i[r])}notify(i){this.callbackMap[i]&&this.callbackMap[i].forEach(r=>{r(this.store[i])})}sub(i,r,e=!0){return!this._storeIsProxy&&!this.store.hasOwnProperty(i)?(X.warn("subscribe",i),null):(this.callbackMap[i]||(this.callbackMap[i]=new Set),this.callbackMap[i].add(r),e&&r(this.store[i]),{remove:()=>{this.callbackMap[i].delete(r),this.callbackMap[i].size||delete this.callbackMap[i]},callback:r})}static registerCtx(i,r=Symbol()){let e=X.globalStore.get(r);return e?console.warn('State: context UID "'+r+'" already in use'):(e=new X(i),X.globalStore.set(r,e)),e}static deleteCtx(i){X.globalStore.delete(i)}static getCtx(i,r=!0){return X.globalStore.get(i)||(r&&console.warn('State: wrong context UID - "'+i+'"'),null)}};X.globalStore=new Map;var V=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),la="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm",is=la.length-1,Hr=class{static generate(i="XXXXXXXXX-XXX"){let r="";for(let e=0;e<i.length;e++)r+=i[e]==="-"?i[e]:la.charAt(Math.random()*is);return r}};function ca(i,r,e){let t=!0,n,a=r.split(".");return a.forEach((o,s)=>{s<a.length-1?i=i[o]:n=o}),i?i[n]=e:t=!1,t}function rs(i){return i.split("-").map((r,e)=>r&&e?r[0].toUpperCase()+r.slice(1):r).join("").split("_").map((r,e)=>r&&e?r.toUpperCase():r).join("")}function ns(i,r){[...i.querySelectorAll(`[${V.REPEAT_ATTR}]`)].forEach(e=>{let t=e.getAttribute(V.REPEAT_ITEM_TAG_ATTR),n;if(t&&(n=window.customElements.get(t)),!n){n=class extends r.BaseComponent{constructor(){super(),t||(this.style.display="contents")}};let o=e.innerHTML;n.template=o,n.reg(t)}for(;e.firstChild;)e.firstChild.remove();let a=e.getAttribute(V.REPEAT_ATTR);r.sub(a,o=>{if(!o){for(;e.firstChild;)e.firstChild.remove();return}let s=[...e.children],l,c=d=>{d.forEach((h,m)=>{if(s[m])if(s[m].set$)setTimeout(()=>{s[m].set$(h)});else for(let p in h)s[m][p]=h[p];else{l||(l=new DocumentFragment);let p=new n;Object.assign(p.init$,h),l.appendChild(p)}}),l&&e.appendChild(l);let u=s.slice(d.length,s.length);for(let h of u)h.remove()};if(o.constructor===Array)c(o);else if(o.constructor===Object){let d=[];for(let u in o){let h=o[u];Object.defineProperty(h,"_KEY_",{value:u,enumerable:!0}),d.push(h)}c(d)}else console.warn("Symbiote repeat data type error:"),console.log(o)}),e.removeAttribute(V.REPEAT_ATTR),e.removeAttribute(V.REPEAT_ITEM_TAG_ATTR)})}var Tn="__default__";function as(i,r){if(r.shadowRoot)return;let e=[...i.querySelectorAll("slot")];if(!e.length)return;let t={};e.forEach(n=>{let a=n.getAttribute("name")||Tn;t[a]={slot:n,fr:document.createDocumentFragment()}}),r.initChildren.forEach(n=>{var a;let o=Tn;n instanceof Element&&n.hasAttribute("slot")&&(o=n.getAttribute("slot"),n.removeAttribute("slot")),(a=t[o])==null||a.fr.appendChild(n)}),Object.values(t).forEach(n=>{if(n.fr.childNodes.length)n.slot.parentNode.replaceChild(n.fr,n.slot);else if(n.slot.childNodes.length){let a=document.createDocumentFragment();a.append(...n.slot.childNodes),n.slot.parentNode.replaceChild(a,n.slot)}else n.slot.remove()})}function os(i,r){[...i.querySelectorAll(`[${V.EL_REF_ATTR}]`)].forEach(e=>{let t=e.getAttribute(V.EL_REF_ATTR);r.ref[t]=e,e.removeAttribute(V.EL_REF_ATTR)})}function ss(i,r){[...i.querySelectorAll(`[${V.BIND_ATTR}]`)].forEach(e=>{let n=e.getAttribute(V.BIND_ATTR).split(";");[...e.attributes].forEach(a=>{if(a.name.startsWith("-")&&a.value){let o=rs(a.name.replace("-",""));n.push(o+":"+a.value),e.removeAttribute(a.name)}}),n.forEach(a=>{if(!a)return;let o=a.split(":").map(d=>d.trim()),s=o[0],l;s.indexOf(V.ATTR_BIND_PRFX)===0&&(l=!0,s=s.replace(V.ATTR_BIND_PRFX,""));let c=o[1].split(",").map(d=>d.trim());for(let d of c){let u;d.startsWith("!!")?(u="double",d=d.replace("!!","")):d.startsWith("!")&&(u="single",d=d.replace("!","")),r.sub(d,h=>{u==="double"?h=!!h:u==="single"&&(h=!h),l?(h==null?void 0:h.constructor)===Boolean?h?e.setAttribute(s,""):e.removeAttribute(s):e.setAttribute(s,h):ca(e,s,h)||(e[V.SET_LATER_KEY]||(e[V.SET_LATER_KEY]=Object.create(null)),e[V.SET_LATER_KEY][s]=h)})}}),e.removeAttribute(V.BIND_ATTR)})}var Ri="{{",ri="}}",ls="skip-text";function cs(i){let r,e=[],t=document.createTreeWalker(i,NodeFilter.SHOW_TEXT,{acceptNode:n=>{var a;return!((a=n.parentElement)!=null&&a.hasAttribute(ls))&&n.textContent.includes(Ri)&&n.textContent.includes(ri)&&1}});for(;r=t.nextNode();)e.push(r);return e}var ds=function(i,r){cs(i).forEach(t=>{let n=[],a;for(;t.textContent.includes(ri);)t.textContent.startsWith(Ri)?(a=t.textContent.indexOf(ri)+ri.length,t.splitText(a),n.push(t)):(a=t.textContent.indexOf(Ri),t.splitText(a)),t=t.nextSibling;n.forEach(o=>{let s=o.textContent.replace(Ri,"").replace(ri,"");o.textContent="",r.sub(s,l=>{o.textContent=l})})})},us=[ns,as,os,ss,ds],Fi="'",Ft='"',hs=/\\([0-9a-fA-F]{1,6} ?)/g;function ps(i){return(i[0]===Ft||i[0]===Fi)&&(i[i.length-1]===Ft||i[i.length-1]===Fi)}function fs(i){return(i[0]===Ft||i[0]===Fi)&&(i=i.slice(1)),(i[i.length-1]===Ft||i[i.length-1]===Fi)&&(i=i.slice(0,-1)),i}function ms(i){let r="",e="";for(var t=0;t<i.length;t++){const n=i[t+1];i[t]==="\\"&&n==='"'?(r+='\\"',t++):i[t]==='"'&&e!=="\\"?r+='\\"':r+=i[t],e=i[t]}return r}function gs(i){let r=i;ps(i)&&(r=fs(r),r=r.replace(hs,(e,t)=>String.fromCodePoint(parseInt(t.trim(),16))),r=r.replaceAll(`\\
`,"\\n"),r=ms(r),r=Ft+r+Ft);try{return JSON.parse(r)}catch{throw new Error(`Failed to parse CSS property value: ${r}. Original input: ${i}`)}}var kn=0,kt=null,Ve=null,Qe=class extends HTMLElement{constructor(){super(),Br(this,"updateCssData",()=>{var i;this.dropCssDataCache(),(i=this.__boundCssProps)==null||i.forEach(r=>{let e=this.getCssData(this.__extractCssName(r),!0);e!==null&&this.$[r]!==e&&(this.$[r]=e)})}),this.init$=Object.create(null),this.cssInit$=Object.create(null),this.tplProcessors=new Set,this.ref=Object.create(null),this.allSubs=new Set,this.pauseRender=!1,this.renderShadow=!1,this.readyToDestroy=!0,this.processInnerHtml=!1,this.allowCustomTemplate=!1,this.ctxOwner=!1}get BaseComponent(){return Qe}initCallback(){}__initCallback(){var i;this.__initialized||(this.__initialized=!0,(i=this.initCallback)==null||i.call(this))}render(i,r=this.renderShadow){let e;if((r||this.constructor.__shadowStylesUrl)&&!this.shadowRoot&&this.attachShadow({mode:"open"}),this.allowCustomTemplate){let n=this.getAttribute(V.USE_TPL);if(n){let a=this.getRootNode(),o=(a==null?void 0:a.querySelector(n))||document.querySelector(n);o?i=o.content.cloneNode(!0):console.warn(`Symbiote template "${n}" is not found...`)}}if(this.processInnerHtml)for(let n of this.tplProcessors)n(this,this);if(i||this.constructor.template){if(this.constructor.template&&!this.constructor.__tpl&&(this.constructor.__tpl=document.createElement("template"),this.constructor.__tpl.innerHTML=this.constructor.template),(i==null?void 0:i.constructor)===DocumentFragment)e=i;else if((i==null?void 0:i.constructor)===String){let n=document.createElement("template");n.innerHTML=i,e=n.content.cloneNode(!0)}else this.constructor.__tpl&&(e=this.constructor.__tpl.content.cloneNode(!0));for(let n of this.tplProcessors)n(e,this)}let t=()=>{e&&(r&&this.shadowRoot.appendChild(e)||this.appendChild(e)),this.__initCallback()};if(this.constructor.__shadowStylesUrl){r=!0;let n=document.createElement("link");n.rel="stylesheet",n.href=this.constructor.__shadowStylesUrl,n.onload=t,this.shadowRoot.prepend(n)}else t()}addTemplateProcessor(i){this.tplProcessors.add(i)}get autoCtxName(){return this.__autoCtxName||(this.__autoCtxName=Hr.generate(),this.style.setProperty(V.CSS_CTX_PROP,`'${this.__autoCtxName}'`)),this.__autoCtxName}get cssCtxName(){return this.getCssData(V.CSS_CTX_PROP,!0)}get ctxName(){var i;let r=((i=this.getAttribute(V.CTX_NAME_ATTR))==null?void 0:i.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=r,r}get localCtx(){return this.__localCtx||(this.__localCtx=X.registerCtx({},this)),this.__localCtx}get nodeCtx(){return X.getCtx(this.ctxName,!1)||X.registerCtx({},this.ctxName)}static __parseProp(i,r){let e,t;if(i.startsWith(V.EXT_DATA_CTX_PRFX))e=r.nodeCtx,t=i.replace(V.EXT_DATA_CTX_PRFX,"");else if(i.includes(V.NAMED_DATA_CTX_SPLTR)){let n=i.split(V.NAMED_DATA_CTX_SPLTR);e=X.getCtx(n[0]),t=n[1]}else e=r.localCtx,t=i;return{ctx:e,name:t}}sub(i,r,e=!0){let t=a=>{this.isConnected&&r(a)},n=Qe.__parseProp(i,this);n.ctx.has(n.name)?this.allSubs.add(n.ctx.sub(n.name,t,e)):window.setTimeout(()=>{this.allSubs.add(n.ctx.sub(n.name,t,e))})}notify(i){let r=Qe.__parseProp(i,this);r.ctx.notify(r.name)}has(i){let r=Qe.__parseProp(i,this);return r.ctx.has(r.name)}add(i,r,e=!1){let t=Qe.__parseProp(i,this);t.ctx.add(t.name,r,e)}add$(i,r=!1){for(let e in i)this.add(e,i[e],r)}get $(){if(!this.__stateProxy){let i=Object.create(null);this.__stateProxy=new Proxy(i,{set:(r,e,t)=>{let n=Qe.__parseProp(e,this);return n.ctx.pub(n.name,t),!0},get:(r,e)=>{let t=Qe.__parseProp(e,this);return t.ctx.read(t.name)}})}return this.__stateProxy}set$(i,r=!1){for(let e in i){let t=i[e];r||![String,Number,Boolean].includes(t==null?void 0:t.constructor)?this.$[e]=t:this.$[e]!==t&&(this.$[e]=t)}}get __ctxOwner(){return this.ctxOwner||this.hasAttribute(V.CTX_OWNER_ATTR)&&this.getAttribute(V.CTX_OWNER_ATTR)!=="false"}__initDataCtx(){let i=this.constructor.__attrDesc;if(i)for(let r of Object.values(i))Object.keys(this.init$).includes(r)||(this.init$[r]="");for(let r in this.init$)if(r.startsWith(V.EXT_DATA_CTX_PRFX))this.nodeCtx.add(r.replace(V.EXT_DATA_CTX_PRFX,""),this.init$[r],this.__ctxOwner);else if(r.includes(V.NAMED_DATA_CTX_SPLTR)){let e=r.split(V.NAMED_DATA_CTX_SPLTR),t=e[0].trim(),n=e[1].trim();if(t&&n){let a=X.getCtx(t,!1);a||(a=X.registerCtx({},t)),a.add(n,this.init$[r])}}else this.localCtx.add(r,this.init$[r]);for(let r in this.cssInit$)this.bindCssData(r,this.cssInit$[r]);this.__dataCtxInitialized=!0}connectedCallback(){var i;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){let r=(i=this.getAttribute(V.CTX_NAME_ATTR))==null?void 0:i.trim();if(r&&this.style.setProperty(V.CSS_CTX_PROP,`'${r}'`),this.__initDataCtx(),this[V.SET_LATER_KEY]){for(let e in this[V.SET_LATER_KEY])ca(this,e,this[V.SET_LATER_KEY][e]);delete this[V.SET_LATER_KEY]}this.initChildren=[...this.childNodes];for(let e of us)this.addTemplateProcessor(e);if(this.pauseRender)this.__initCallback();else if(this.constructor.__rootStylesLink){let e=this.getRootNode();if(!e)return;if(e==null?void 0:e.querySelector(`link[${V.ROOT_STYLE_ATTR_NAME}="${this.constructor.is}"]`)){this.render();return}let n=this.constructor.__rootStylesLink.cloneNode(!0);n.setAttribute(V.ROOT_STYLE_ATTR_NAME,this.constructor.is),n.onload=()=>{this.render()},e.nodeType===Node.DOCUMENT_NODE?e.head.appendChild(n):e.prepend(n)}else this.render()}this.connectedOnce=!0}}destroyCallback(){}disconnectedCallback(){this.connectedOnce&&(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout(()=>{this.destroyCallback();for(let i of this.allSubs)i.remove(),this.allSubs.delete(i);for(let i of this.tplProcessors)this.tplProcessors.delete(i);Ve==null||Ve.delete(this.updateCssData),Ve!=null&&Ve.size||(kt==null||kt.disconnect(),kt=null,Ve=null)},100)))}static reg(i,r=!1){i||(kn++,i=`${V.AUTO_TAG_PRFX}-${kn}`),this.__tag=i;let e=window.customElements.get(i);if(e){!r&&e!==this&&console.warn([`Element with tag name "${i}" already registered.`,`You're trying to override it with another class "${this.name}".`,"This is most likely a mistake.","New element will not be registered."].join(`
`));return}window.customElements.define(i,r?class extends this{}:this)}static get is(){return this.__tag||this.reg(),this.__tag}static bindAttributes(i){this.observedAttributes=Object.keys(i),this.__attrDesc=i}attributeChangedCallback(i,r,e){var t;if(r===e)return;let n=(t=this.constructor.__attrDesc)==null?void 0:t[i];n?this.__dataCtxInitialized?this.$[n]=e:this.init$[n]=e:this[i]=e}getCssData(i,r=!1){if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(i)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));let e=this.__computedStyle.getPropertyValue(i).trim();try{this.__cssDataCache[i]=gs(e)}catch{!r&&console.warn(`CSS Data error: ${i}`),this.__cssDataCache[i]=null}}return this.__cssDataCache[i]}__extractCssName(i){return i.split("--").map((r,e)=>e===0?"":r).join("--")}__initStyleAttrObserver(){Ve||(Ve=new Set),Ve.add(this.updateCssData),kt||(kt=new MutationObserver(i=>{i[0].type==="attributes"&&Ve.forEach(r=>{r()})}),kt.observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}))}bindCssData(i,r=""){this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(i);let e=this.getCssData(this.__extractCssName(i),!0);e===null&&(e=r),this.add(i,e),this.__initStyleAttrObserver()}dropCssDataCache(){this.__cssDataCache=null,this.__computedStyle=null}defineAccessor(i,r,e){let t="__"+i;this[t]=this[i],Object.defineProperty(this,i,{set:n=>{this[t]=n,e?window.setTimeout(()=>{r==null||r(n)}):r==null||r(n)},get:()=>this[t]}),this[i]=this[t]}static set shadowStyles(i){let r=new Blob([i],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(r)}static set rootStyles(i){if(!this.__rootStylesLink){let r=new Blob([i],{type:"text/css"}),e=URL.createObjectURL(r),t=document.createElement("link");t.href=e,t.rel="stylesheet",this.__rootStylesLink=t}}},Ki=Qe;Br(Ki,"template");function vs(i,r){for(let e in r)e.includes("-")?i.style.setProperty(e,r[e]):i.style[e]=r[e]}function bs(i,r){for(let e in r)r[e].constructor===Boolean?r[e]?i.setAttribute(e,""):i.removeAttribute(e):i.setAttribute(e,r[e])}function jr(i={tag:"div"}){let r=document.createElement(i.tag);if(i.attributes&&bs(r,i.attributes),i.styles&&vs(r,i.styles),i.properties)for(let e in i.properties)r[e]=i.properties[e];return i.processors&&i.processors.forEach(e=>{e(r)}),i.children&&i.children.forEach(e=>{let t=jr(e);r.appendChild(t)}),r}var da="idb-store-ready",_s="symbiote-db",ys="symbiote-idb-update_",ws=class{_notifyWhenReady(i=null){window.dispatchEvent(new CustomEvent(da,{detail:{dbName:this.name,storeName:this.storeName,event:i}}))}get _updEventName(){return ys+this.name}_getUpdateEvent(i){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:i}})}_notifySubscribers(i){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,i),window.dispatchEvent(this._getUpdateEvent(i))}constructor(i,r){this.name=i,this.storeName=r,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=e=>{this.db=e.target.result,this.objStore=this.db.createObjectStore(r,{keyPath:"_key"}),this.objStore.transaction.oncomplete=t=>{this._notifyWhenReady(t)}},this.request.onsuccess=e=>{this.db=e.target.result,this._notifyWhenReady(e)},this.request.onerror=e=>{console.error(e)},this._subscriptionsMap={},this._updateHandler=e=>{e.key===this.name&&this._subscriptionsMap[e.newValue]&&this._subscriptionsMap[e.newValue].forEach(async n=>{n(await this.read(e.newValue))})},this._localUpdateHandler=e=>{this._updateHandler(e.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}read(i){let e=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).get(i);return new Promise((t,n)=>{e.onsuccess=a=>{var o;(o=a.target.result)!=null&&o._value?t(a.target.result._value):(t(null),console.warn(`IDB: cannot read "${i}"`))},e.onerror=a=>{n(a)}})}write(i,r,e=!1){let t={_key:i,_value:r},a=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(t);return new Promise((o,s)=>{a.onsuccess=l=>{e||this._notifySubscribers(i),o(l.target.result)},a.onerror=l=>{s(l)}})}delete(i,r=!1){let t=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(i);return new Promise((n,a)=>{t.onsuccess=o=>{r||this._notifySubscribers(i),n(o)},t.onerror=o=>{a(o)}})}getAll(){let r=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).getAll();return new Promise((e,t)=>{r.onsuccess=n=>{let a=n.target.result;e(a.map(o=>o._value))},r.onerror=n=>{t(n)}})}subscribe(i,r){this._subscriptionsMap[i]||(this._subscriptionsMap[i]=new Set);let e=this._subscriptionsMap[i];return e.add(r),{remove:()=>{e.delete(r),e.size||delete this._subscriptionsMap[i]}}}stop(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,ua.clear(this.name)}},ua=class{static get readyEventName(){return da}static open(i=_s,r="store"){let e=i+"/"+r;return this._reg[e]||(this._reg[e]=new ws(i,r)),this._reg[e]}static clear(i){window.indexedDB.deleteDatabase(i);for(let r in this._reg)r.split("/")[0]===i&&delete this._reg[r]}};Br(ua,"_reg",Object.create(null));function xt(i,r){let e,t=(...n)=>{clearTimeout(e),e=setTimeout(()=>i(...n),r)};return t.cancel=()=>{clearTimeout(e)},t}const xs="--uploadcare-blocks-window-height",Bi="__UPLOADCARE_BLOCKS_WINDOW_HEIGHT_TRACKER_ENABLED__";function ha(){return typeof window[Bi]>"u"?!1:!!window[Bi]}function Cs(){if(ha())return;const i=()=>{document.documentElement.style.setProperty(xs,`${window.innerHeight}px`),window[Bi]=!0},r=xt(i,100);return window.addEventListener("resize",r,{passive:!0}),i(),()=>{window[Bi]=!1,window.removeEventListener("resize",r)}}const Es=i=>i,Tr="{{",pa="}}",Sn="plural:";function kr(i,r,e={}){var o;let{openToken:t=Tr,closeToken:n=pa,transform:a=Es}=e;for(let s in r){let l=(o=r[s])==null?void 0:o.toString();i=i.replaceAll(t+s+n,typeof l=="string"?a(l):l)}return i}function As(i){const r=[];let e=i.indexOf(Tr);for(;e!==-1;){const t=i.indexOf(pa,e),n=i.substring(e+2,t);if(n.startsWith(Sn)){const a=i.substring(e+2,t).replace(Sn,""),o=a.substring(0,a.indexOf("(")),s=a.substring(a.indexOf("(")+1,a.indexOf(")"));r.push({variable:n,pluralKey:o,countVariable:s})}e=i.indexOf(Tr,t)}return r}function $n(i){return Object.prototype.toString.call(i)==="[object Object]"}const Ts=/\W|_/g;function ks(i){return i.split(Ts).map((r,e)=>r.charAt(0)[e>0?"toUpperCase":"toLowerCase"]()+r.slice(1)).join("")}function Ln(i,{ignoreKeys:r}={ignoreKeys:[]}){return Array.isArray(i)?i.map(e=>Ke(e,{ignoreKeys:r})):i}function Ke(i,{ignoreKeys:r}={ignoreKeys:[]}){if(Array.isArray(i))return Ln(i,{ignoreKeys:r});if(!$n(i))return i;const e={};for(const t of Object.keys(i)){let n=i[t];if(r.includes(t)){e[t]=n;continue}$n(n)?n=Ke(n,{ignoreKeys:r}):Array.isArray(n)&&(n=Ln(n,{ignoreKeys:r})),e[ks(t)]=n}return e}const Ss=i=>new Promise(r=>setTimeout(r,i));function fa({libraryName:i,libraryVersion:r,userAgent:e,publicKey:t="",integration:n=""}){const a="JavaScript";if(typeof e=="string")return e;if(typeof e=="function")return e({publicKey:t,libraryName:i,libraryVersion:r,languageName:a,integration:n});const o=[i,r,t].filter(Boolean).join("/"),s=[a,n].filter(Boolean).join("; ");return`${o} (${s})`}const $s={factor:2,time:100};function Ls(i,r=$s){let e=0;function t(n){const a=Math.round(r.time*r.factor**e);return n({attempt:e,retry:s=>Ss(s??a).then(()=>(e+=1,t(n)))})}return t(i)}class Zi extends Error{constructor(e){super();f(this,"originalProgressEvent");this.name="UploadcareNetworkError",this.message="Network error",Object.setPrototypeOf(this,Zi.prototype),this.originalProgressEvent=e}}const Qi=(i,r)=>{i&&(i.aborted?Promise.resolve().then(r):i.addEventListener("abort",()=>r(),{once:!0}))};class Bt extends Error{constructor(e="Request canceled"){super(e);f(this,"isCancel",!0);Object.setPrototypeOf(this,Bt.prototype)}}const Is=500,ma=({check:i,interval:r=Is,timeout:e,signal:t})=>new Promise((n,a)=>{let o,s;Qi(t,()=>{o&&clearTimeout(o),a(new Bt("Poll cancelled"))}),e&&(s=setTimeout(()=>{o&&clearTimeout(o),a(new Bt("Timed out"))},e));const l=()=>{try{Promise.resolve(i(t)).then(c=>{c?(s&&clearTimeout(s),n(c)):o=setTimeout(l,r)}).catch(c=>{s&&clearTimeout(s),a(c)})}catch(c){s&&clearTimeout(s),a(c)}};o=setTimeout(l,0)}),B={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",maxContentLength:50*1024*1024,retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:25*1024*1024,multipartChunkSize:5*1024*1024,multipartMinLastPartSize:1024*1024,maxConcurrentRequests:4,pollingTimeoutMilliseconds:1e4,pusherKey:"79ae88bd931ea68464d9"},Ji="application/octet-stream",ga="original",st=({method:i,url:r,data:e,headers:t={},signal:n,onProgress:a})=>new Promise((o,s)=>{const l=new XMLHttpRequest,c=(i==null?void 0:i.toUpperCase())||"GET";let d=!1;l.open(c,r,!0),t&&Object.entries(t).forEach(u=>{const[h,m]=u;typeof m<"u"&&!Array.isArray(m)&&l.setRequestHeader(h,m)}),l.responseType="text",Qi(n,()=>{d=!0,l.abort(),s(new Bt)}),l.onload=()=>{if(l.status!=200)s(new Error(`Error ${l.status}: ${l.statusText}`));else{const u={method:c,url:r,data:e,headers:t||void 0,signal:n,onProgress:a},h=l.getAllResponseHeaders().trim().split(/[\r\n]+/),m={};h.forEach(function(_){const y=_.split(": "),b=y.shift(),v=y.join(": ");b&&typeof b<"u"&&(m[b]=v)});const p=l.response,g=l.status;o({request:u,data:p,headers:m,status:g})}},l.onerror=u=>{d||s(new Zi(u))},a&&typeof a=="function"&&(l.upload.onprogress=u=>{u.lengthComputable?a({isComputable:!0,value:u.loaded/u.total}):a({isComputable:!1})}),e?l.send(e):l.send()});function Os(i,...r){return i}const Rs=({name:i})=>i?[i]:[],Ms=Os;var Us=()=>new FormData;const va=i=>!1,er=i=>typeof Blob<"u"&&i instanceof Blob,tr=i=>typeof File<"u"&&i instanceof File,ir=i=>!!i&&typeof i=="object"&&!Array.isArray(i)&&"uri"in i&&typeof i.uri=="string",vi=i=>er(i)||tr(i)||va()||ir(i),Ps=i=>typeof i=="string"||typeof i=="number"||typeof i>"u",Ns=i=>!!i&&typeof i=="object"&&!Array.isArray(i),Ds=i=>!!i&&typeof i=="object"&&"data"in i&&vi(i.data);function zs(i,r,e){if(Ds(e)){const{name:t,contentType:n}=e,a=Ms(e.data,t,n??Ji),o=Rs({name:t,contentType:n});i.push([r,a,...o])}else if(Ns(e))for(const[t,n]of Object.entries(e))typeof n<"u"&&i.push([`${r}[${t}]`,String(n)]);else Ps(e)&&e&&i.push([r,e.toString()])}function Vs(i){const r=[];for(const[e,t]of Object.entries(i))zs(r,e,t);return r}function Wr(i){const r=Us(),e=Vs(i);for(const t of e){const[n,a,...o]=t;r.append(n,a,...o)}return r}class fe extends Error{constructor(e,t,n,a,o){super();f(this,"isCancel");f(this,"code");f(this,"request");f(this,"response");f(this,"headers");this.name="UploadClientError",this.message=e,this.code=t,this.request=n,this.response=a,this.headers=o,Object.setPrototypeOf(this,fe.prototype)}}const Fs=i=>{const r=new URLSearchParams;for(const[e,t]of Object.entries(i))t&&typeof t=="object"&&!Array.isArray(t)?Object.entries(t).filter(n=>n[1]??!1).forEach(n=>r.set(`${e}[${n[0]}]`,String(n[1]))):Array.isArray(t)?t.forEach(n=>{r.append(`${e}[]`,n)}):typeof t=="string"&&t?r.set(e,t):typeof t=="number"&&r.set(e,t.toString());return r.toString()},Xe=(i,r,e)=>{const t=new URL(i);return t.pathname=(t.pathname+r).replace("//","/"),e&&(t.search=Fs(e)),t.toString()};var Bs="6.6.1";const Hs="UploadcareUploadClient",js=Bs;function At(i){return fa({libraryName:Hs,libraryVersion:js,...i})}const Ws="RequestThrottledError",In=15e3,Gs=1e3;function Xs(i){const{headers:r}=i||{};if(!r||typeof r["retry-after"]!="string")return In;const e=parseInt(r["retry-after"],10);return Number.isFinite(e)?e*1e3:In}function lt(i,r){const{retryThrottledRequestMaxTimes:e,retryNetworkErrorMaxTimes:t}=r;return Ls(({attempt:n,retry:a})=>i().catch(o=>{if("response"in o&&(o==null?void 0:o.code)===Ws&&n<e)return a(Xs(o));if(o instanceof Zi&&n<t)return a((n+1)*Gs);throw o}))}const ba=i=>{let r="";return(er(i)||tr(i)||ir(i))&&(r=i.type),r||Ji},_a=i=>{let r="";return tr(i)&&i.name?r=i.name:er(i)||va()?r="":ir(i)&&i.name&&(r=i.name),r||ga};function Gr(i){return typeof i>"u"||i==="auto"?"auto":i?"1":"0"}function qs(i,{publicKey:r,fileName:e,contentType:t,baseURL:n=B.baseURL,secureSignature:a,secureExpire:o,store:s,signal:l,onProgress:c,source:d="local",integration:u,userAgent:h,retryThrottledRequestMaxTimes:m=B.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:p=B.retryNetworkErrorMaxTimes,metadata:g}){return lt(()=>st({method:"POST",url:Xe(n,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":At({publicKey:r,integration:u,userAgent:h})},data:Wr({file:{data:i,name:e||_a(i),contentType:t||ba(i)},UPLOADCARE_PUB_KEY:r,UPLOADCARE_STORE:Gr(s),signature:a,expire:o,source:d,metadata:g}),signal:l,onProgress:c}).then(({data:_,headers:y,request:b})=>{const v=Ke(JSON.parse(_));if("error"in v)throw new fe(v.error.content,v.error.errorCode,b,v,y);return v}),{retryNetworkErrorMaxTimes:p,retryThrottledRequestMaxTimes:m})}var Sr;(function(i){i.Token="token",i.FileInfo="file_info"})(Sr||(Sr={}));function Ys(i,{publicKey:r,baseURL:e=B.baseURL,store:t,fileName:n,checkForUrlDuplicates:a,saveUrlForRecurrentUploads:o,secureSignature:s,secureExpire:l,source:c="url",signal:d,integration:u,userAgent:h,retryThrottledRequestMaxTimes:m=B.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:p=B.retryNetworkErrorMaxTimes,metadata:g}){return lt(()=>st({method:"POST",headers:{"X-UC-User-Agent":At({publicKey:r,integration:u,userAgent:h})},url:Xe(e,"/from_url/",{jsonerrors:1,pub_key:r,source_url:i,store:Gr(t),filename:n,check_URL_duplicates:a?1:void 0,save_URL_duplicates:o?1:void 0,signature:s,expire:l,source:c,metadata:g}),signal:d}).then(({data:_,headers:y,request:b})=>{const v=Ke(JSON.parse(_));if("error"in v)throw new fe(v.error.content,v.error.errorCode,b,v,y);return v}),{retryNetworkErrorMaxTimes:p,retryThrottledRequestMaxTimes:m})}var ue;(function(i){i.Unknown="unknown",i.Waiting="waiting",i.Progress="progress",i.Error="error",i.Success="success"})(ue||(ue={}));const Ks=i=>"status"in i&&i.status===ue.Error;function Zs(i,{publicKey:r,baseURL:e=B.baseURL,signal:t,integration:n,userAgent:a,retryThrottledRequestMaxTimes:o=B.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:s=B.retryNetworkErrorMaxTimes}={}){return lt(()=>st({method:"GET",headers:r?{"X-UC-User-Agent":At({publicKey:r,integration:n,userAgent:a})}:void 0,url:Xe(e,"/from_url/status/",{jsonerrors:1,token:i}),signal:t}).then(({data:l,headers:c,request:d})=>{const u=Ke(JSON.parse(l));if("error"in u&&!Ks(u))throw new fe(u.error.content,void 0,d,u,c);return u}),{retryNetworkErrorMaxTimes:s,retryThrottledRequestMaxTimes:o})}function Qs(i,{publicKey:r,baseURL:e=B.baseURL,jsonpCallback:t,secureSignature:n,secureExpire:a,signal:o,source:s,integration:l,userAgent:c,retryThrottledRequestMaxTimes:d=B.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:u=B.retryNetworkErrorMaxTimes}){return lt(()=>st({method:"POST",headers:{"X-UC-User-Agent":At({publicKey:r,integration:l,userAgent:c})},url:Xe(e,"/group/",{jsonerrors:1,pub_key:r,files:i,callback:t,signature:n,expire:a,source:s}),signal:o}).then(({data:h,headers:m,request:p})=>{const g=Ke(JSON.parse(h));if("error"in g)throw new fe(g.error.content,g.error.errorCode,p,g,m);return g}),{retryNetworkErrorMaxTimes:u,retryThrottledRequestMaxTimes:d})}function ya(i,{publicKey:r,baseURL:e=B.baseURL,signal:t,source:n,integration:a,userAgent:o,retryThrottledRequestMaxTimes:s=B.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=B.retryNetworkErrorMaxTimes}){return lt(()=>st({method:"GET",headers:{"X-UC-User-Agent":At({publicKey:r,integration:a,userAgent:o})},url:Xe(e,"/info/",{jsonerrors:1,pub_key:r,file_id:i,source:n}),signal:t}).then(({data:c,headers:d,request:u})=>{const h=Ke(JSON.parse(c));if("error"in h)throw new fe(h.error.content,h.error.errorCode,u,h,d);return h}),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:l})}function Js(i,{publicKey:r,contentType:e,fileName:t,multipartChunkSize:n=B.multipartChunkSize,baseURL:a="",secureSignature:o,secureExpire:s,store:l,signal:c,source:d="local",integration:u,userAgent:h,retryThrottledRequestMaxTimes:m=B.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:p=B.retryNetworkErrorMaxTimes,metadata:g}){return lt(()=>st({method:"POST",url:Xe(a,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":At({publicKey:r,integration:u,userAgent:h})},data:Wr({filename:t||ga,size:i,content_type:e||Ji,part_size:n,UPLOADCARE_STORE:Gr(l),UPLOADCARE_PUB_KEY:r,signature:o,expire:s,source:d,metadata:g}),signal:c}).then(({data:_,headers:y,request:b})=>{const v=Ke(JSON.parse(_));if("error"in v)throw new fe(v.error.content,v.error.errorCode,b,v,y);return v.parts=Object.keys(v.parts).map(I=>v.parts[I]),v}),{retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:p})}function el(i,r,{contentType:e,signal:t,onProgress:n,retryThrottledRequestMaxTimes:a=B.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:o=B.retryNetworkErrorMaxTimes}){return lt(()=>st({method:"PUT",url:r,data:i,onProgress:n,signal:t,headers:{"Content-Type":e||Ji}}).then(s=>(n&&n({isComputable:!0,value:1}),s)).then(({status:s})=>({code:s})),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:o})}function tl(i,{publicKey:r,baseURL:e=B.baseURL,source:t="local",signal:n,integration:a,userAgent:o,retryThrottledRequestMaxTimes:s=B.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=B.retryNetworkErrorMaxTimes}){return lt(()=>st({method:"POST",url:Xe(e,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":At({publicKey:r,integration:a,userAgent:o})},data:Wr({uuid:i,UPLOADCARE_PUB_KEY:r,source:t}),signal:n}).then(({data:c,headers:d,request:u})=>{const h=Ke(JSON.parse(c));if("error"in h)throw new fe(h.error.content,h.error.errorCode,u,h,d);return h}),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:l})}function Xr({file:i,publicKey:r,baseURL:e,source:t,integration:n,userAgent:a,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:s,signal:l,onProgress:c}){return ma({check:d=>ya(i,{publicKey:r,baseURL:e,signal:d,source:t,integration:n,userAgent:a,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:s}).then(u=>u.isReady?u:(c&&c({isComputable:!0,value:1}),!1)),signal:l})}class bi{constructor(r,{baseCDN:e=B.baseCDN,fileName:t}={}){f(this,"uuid");f(this,"name",null);f(this,"size",null);f(this,"isStored",null);f(this,"isImage",null);f(this,"mimeType",null);f(this,"cdnUrl",null);f(this,"s3Url",null);f(this,"originalFilename",null);f(this,"imageInfo",null);f(this,"videoInfo",null);f(this,"contentInfo",null);f(this,"metadata",null);f(this,"s3Bucket",null);const{uuid:n,s3Bucket:a}=r,o=Xe(e,`${n}/`),s=a?Xe(`https://${a}.s3.amazonaws.com/`,`${n}/${r.filename}`):null;this.uuid=n,this.name=t||r.filename,this.size=r.size,this.isStored=r.isStored,this.isImage=r.isImage,this.mimeType=r.mimeType,this.cdnUrl=o,this.originalFilename=r.originalFilename,this.imageInfo=r.imageInfo,this.videoInfo=r.videoInfo,this.contentInfo=r.contentInfo,this.metadata=r.metadata||null,this.s3Bucket=a||null,this.s3Url=s}}const il=(i,{publicKey:r,fileName:e,baseURL:t,secureSignature:n,secureExpire:a,store:o,contentType:s,signal:l,onProgress:c,source:d,integration:u,userAgent:h,retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:p,baseCDN:g,metadata:_})=>qs(i,{publicKey:r,fileName:e,contentType:s,baseURL:t,secureSignature:n,secureExpire:a,store:o,signal:l,onProgress:c,source:d,integration:u,userAgent:h,retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:p,metadata:_}).then(({file:y})=>Xr({file:y,publicKey:r,baseURL:t,source:d,integration:u,userAgent:h,retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:p,onProgress:c,signal:l})).then(y=>new bi(y,{baseCDN:g})),rl=(i,{publicKey:r,fileName:e,baseURL:t,signal:n,onProgress:a,source:o,integration:s,userAgent:l,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:d,baseCDN:u})=>ya(i,{publicKey:r,baseURL:t,signal:n,source:o,integration:s,userAgent:l,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:d}).then(h=>new bi(h,{baseCDN:u,fileName:e})).then(h=>(a&&a({isComputable:!0,value:1}),h)),nl=(i,{signal:r}={})=>{let e=null,t=null;const n=i.map(()=>new AbortController),a=o=>()=>{t=o,n.forEach((s,l)=>l!==o&&s.abort())};return Qi(r,()=>{n.forEach(o=>o.abort())}),Promise.all(i.map((o,s)=>{const l=a(s);return Promise.resolve().then(()=>o({stopRace:l,signal:n[s].signal})).then(c=>(l(),c)).catch(c=>(e=c,null))})).then(o=>{if(t===null)throw e;return o[t]})};var al=window.WebSocket;class ol{constructor(){f(this,"events",Object.create({}))}emit(r,e){var t;(t=this.events[r])==null||t.forEach(n=>n(e))}on(r,e){this.events[r]=this.events[r]||[],this.events[r].push(e)}off(r,e){e?this.events[r]=this.events[r].filter(t=>t!==e):this.events[r]=[]}}const sl=(i,r)=>i==="success"?{status:ue.Success,...r}:i==="progress"?{status:ue.Progress,...r}:{status:ue.Error,...r};class ll{constructor(r,e=3e4){f(this,"key");f(this,"disconnectTime");f(this,"ws");f(this,"queue",[]);f(this,"isConnected",!1);f(this,"subscribers",0);f(this,"emmitter",new ol);f(this,"disconnectTimeoutId",null);this.key=r,this.disconnectTime=e}connect(){if(this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),!this.isConnected&&!this.ws){const r=`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`;this.ws=new al(r),this.ws.addEventListener("error",e=>{this.emmitter.emit("error",new Error(e.message))}),this.emmitter.on("connected",()=>{this.isConnected=!0,this.queue.forEach(e=>this.send(e.event,e.data)),this.queue=[]}),this.ws.addEventListener("message",e=>{const t=JSON.parse(e.data.toString());switch(t.event){case"pusher:connection_established":{this.emmitter.emit("connected",void 0);break}case"pusher:ping":{this.send("pusher:pong",{});break}case"progress":case"success":case"fail":this.emmitter.emit(t.channel,sl(t.event,JSON.parse(t.data)))}})}}disconnect(){const r=()=>{var e;(e=this.ws)==null||e.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout(()=>{r()},this.disconnectTime):r()}send(r,e){var n;const t=JSON.stringify({event:r,data:e});(n=this.ws)==null||n.send(t)}subscribe(r,e){this.subscribers+=1,this.connect();const t=`task-status-${r}`,n={event:"pusher:subscribe",data:{channel:t}};this.emmitter.on(t,e),this.isConnected?this.send(n.event,n.data):this.queue.push(n)}unsubscribe(r){this.subscribers-=1;const e=`task-status-${r}`,t={event:"pusher:unsubscribe",data:{channel:e}};this.emmitter.off(e),this.isConnected?this.send(t.event,t.data):this.queue=this.queue.filter(n=>n.data.channel!==e),this.subscribers===0&&this.disconnect()}onError(r){return this.emmitter.on("error",r),()=>this.emmitter.off("error",r)}}let vr=null;const qr=i=>{if(!vr){const r=typeof window>"u"?0:3e4;vr=new ll(i,r)}return vr},cl=i=>{qr(i).connect()};function dl({token:i,publicKey:r,baseURL:e,integration:t,userAgent:n,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:o,onProgress:s,signal:l}){return ma({check:c=>Zs(i,{publicKey:r,baseURL:e,integration:t,userAgent:n,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:o,signal:c}).then(d=>{switch(d.status){case ue.Error:return new fe(d.error,d.errorCode);case ue.Waiting:return!1;case ue.Unknown:return new fe(`Token "${i}" was not found.`);case ue.Progress:return s&&(d.total==="unknown"?s({isComputable:!1}):s({isComputable:!0,value:d.done/d.total})),!1;case ue.Success:return s&&s({isComputable:!0,value:d.done/d.total}),d;default:throw new Error("Unknown status")}}),signal:l})}const ul=({token:i,pusherKey:r,signal:e,onProgress:t})=>new Promise((n,a)=>{const o=qr(r),s=o.onError(a),l=()=>{s(),o.unsubscribe(i)};Qi(e,()=>{l(),a(new Bt("pusher cancelled"))}),o.subscribe(i,c=>{switch(c.status){case ue.Progress:{t&&(c.total==="unknown"?t({isComputable:!1}):t({isComputable:!0,value:c.done/c.total}));break}case ue.Success:{l(),t&&t({isComputable:!0,value:c.done/c.total}),n(c);break}case ue.Error:l(),a(new fe(c.msg,c.error_code))}})}),hl=(i,{publicKey:r,fileName:e,baseURL:t,baseCDN:n,checkForUrlDuplicates:a,saveUrlForRecurrentUploads:o,secureSignature:s,secureExpire:l,store:c,signal:d,onProgress:u,source:h,integration:m,userAgent:p,retryThrottledRequestMaxTimes:g,pusherKey:_=B.pusherKey,metadata:y})=>Promise.resolve(cl(_)).then(()=>Ys(i,{publicKey:r,fileName:e,baseURL:t,checkForUrlDuplicates:a,saveUrlForRecurrentUploads:o,secureSignature:s,secureExpire:l,store:c,signal:d,source:h,integration:m,userAgent:p,retryThrottledRequestMaxTimes:g,metadata:y})).catch(b=>{const v=qr(_);return v==null||v.disconnect(),Promise.reject(b)}).then(b=>b.type===Sr.FileInfo?b:nl([({signal:v})=>dl({token:b.token,publicKey:r,baseURL:t,integration:m,userAgent:p,retryThrottledRequestMaxTimes:g,onProgress:u,signal:v}),({signal:v})=>ul({token:b.token,pusherKey:_,signal:v,onProgress:u})],{signal:d})).then(b=>{if(b instanceof fe)throw b;return b}).then(b=>Xr({file:b.uuid,publicKey:r,baseURL:t,integration:m,userAgent:p,retryThrottledRequestMaxTimes:g,onProgress:u,signal:d})).then(b=>new bi(b,{baseCDN:n})),br=new WeakMap,pl=async i=>{if(br.has(i))return br.get(i);const r=await fetch(i.uri).then(e=>e.blob());return br.set(i,r),r},wa=async i=>{if(tr(i)||er(i))return i.size;if(ir(i))return(await pl(i)).size;throw new Error("Unknown file type. Cannot determine file size.")},fl=(i,r=B.multipartMinFileSize)=>i>=r,xa=i=>{const r="[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}",e=new RegExp(r);return!vi(i)&&e.test(i)},Ca=i=>{const r="^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$",e=new RegExp(r);return!vi(i)&&e.test(i)},ml=(i,r)=>new Promise((e,t)=>{const n=[];let a=!1,o=r.length;const s=[...r],l=()=>{const c=r.length-s.length,d=s.shift();d&&d().then(u=>{a||(n[c]=u,o-=1,o?l():e(n))}).catch(u=>{a=!0,t(u)})};for(let c=0;c<i;c++)l()}),gl=(i,r,e,t)=>{const n=t*r,a=Math.min(n+t,e);return i.slice(n,a)},vl=async(i,r,e)=>t=>gl(i,t,r,e),bl=(i,r,{publicKey:e,contentType:t,onProgress:n,signal:a,integration:o,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:l})=>el(i,r,{publicKey:e,contentType:t,onProgress:n,signal:a,integration:o,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:l}),_l=async(i,{publicKey:r,fileName:e,fileSize:t,baseURL:n,secureSignature:a,secureExpire:o,store:s,signal:l,onProgress:c,source:d,integration:u,userAgent:h,retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:p,contentType:g,multipartChunkSize:_=B.multipartChunkSize,maxConcurrentRequests:y=B.maxConcurrentRequests,baseCDN:b,metadata:v})=>{const I=t??await wa(i);let k;const R=(w,T)=>{if(!c)return;k||(k=Array(w).fill(0));const U=S=>S.reduce((x,A)=>x+A,0);return S=>{S.isComputable&&(k[T]=S.value,c({isComputable:!0,value:U(k)/w}))}};return g||(g=ba(i)),Js(I,{publicKey:r,contentType:g,fileName:e||_a(i),baseURL:n,secureSignature:a,secureExpire:o,store:s,signal:l,source:d,integration:u,userAgent:h,retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:p,metadata:v}).then(async({uuid:w,parts:T})=>{const U=await vl(i,I,_);return Promise.all([w,ml(y,T.map((S,x)=>()=>bl(U(x),S,{publicKey:r,contentType:g,onProgress:R(T.length,x),signal:l,integration:u,retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:p})))])}).then(([w])=>tl(w,{publicKey:r,baseURL:n,source:d,integration:u,userAgent:h,retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:p})).then(w=>w.isReady?w:Xr({file:w.uuid,publicKey:r,baseURL:n,source:d,integration:u,userAgent:h,retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:p,onProgress:c,signal:l})).then(w=>new bi(w,{baseCDN:b}))};async function Ea(i,{publicKey:r,fileName:e,baseURL:t=B.baseURL,secureSignature:n,secureExpire:a,store:o,signal:s,onProgress:l,source:c,integration:d,userAgent:u,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:m,contentType:p,multipartMinFileSize:g,multipartChunkSize:_,maxConcurrentRequests:y,baseCDN:b=B.baseCDN,checkForUrlDuplicates:v,saveUrlForRecurrentUploads:I,pusherKey:k,metadata:R}){if(vi(i)){const w=await wa(i);return fl(w,g)?_l(i,{publicKey:r,contentType:p,multipartChunkSize:_,fileSize:w,fileName:e,baseURL:t,secureSignature:n,secureExpire:a,store:o,signal:s,onProgress:l,source:c,integration:d,userAgent:u,maxConcurrentRequests:y,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:m,baseCDN:b,metadata:R}):il(i,{publicKey:r,fileName:e,contentType:p,baseURL:t,secureSignature:n,secureExpire:a,store:o,signal:s,onProgress:l,source:c,integration:d,userAgent:u,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:m,baseCDN:b,metadata:R})}if(Ca(i))return hl(i,{publicKey:r,fileName:e,baseURL:t,baseCDN:b,checkForUrlDuplicates:v,saveUrlForRecurrentUploads:I,secureSignature:n,secureExpire:a,store:o,signal:s,onProgress:l,source:c,integration:d,userAgent:u,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:m,pusherKey:k,metadata:R});if(xa(i))return rl(i,{publicKey:r,fileName:e,baseURL:t,signal:s,onProgress:l,source:c,integration:d,userAgent:u,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:m,baseCDN:b});throw new TypeError(`File uploading from "${i}" is not supported`)}class yl{constructor(r,e){f(this,"uuid");f(this,"filesCount");f(this,"totalSize");f(this,"isStored");f(this,"isImage");f(this,"cdnUrl");f(this,"files");f(this,"createdAt");f(this,"storedAt",null);this.uuid=r.id,this.filesCount=r.filesCount,this.totalSize=Object.values(r.files).reduce((t,n)=>t+n.size,0),this.isStored=!!r.datetimeStored,this.isImage=!!Object.values(r.files).filter(t=>t.isImage).length,this.cdnUrl=r.cdnUrl,this.files=e,this.createdAt=r.datetimeCreated,this.storedAt=r.datetimeStored}}const wl=i=>{for(const r of i)if(!vi(r))return!1;return!0},xl=i=>{for(const r of i)if(!xa(r))return!1;return!0},Cl=i=>{for(const r of i)if(!Ca(r))return!1;return!0};function El(i,{publicKey:r,fileName:e,baseURL:t=B.baseURL,secureSignature:n,secureExpire:a,store:o,signal:s,onProgress:l,source:c,integration:d,userAgent:u,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:m,contentType:p,multipartChunkSize:g=B.multipartChunkSize,baseCDN:_=B.baseCDN,checkForUrlDuplicates:y,saveUrlForRecurrentUploads:b,jsonpCallback:v}){if(!wl(i)&&!Cl(i)&&!xl(i))throw new TypeError(`Group uploading from "${i}" is not supported`);let I,k=!0;const R=i.length,w=(T,U)=>{if(!l)return;I||(I=Array(T).fill(0));const S=x=>x.reduce((A,$)=>A+$)/T;return x=>{if(!x.isComputable||!k){k=!1,l({isComputable:!1});return}I[U]=x.value,l({isComputable:!0,value:S(I)})}};return Promise.all(i.map((T,U)=>Ea(T,{publicKey:r,fileName:e,baseURL:t,secureSignature:n,secureExpire:a,store:o,signal:s,onProgress:w(R,U),source:c,integration:d,userAgent:u,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:m,contentType:p,multipartChunkSize:g,baseCDN:_,checkForUrlDuplicates:y,saveUrlForRecurrentUploads:b}))).then(T=>{const U=T.map(S=>S.uuid);return Qs(U,{publicKey:r,baseURL:t,jsonpCallback:v,secureSignature:n,secureExpire:a,signal:s,source:c,integration:d,userAgent:u,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:m}).then(S=>new yl(S,T)).then(S=>(l&&l({isComputable:!0,value:1}),S))})}var vt,Nt,bt,Dt,zt,Vt,Mi;class Al{constructor(r){pt(this,Vt);pt(this,vt,1);pt(this,Nt,[]);pt(this,bt,0);pt(this,Dt,new WeakMap);pt(this,zt,new WeakMap);Qt(this,vt,r)}add(r){return new Promise((e,t)=>{re(this,Dt).set(r,e),re(this,zt).set(r,t),re(this,Nt).push(r),Si(this,Vt,Mi).call(this)})}get pending(){return re(this,Nt).length}get running(){return re(this,bt)}set concurrency(r){Qt(this,vt,r),Si(this,Vt,Mi).call(this)}get concurrency(){return re(this,vt)}}vt=new WeakMap,Nt=new WeakMap,bt=new WeakMap,Dt=new WeakMap,zt=new WeakMap,Vt=new WeakSet,Mi=function(){const r=re(this,vt)-re(this,bt);for(let e=0;e<r;e++){const t=re(this,Nt).shift();if(!t)return;const n=re(this,Dt).get(t),a=re(this,zt).get(t);if(!n||!a)throw new Error("Unexpected behavior: resolver or rejector is undefined");Qt(this,bt,re(this,bt)+1),t().finally(()=>{re(this,Dt).delete(t),re(this,zt).delete(t),Qt(this,bt,re(this,bt)-1),Si(this,Vt,Mi).call(this)}).then(o=>n(o)).catch(o=>a(o))}};const Aa=()=>({"*blocksRegistry":new Set}),Ta=i=>({...Aa(),"*currentActivity":"","*currentActivityParams":{},"*history":[],"*historyBack":null,"*closeModal":()=>{i.set$({"*modalActive":!1,"*currentActivity":""})}}),ka=i=>({...Ta(i),"*commonProgress":0,"*uploadList":[],"*outputData":null,"*focusedEntry":null,"*uploadMetadata":null,"*uploadQueue":new Al(1)});function Tl(i,r){[...i.querySelectorAll("[l10n]")].forEach(e=>{let t=e.getAttribute("l10n"),n="textContent";if(t.includes(":")){let o=t.split(":");n=o[0],t=o[1]}let a="l10n:"+t;r.__l10nKeys.push(a),r.add(a,t),r.sub(a,o=>{e[n]=r.l10n(o)}),e.removeAttribute("l10n")})}const he=i=>`*cfg/${i}`,_t=i=>{var r;return(r=i.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g))==null?void 0:r.map(e=>e.toLowerCase()).join("-")},On=new Set;function Sa(i){On.has(i)||(On.add(i),console.warn(i))}const $a=(i,r)=>new Intl.PluralRules(i).select(r),_r="lr-";class Q extends Ki{constructor(){super();f(this,"allowCustomTemplate",!0);f(this,"init$",Aa());f(this,"updateCtxCssData",()=>{let e=this.$["*blocksRegistry"];for(let t of e)t.isConnected&&t.updateCssData()});this.activityType=null,this.addTemplateProcessor(Tl),this.__l10nKeys=[]}l10n(e,t={}){if(!e)return"";let n=this.getCssData("--l10n-"+e,!0)||e,a=As(n);for(let s of a)t[s.variable]=this.pluralize(s.pluralKey,Number(t[s.countVariable]));return kr(n,t)}pluralize(e,t){const n=this.l10n("locale-name")||"en-US",a=$a(n,t);return this.l10n(`${e}__${a}`)}applyL10nKey(e,t){let n="l10n:"+e;this.$[n]=t,this.__l10nKeys.push(e)}hasBlockInCtx(e){let t=this.$["*blocksRegistry"];for(let n of t)if(e(n))return!0;return!1}setForCtxTarget(e,t,n){this.hasBlockInCtx(a=>a.constructor.StateConsumerScope===e)&&(this.$[t]=n)}setActivity(e){if(this.hasBlockInCtx(t=>t.activityType===e)){this.$["*currentActivity"]=e;return}console.warn(`Activity type "${e}" not found in the context`)}connectedCallback(){const e=this.constructor.className;e&&this.classList.toggle(`${_r}${e}`,!0),ha()||(this._destroyInnerHeightTracker=Cs()),this.hasAttribute("retpl")&&(this.constructor.template=null,this.processInnerHtml=!0),super.connectedCallback()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._destroyInnerHeightTracker)==null||e.call(this)}initCallback(){this.$["*blocksRegistry"].add(this)}destroyCallback(){this.$["*blocksRegistry"].delete(this)}fileSizeFmt(e,t=2){let n=["B","KB","MB","GB","TB"],a=c=>this.getCssData("--l10n-unit-"+c.toLowerCase(),!0)||c;if(e===0)return`0 ${a(n[0])}`;let o=1024,s=t<0?0:t,l=Math.floor(Math.log(e)/Math.log(o));return parseFloat((e/o**l).toFixed(s))+" "+a(n[l])}proxyUrl(e){let t=this.cfg.secureDeliveryProxy;return t?kr(t,{previewUrl:e},{transform:n=>window.encodeURIComponent(n)}):e}parseCfgProp(e){return{ctx:this.nodeCtx,name:e.replace("*","")}}get cfg(){if(!this.__cfgProxy){let e=Object.create(null);this.__cfgProxy=new Proxy(e,{get:(t,n)=>{const a=he(n),o=this.parseCfgProp(a);return o.ctx.has(o.name)?o.ctx.read(o.name):(Sa("Using CSS variables for configuration is deprecated. Please use `lr-config` instead. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/"),this.getCssData(`--cfg-${_t(n)}`))}})}return this.__cfgProxy}subConfigValue(e,t){const n=this.parseCfgProp(he(e));n.ctx.has(n.name)?this.sub(he(e),t):(this.bindCssData(`--cfg-${_t(e)}`),this.sub(`--cfg-${_t(e)}`,t))}static reg(e){if(!e){super.reg();return}super.reg(e.startsWith(_r)?e:_r+e)}}f(Q,"StateConsumerScope",null),f(Q,"className","");const En=class extends Q{constructor(){super(...arguments);f(this,"_handleBackdropClick",()=>{this._closeDialog()});f(this,"_closeDialog",()=>{this.setForCtxTarget(En.StateConsumerScope,"*modalActive",!1)});f(this,"_handleDialogClose",()=>{this._closeDialog()});f(this,"_handleDialogClick",e=>{e.target===this.ref.dialog&&this._closeDialog()});f(this,"init$",{...this.init$,"*modalActive":!1,isOpen:!1,closeClicked:this._handleDialogClose})}show(){this.ref.dialog.showModal?this.ref.dialog.showModal():this.ref.dialog.setAttribute("open","")}hide(){this.ref.dialog.close?this.ref.dialog.close():this.ref.dialog.removeAttribute("open")}initCallback(){if(super.initCallback(),typeof HTMLDialogElement=="function")this.ref.dialog.addEventListener("close",this._handleDialogClose),this.ref.dialog.addEventListener("click",this._handleDialogClick);else{this.setAttribute("dialog-fallback","");let e=document.createElement("div");e.className="backdrop",this.appendChild(e),e.addEventListener("click",this._handleBackdropClick)}this.sub("*modalActive",e=>{this.$.isOpen!==e&&(this.$.isOpen=e),e&&this.cfg.modalScrollLock?document.body.style.overflow="hidden":document.body.style.overflow=""}),this.subConfigValue("modalBackdropStrokes",e=>{e?this.setAttribute("strokes",""):this.removeAttribute("strokes")}),this.sub("isOpen",e=>{e?this.show():this.hide()})}destroyCallback(){super.destroyCallback(),document.body.style.overflow="",this.ref.dialog.removeEventListener("close",this._handleDialogClose),this.ref.dialog.removeEventListener("click",this._handleDialogClick)}};let we=En;f(we,"StateConsumerScope","modal");we.template=`
  <dialog ref="dialog">
    <slot></slot>
  </dialog>
`;const Rn="active",Jt="___ACTIVITY_IS_ACTIVE___",Ue=class extends Q{constructor(){super(...arguments);f(this,"historyTracked",!1);f(this,"init$",Ta(this));f(this,"_debouncedHistoryFlush",xt(this._historyFlush.bind(this),10))}_deactivate(){var t;let e=Ue._activityRegistry[this.activityKey];this[Jt]=!1,this.removeAttribute(Rn),(t=e==null?void 0:e.deactivateCallback)==null||t.call(e)}_activate(){var t;let e=Ue._activityRegistry[this.activityKey];this.$["*historyBack"]=this.historyBack.bind(this),this[Jt]=!0,this.setAttribute(Rn,""),(t=e==null?void 0:e.activateCallback)==null||t.call(e),this._debouncedHistoryFlush()}initCallback(){super.initCallback(),this.hasAttribute("current-activity")&&this.sub("*currentActivity",e=>{this.setAttribute("current-activity",e)}),this.activityType&&(this.hasAttribute("activity")||this.setAttribute("activity",this.activityType),this.sub("*currentActivity",e=>{this.activityType!==e&&this[Jt]?this._deactivate():this.activityType===e&&!this[Jt]&&this._activate(),e||(this.$["*history"]=[])}))}_historyFlush(){let e=this.$["*history"];e&&(e.length>10&&(e=e.slice(e.length-11,e.length-1)),this.historyTracked&&e.push(this.activityType),this.$["*history"]=e)}_isActivityRegistered(){return this.activityType&&!!Ue._activityRegistry[this.activityKey]}get isActivityActive(){return this[Jt]}registerActivity(e,t={}){const{onActivate:n,onDeactivate:a}=t;Ue._activityRegistry||(Ue._activityRegistry=Object.create(null)),Ue._activityRegistry[this.activityKey]={activateCallback:n,deactivateCallback:a}}unregisterActivity(){this.isActivityActive&&this._deactivate(),Ue._activityRegistry[this.activityKey]=void 0}destroyCallback(){super.destroyCallback(),this._isActivityRegistered()&&this.unregisterActivity(),Object.keys(Ue._activityRegistry).length===0&&(this.$["*currentActivity"]=null)}get activityKey(){return this.ctxName+this.activityType}get activityParams(){return this.$["*currentActivityParams"]}get initActivity(){return this.getCssData("--cfg-init-activity")}get doneActivity(){return this.getCssData("--cfg-done-activity")}historyBack(){let e=this.$["*history"];if(e){let t=e.pop();for(;t===this.activityType;)t=e.pop();this.$["*currentActivity"]=t,this.$["*history"]=e,t||this.setForCtxTarget(we.StateConsumerScope,"*modalActive",!1)}}};let F=Ue;f(F,"_activityRegistry",Object.create(null));F.activities=Object.freeze({START_FROM:"start-from",CAMERA:"camera",DRAW:"draw",UPLOAD_LIST:"upload-list",URL:"url",CONFIRMATION:"confirmation",CLOUD_IMG_EDIT:"cloud-image-edit",EXTERNAL:"external",DETAILS:"details"});const qe=(i,r=",")=>i.trim().split(r).map(e=>e.trim()).filter(e=>e.length>0),Ui=["image/*","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/avif","image/avif-sequence",".heif",".heifs",".heic",".heics",".avif",".avifs"],Mn=i=>i?i.filter(r=>typeof r=="string").map(r=>qe(r)).flat():[],La=(i,r)=>r.some(e=>e.endsWith("*")?(e=e.replace("*",""),i.startsWith(e)):i===e),kl=(i,r)=>r.some(e=>e.startsWith(".")?i.toLowerCase().endsWith(e.toLowerCase()):!1),$r=i=>{let r=i==null?void 0:i.type;return r?La(r,Ui):!1},Sl=Object.freeze({file:{type:File,value:null},externalUrl:{type:String,value:null},fileName:{type:String,value:null,nullable:!0},fileSize:{type:Number,value:null,nullable:!0},lastModified:{type:Number,value:Date.now()},uploadProgress:{type:Number,value:0},uuid:{type:String,value:null},isImage:{type:Boolean,value:!1},mimeType:{type:String,value:null,nullable:!0},uploadError:{type:Error,value:null,nullable:!0},validationErrorMsg:{type:String,value:null,nullable:!0},validationMultipleLimitMsg:{type:String,value:null,nullable:!0},ctxName:{type:String,value:null},cdnUrl:{type:String,value:null},cdnUrlModifiers:{type:String,value:null},fileInfo:{type:bi,value:null},isUploading:{type:Boolean,value:!1},abortController:{type:AbortController,value:null,nullable:!0},thumbUrl:{type:String,value:null,nullable:!0},silentUpload:{type:Boolean,value:!1},source:{type:String,value:!1,nullable:!0}}),Ia="blocks",Oa="0.25.1";function $l(i){return fa({...i,libraryName:Ia,libraryVersion:Oa})}const Un="[Typed State] Wrong property name: ",Ll="[Typed State] Wrong property type: ";class Il{constructor(r,e){this.__typedSchema=r,this.__ctxId=e||Hr.generate(),this.__schema=Object.keys(r).reduce((t,n)=>(t[n]=r[n].value,t),{}),this.__data=X.registerCtx(this.__schema,this.__ctxId)}get uid(){return this.__ctxId}setValue(r,e){if(!this.__typedSchema.hasOwnProperty(r)){console.warn(Un+r);return}let t=this.__typedSchema[r];if((e==null?void 0:e.constructor)===t.type||e instanceof t.type||t.nullable&&e===null){this.__data.pub(r,e);return}console.warn(Ll+r)}setMultipleValues(r){for(let e in r)this.setValue(e,r[e])}getValue(r){if(!this.__typedSchema.hasOwnProperty(r)){console.warn(Un+r);return}return this.__data.read(r)}subscribe(r,e){return this.__data.sub(r,e)}remove(){X.deleteCtx(this.__ctxId)}}class Ol{constructor(r){this.__typedSchema=r.typedSchema,this.__ctxId=r.ctxName||Hr.generate(),this.__data=X.registerCtx({},this.__ctxId),this.__watchList=r.watchList||[],this.__handler=r.handler||null,this.__subsMap=Object.create(null),this.__observers=new Set,this.__items=new Set,this.__removed=new Set,this.__added=new Set;let e=Object.create(null);this.__notifyObservers=(t,n)=>{this.__observeTimeout&&window.clearTimeout(this.__observeTimeout),e[t]||(e[t]=new Set),e[t].add(n),this.__observeTimeout=window.setTimeout(()=>{this.__observers.forEach(a=>{a({...e})}),e=Object.create(null)})}}notify(){this.__notifyTimeout&&window.clearTimeout(this.__notifyTimeout),this.__notifyTimeout=window.setTimeout(()=>{var t;let r=new Set(this.__added),e=new Set(this.__removed);this.__added.clear(),this.__removed.clear(),(t=this.__handler)==null||t.call(this,[...this.__items],r,e)})}setHandler(r){this.__handler=r}getHandler(){return this.__handler}removeHandler(){this.__handler=null}add(r){let e=new Il(this.__typedSchema);for(let t in r)e.setValue(t,r[t]);return this.__data.add(e.uid,e),this.__added.add(e),this.__watchList.forEach(t=>{this.__subsMap[e.uid]||(this.__subsMap[e.uid]=[]),this.__subsMap[e.uid].push(e.subscribe(t,()=>{this.__notifyObservers(t,e.uid)}))}),this.__items.add(e.uid),this.notify(),e}read(r){return this.__data.read(r)}readProp(r,e){return this.read(r).getValue(e)}publishProp(r,e,t){this.read(r).setValue(e,t)}remove(r){this.__removed.add(this.__data.read(r)),this.__items.delete(r),this.notify(),this.__data.pub(r,null),delete this.__subsMap[r]}clearAll(){this.__items.forEach(r=>{this.remove(r)})}observe(r){this.__observers.add(r)}unobserve(r){this.__observers.delete(r)}findItems(r){let e=[];return this.__items.forEach(t=>{let n=this.read(t);r(n)&&e.push(t)}),e}items(){return[...this.__items]}get size(){return this.__items.size}destroy(){X.deleteCtx(this.__data),this.__observers=null,this.__handler=null;for(let r in this.__subsMap)this.__subsMap[r].forEach(e=>{e.remove()}),delete this.__subsMap[r]}}const se={UPLOAD_START:"UPLOAD_START",REMOVE:"REMOVE",UPLOAD_PROGRESS:"UPLOAD_PROGRESS",UPLOAD_FINISH:"UPLOAD_FINISH",UPLOAD_ERROR:"UPLOAD_ERROR",VALIDATION_ERROR:"VALIDATION_ERROR",CDN_MODIFICATION:"CLOUD_MODIFICATION",DATA_OUTPUT:"DATA_OUTPUT",DONE_FLOW:"DONE_FLOW",INIT_FLOW:"INIT_FLOW"};class Te{constructor(r){this.ctx=r.ctx,this.type=r.type,this.data=r.data}}class ve{static eName(r){return"LR_"+r}static emit(r,e=window,t=!0){let n=()=>{e.dispatchEvent(new CustomEvent(this.eName(r.type),{detail:r}))};if(!t){n();return}let a=r.type+r.ctx;this._timeoutStore[a]&&window.clearTimeout(this._timeoutStore[a]),this._timeoutStore[a]=window.setTimeout(()=>{n(),delete this._timeoutStore[a]},20)}}f(ve,"_timeoutStore",Object.create(null));const Je=Object.freeze({LOCAL:"local",DROP_AREA:"drop-area",URL_TAB:"url-tab",CAMERA:"camera",EXTERNAL:"external",API:"js-api"}),Oe=1e3,ft=Object.freeze({AUTO:"auto",BYTE:"byte",KB:"kb",MB:"mb",GB:"gb",TB:"tb",PB:"pb"}),ei=i=>Math.ceil(i*100)/100,Rl=(i,r=ft.AUTO)=>{const e=r===ft.AUTO;if(r===ft.BYTE||e&&i<Oe**1){const t=$a("en-US",i),n={one:"byte",other:"bytes"}[t];return`${i} ${n}`}return r===ft.KB||e&&i<Oe**2?`${ei(i/Oe**1)} KB`:r===ft.MB||e&&i<Oe**3?`${ei(i/Oe**2)} MB`:r===ft.GB||e&&i<Oe**4?`${ei(i/Oe**3)} GB`:r===ft.TB||e&&i<Oe**5?`${ei(i/Oe**4)} TB`:`${ei(i/Oe**5)} PB`};class W extends F{constructor(){super(...arguments);f(this,"couldBeUploadCollectionOwner",!1);f(this,"isUploadCollectionOwner",!1);f(this,"init$",ka(this));f(this,"__initialUploadMetadata",null);f(this,"_validators",[this._validateMultipleLimit.bind(this),this._validateIsImage.bind(this),this._validateFileType.bind(this),this._validateMaxSizeLimit.bind(this)]);f(this,"_debouncedRunValidators",xt(this._runValidators.bind(this),100));f(this,"_handleCollectionUpdate",e=>{const t=this.uploadCollection,n=[...new Set(Object.values(e).map(a=>[...a]).flat())].map(a=>t.read(a)).filter(Boolean);for(const a of n)this._runValidatorsForEntry(a);if(e.uploadProgress){let a=0,o=t.findItems(l=>!l.getValue("uploadError"));o.forEach(l=>{a+=t.readProp(l,"uploadProgress")});let s=Math.round(a/o.length);this.$["*commonProgress"]=s,ve.emit(new Te({type:se.UPLOAD_PROGRESS,ctx:this.ctxName,data:s}),void 0,s===100)}if(e.fileInfo){let a=t.findItems(s=>!!s.getValue("fileInfo")),o=t.findItems(s=>!!s.getValue("uploadError")||!!s.getValue("validationErrorMsg"));if(t.size-o.length===a.length){let s=this.getOutputData(l=>!!l.getValue("fileInfo")&&!l.getValue("silentUpload"));s.length>0&&ve.emit(new Te({type:se.UPLOAD_FINISH,ctx:this.ctxName,data:s}))}}e.uploadError&&t.findItems(o=>!!o.getValue("uploadError")).forEach(o=>{ve.emit(new Te({type:se.UPLOAD_ERROR,ctx:this.ctxName,data:t.readProp(o,"uploadError")}),void 0,!1)}),e.validationErrorMsg&&t.findItems(o=>!!o.getValue("validationErrorMsg")).forEach(o=>{ve.emit(new Te({type:se.VALIDATION_ERROR,ctx:this.ctxName,data:t.readProp(o,"validationErrorMsg")}),void 0,!1)}),e.cdnUrlModifiers&&t.findItems(o=>!!o.getValue("cdnUrlModifiers")).forEach(o=>{ve.emit(new Te({type:se.CDN_MODIFICATION,ctx:this.ctxName,data:X.getCtx(o).store}),void 0,!1)})})}setUploadMetadata(e){Sa("setUploadMetadata is deprecated. Use `metadata` instance property on `lr-config` block instead. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/"),this.connectedOnce?this.$["*uploadMetadata"]=e:this.__initialUploadMetadata=e}initCallback(){if(super.initCallback(),!this.has("*uploadCollection")){let t=new Ol({typedSchema:Sl,watchList:["uploadProgress","fileInfo","uploadError","validationErrorMsg","validationMultipleLimitMsg","cdnUrlModifiers"]});this.add("*uploadCollection",t)}const e=()=>this.hasBlockInCtx(t=>t instanceof W?t.isUploadCollectionOwner&&t.isConnected&&t!==this:!1);this.couldBeUploadCollectionOwner&&!e()&&(this.isUploadCollectionOwner=!0,this.__uploadCollectionHandler=(t,n,a)=>{var o;this._runValidators();for(let s of a)(o=s==null?void 0:s.getValue("abortController"))==null||o.abort(),s==null||s.setValue("abortController",null),URL.revokeObjectURL(s==null?void 0:s.getValue("thumbUrl"));this.$["*uploadList"]=t.map(s=>({uid:s}))},this.uploadCollection.setHandler(this.__uploadCollectionHandler),this.uploadCollection.observe(this._handleCollectionUpdate),this.subConfigValue("maxLocalFileSizeBytes",()=>this._debouncedRunValidators()),this.subConfigValue("multipleMin",()=>this._debouncedRunValidators()),this.subConfigValue("multipleMax",()=>this._debouncedRunValidators()),this.subConfigValue("multiple",()=>this._debouncedRunValidators()),this.subConfigValue("imgOnly",()=>this._debouncedRunValidators()),this.subConfigValue("accept",()=>this._debouncedRunValidators())),this.__initialUploadMetadata&&(this.$["*uploadMetadata"]=this.__initialUploadMetadata),this.subConfigValue("maxConcurrentRequests",t=>{this.$["*uploadQueue"].concurrency=Number(t)||1})}destroyCallback(){super.destroyCallback(),this.isUploadCollectionOwner&&(this.uploadCollection.unobserve(this._handleCollectionUpdate),this.uploadCollection.getHandler()===this.__uploadCollectionHandler&&this.uploadCollection.removeHandler())}addFileFromUrl(e,{silent:t,fileName:n,source:a}={}){this.uploadCollection.add({externalUrl:e,fileName:n??null,silentUpload:t??!1,source:a??Je.API})}addFileFromUuid(e,{silent:t,fileName:n,source:a}={}){this.uploadCollection.add({uuid:e,fileName:n??null,silentUpload:t??!1,source:a??Je.API})}addFileFromObject(e,{silent:t,fileName:n,source:a}={}){this.uploadCollection.add({file:e,isImage:$r(e),mimeType:e.type,fileName:n??e.name,fileSize:e.size,silentUpload:t??!1,source:a??Je.API})}addFiles(e){console.warn("`addFiles` method is deprecated. Please use `addFileFromObject`, `addFileFromUrl` or `addFileFromUuid` instead."),e.forEach(t=>{this.uploadCollection.add({file:t,isImage:$r(t),mimeType:t.type,fileName:t.name,fileSize:t.size})})}uploadAll(){this.$["*uploadTrigger"]={}}openSystemDialog(e={}){let t=Mn([this.cfg.accept??"",...this.cfg.imgOnly?Ui:[]]).join(",");this.cfg.accept&&this.cfg.imgOnly&&console.warn("There could be a mistake.\nBoth `accept` and `imgOnly` parameters are set.\nThe value of `accept` will be concatenated with the internal image mime types list."),this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.multiple=this.cfg.multiple,e.captureCamera?(this.fileInput.capture="",this.fileInput.accept=Ui.join(",")):this.fileInput.accept=t,this.fileInput.dispatchEvent(new MouseEvent("click")),this.fileInput.onchange=()=>{[...this.fileInput.files].forEach(n=>this.addFileFromObject(n,{source:Je.LOCAL})),this.$["*currentActivity"]=F.activities.UPLOAD_LIST,this.setForCtxTarget(we.StateConsumerScope,"*modalActive",!0),this.fileInput.value="",this.fileInput=null}}get sourceList(){let e=[];return this.cfg.sourceList&&(e=qe(this.cfg.sourceList)),e}initFlow(e=!1){var t,n;if((t=this.$["*uploadList"])!=null&&t.length&&!e)this.set$({"*currentActivity":F.activities.UPLOAD_LIST}),this.setForCtxTarget(we.StateConsumerScope,"*modalActive",!0);else if(((n=this.sourceList)==null?void 0:n.length)===1){let a=this.sourceList[0];a==="local"?(this.$["*currentActivity"]=F.activities.UPLOAD_LIST,this==null||this.openSystemDialog()):(Object.values(W.extSrcList).includes(a)?this.set$({"*currentActivityParams":{externalSourceType:a},"*currentActivity":F.activities.EXTERNAL}):this.$["*currentActivity"]=a,this.setForCtxTarget(we.StateConsumerScope,"*modalActive",!0))}else this.set$({"*currentActivity":F.activities.START_FROM}),this.setForCtxTarget(we.StateConsumerScope,"*modalActive",!0);ve.emit(new Te({type:se.INIT_FLOW,ctx:this.ctxName}),void 0,!1)}doneFlow(){this.set$({"*currentActivity":this.doneActivity,"*history":this.doneActivity?[this.doneActivity]:[]}),this.$["*currentActivity"]||this.setForCtxTarget(we.StateConsumerScope,"*modalActive",!1),ve.emit(new Te({type:se.DONE_FLOW,ctx:this.ctxName}),void 0,!1)}get uploadCollection(){return this.$["*uploadCollection"]}_validateFileType(e){const t=this.cfg.imgOnly,n=this.cfg.accept,a=Mn([...t?Ui:[],n]);if(!a.length)return;const o=e.getValue("mimeType"),s=e.getValue("fileName");if(!o||!s)return;const l=La(o,a),c=kl(s,a);if(!l&&!c)return this.l10n("file-type-not-allowed")}_validateMaxSizeLimit(e){const t=this.cfg.maxLocalFileSizeBytes,n=e.getValue("fileSize");if(t&&n&&n>t)return this.l10n("files-max-size-limit-error",{maxFileSize:Rl(t)})}_validateMultipleLimit(e){const n=this.uploadCollection.items().indexOf(e.uid),a=this.cfg.multiple?this.cfg.multipleMax:1;if(a&&n>=a)return this.l10n("files-count-allowed",{count:a})}_validateIsImage(e){const t=this.cfg.imgOnly,n=e.getValue("isImage");if(!(!t||n)&&!(!e.getValue("fileInfo")&&e.getValue("externalUrl"))&&!(!e.getValue("fileInfo")&&!e.getValue("mimeType")))return this.l10n("images-only-accepted")}_runValidatorsForEntry(e){for(const t of this._validators){const n=t(e);if(n){e.setValue("validationErrorMsg",n);return}}e.setValue("validationErrorMsg",null)}_runValidators(){for(const e of this.uploadCollection.items())setTimeout(()=>{const t=this.uploadCollection.read(e);t&&this._runValidatorsForEntry(t)})}async getMetadata(){const e=this.cfg.metadata??this.$["*uploadMetadata"];return typeof e=="function"?await e():e}async getUploadClientOptions(){let e={store:this.cfg.store,publicKey:this.cfg.pubkey,baseCDN:this.cfg.cdnCname,baseURL:this.cfg.baseUrl,userAgent:$l,integration:this.cfg.userAgentIntegration,secureSignature:this.cfg.secureSignature,secureExpire:this.cfg.secureExpire,retryThrottledRequestMaxTimes:this.cfg.retryThrottledRequestMaxTimes,multipartMinFileSize:this.cfg.multipartMinFileSize,multipartChunkSize:this.cfg.multipartChunkSize,maxConcurrentRequests:this.cfg.multipartMaxConcurrentRequests,multipartMaxAttempts:this.cfg.multipartMaxAttempts,checkForUrlDuplicates:!!this.cfg.checkForUrlDuplicates,saveUrlForRecurrentUploads:!!this.cfg.saveUrlForRecurrentUploads,metadata:await this.getMetadata()};return console.log("Upload client options:",e),e}getOutputData(e){let t=[];return this.uploadCollection.findItems(e).forEach(a=>{let o=X.getCtx(a).store,s=o.fileInfo||{name:o.fileName,fileSize:o.fileSize,isImage:o.isImage,mimeType:o.mimeType},l={...s,cdnUrlModifiers:o.cdnUrlModifiers,cdnUrl:o.cdnUrl||s.cdnUrl};t.push(l)}),t}}W.extSrcList=Object.freeze({FACEBOOK:"facebook",DROPBOX:"dropbox",GDRIVE:"gdrive",GPHOTOS:"gphotos",INSTAGRAM:"instagram",FLICKR:"flickr",VK:"vk",EVERNOTE:"evernote",BOX:"box",ONEDRIVE:"onedrive",HUDDLE:"huddle"});W.sourceTypes=Object.freeze({LOCAL:"local",URL:"url",CAMERA:"camera",DRAW:"draw",...W.extSrcList});Object.values(se).forEach(i=>{let r=ve.eName(i);window.addEventListener(r,e=>{if([se.UPLOAD_FINISH,se.REMOVE,se.CDN_MODIFICATION].includes(e.detail.type)){let n=X.getCtx(e.detail.ctx),a=n.read("uploadCollection"),o=[];a.items().forEach(s=>{let l=X.getCtx(s).store,c=l.fileInfo;if(c){let d={...c,cdnUrlModifiers:l.cdnUrlModifiers,cdnUrl:l.cdnUrl||c.cdnUrl};o.push(d)}}),ve.emit(new Te({type:se.DATA_OUTPUT,ctx:e.detail.ctx,data:o})),n.pub("outputData",o)}})});const Ml="https://ucarecdn.com",Ul="https://upload.uploadcare.com",Pl="https://social.uploadcare.com",Pi=Object.freeze({pubkey:"",multiple:!0,multipleMin:0,multipleMax:0,confirmUpload:!1,imgOnly:!1,accept:"",externalSourcesPreferredTypes:"",store:"auto",cameraMirror:!1,sourceList:"local, url, camera, dropbox, gdrive",maxLocalFileSizeBytes:0,thumbSize:76,showEmptyList:!1,useLocalImageEditor:!1,useCloudImageEditor:!0,removeCopyright:!1,modalScrollLock:!0,modalBackdropStrokes:!1,sourceListWrap:!0,remoteTabSessionKey:"",cdnCname:Ml,baseUrl:Ul,socialBaseUrl:Pl,secureSignature:"",secureExpire:"",secureDeliveryProxy:"",retryThrottledRequestMaxTimes:1,multipartMinFileSize:26214400,multipartChunkSize:5242880,maxConcurrentRequests:10,multipartMaxConcurrentRequests:4,multipartMaxAttempts:3,checkForUrlDuplicates:!1,saveUrlForRecurrentUploads:!1,groupOutput:!1,userAgentIntegration:"",metadata:null}),be=i=>String(i),Re=i=>Number(i),oe=i=>typeof i=="boolean"?i:i==="true"||i===""?!0:i==="false"?!1:!!i,Nl=i=>i==="auto"?i:oe(i),Dl={pubkey:be,multiple:oe,multipleMin:Re,multipleMax:Re,confirmUpload:oe,imgOnly:oe,accept:be,externalSourcesPreferredTypes:be,store:Nl,cameraMirror:oe,sourceList:be,maxLocalFileSizeBytes:Re,thumbSize:Re,showEmptyList:oe,useLocalImageEditor:oe,useCloudImageEditor:oe,removeCopyright:oe,modalScrollLock:oe,modalBackdropStrokes:oe,sourceListWrap:oe,remoteTabSessionKey:be,cdnCname:be,baseUrl:be,socialBaseUrl:be,secureSignature:be,secureExpire:be,secureDeliveryProxy:be,retryThrottledRequestMaxTimes:Re,multipartMinFileSize:Re,multipartChunkSize:Re,maxConcurrentRequests:Re,multipartMaxConcurrentRequests:Re,multipartMaxAttempts:Re,checkForUrlDuplicates:oe,saveUrlForRecurrentUploads:oe,groupOutput:oe,userAgentIntegration:be},zl=(i,r)=>{if(!(typeof r>"u"||r===null))return Dl[i](r)},Hi=Object.keys(Pi),Vl=["metadata"],Fl=i=>Vl.includes(i),Lr=Hi.filter(i=>!Fl(i)),Bl={...Object.fromEntries(Lr.map(i=>[_t(i),i])),...Object.fromEntries(Lr.map(i=>[i.toLowerCase(),i]))},Hl={...Object.fromEntries(Hi.map(i=>[_t(i),he(i)])),...Object.fromEntries(Hi.map(i=>[i.toLowerCase(),he(i)]))};class Ra extends Q{constructor(){super(...arguments);f(this,"ctxOwner",!0);f(this,"init$",{...this.init$,...Object.fromEntries(Object.entries(Pi).map(([e,t])=>[he(e),t]))})}initCallback(){super.initCallback();for(const e of Hi){const t=this;let n="__"+e;t[n]=t[e],Object.defineProperty(this,e,{set:a=>{if(t[n]=a,Lr.includes(e)){const o=[...new Set([_t(e),e.toLowerCase()])];for(const s of o)typeof a>"u"||a===null?this.removeAttribute(s):this.setAttribute(s,a.toString())}this.$[he(e)]!==a&&(typeof a>"u"||a===null?this.$[he(e)]=Pi[e]:this.$[he(e)]=a)},get:()=>this.$[he(e)]}),typeof t[e]<"u"&&t[e]!==null&&(t[e]=t[n])}}attributeChangedCallback(e,t,n){if(t===n)return;const a=Bl[e],s=zl(a,n)??Pi[a],l=this;l[a]=s}}Ra.bindAttributes(Hl);class Yr extends Q{constructor(){super(...arguments);f(this,"init$",{...this.init$,name:"",path:"",size:"24",viewBox:""})}initCallback(){super.initCallback(),this.sub("name",e=>{if(!e)return;let t=this.getCssData(`--icon-${e}`);t&&(this.$.path=t)}),this.sub("path",e=>{if(!e)return;e.trimStart().startsWith("<")?(this.setAttribute("raw",""),this.ref.svg.innerHTML=e):(this.removeAttribute("raw"),this.ref.svg.innerHTML=`<path fill-rule="evenodd" d="${e}"></path>`)}),this.sub("size",e=>{this.$.viewBox=`0 0 ${e} ${e}`})}}Yr.template=`
  <svg ref="svg" xmlns="http://www.w3.org/2000/svg" set="@viewBox: viewBox; @height: size; @width: size"></svg>
`;Yr.bindAttributes({name:"name",size:"size"});const Ma=i=>{if(typeof i!="string"||!i)return"";let r=i.trim();return r.startsWith("-/")?r=r.slice(2):r.startsWith("/")&&(r=r.slice(1)),r.endsWith("/")&&(r=r.slice(0,r.length-1)),r},Kr=(...i)=>i.filter(r=>typeof r=="string"&&r).map(r=>Ma(r)).join("/-/"),Pe=(...i)=>{let r=Kr(...i);return r?`-/${r}/`:""};function Ua(i){let r=new URL(i),e=r.pathname+r.search+r.hash,t=e.lastIndexOf("http"),n=e.lastIndexOf("/"),a="";return t>=0?a=e.slice(t):n>=0&&(a=e.slice(n+1)),a}function jl(i){let r=new URL(i),{pathname:e}=r;const t=e.indexOf("/"),n=e.indexOf("/",t+1);return e.substring(t+1,n)}function Wl(i){let r=Pa(i),e=new URL(r),t=e.pathname.indexOf("/-/");return t===-1?[]:e.pathname.substring(t).split("/-/").filter(Boolean).map(a=>Ma(a))}function Pa(i){let r=new URL(i),e=Ua(i),t=Na(e)?Da(e).pathname:e;return r.pathname=r.pathname.replace(t,""),r.search="",r.hash="",r.toString()}function Na(i){return i.startsWith("http")}function Da(i){let r=new URL(i);return{pathname:r.origin+r.pathname||"",search:r.search||"",hash:r.hash||""}}const xe=(i,r,e)=>{let t=new URL(Pa(i));if(e=e||Ua(i),t.pathname.startsWith("//")&&(t.pathname=t.pathname.replace("//","/")),Na(e)){let n=Da(e);t.pathname=t.pathname+(r||"")+(n.pathname||""),t.search=n.search,t.hash=n.hash}else t.pathname=t.pathname+(r||"")+(e||"");return t.toString()},li=(i,r)=>{let e=new URL(i);return e.pathname=r+"/",e.toString()},Gl="https://ucarecdn.com",Rt=Object.freeze({"dev-mode":{},pubkey:{},uuid:{},src:{},lazy:{default:1},intersection:{},breakpoints:{},"cdn-cname":{default:Gl},"proxy-cname":{},"secure-delivery-proxy":{},"hi-res-support":{default:1},"ultra-res-support":{},format:{default:"auto"},"cdn-operations":{},progressive:{},quality:{default:"smart"},"is-background-for":{}}),Xl=i=>[...new Set(i)],ni="--lr-img-",Pn="unresolved",St=2,$t=3,Nn=!window.location.host.trim()||window.location.host.includes(":")||window.location.hostname.includes("localhost"),za=Object.create(null);var sa;for(let i in Rt)za[ni+i]=((sa=Rt[i])==null?void 0:sa.default)||"";class ql extends Ki{constructor(){super(...arguments);f(this,"cssInit$",za)}$$(e){return this.$[ni+e]}set$$(e){for(let t in e)this.$[ni+t]=e[t]}sub$$(e,t){this.sub(ni+e,n=>{n===null||n===""||t(n)})}_fmtAbs(e){return!e.includes("//")&&!Nn&&(e=new URL(e,document.baseURI).href),e}_getCdnModifiers(e=""){return Pe(e&&`resize/${e}`,this.$$("cdn-operations")||"",`format/${this.$$("format")||Rt.format.default}`,`quality/${this.$$("quality")||Rt.quality.default}`)}_getUrlBase(e=""){if(this.$$("src").startsWith("data:")||this.$$("src").startsWith("blob:"))return this.$$("src");if(Nn&&this.$$("src")&&!this.$$("src").includes("//"))return this._proxyUrl(this.$$("src"));let t=this._getCdnModifiers(e);if(this.$$("src").startsWith(this.$$("cdn-cname")))return xe(this.$$("src"),t);if(this.$$("cdn-cname")&&this.$$("uuid"))return this._proxyUrl(xe(li(this.$$("cdn-cname"),this.$$("uuid")),t));if(this.$$("uuid"))return this._proxyUrl(xe(li(this.$$("cdn-cname"),this.$$("uuid")),t));if(this.$$("proxy-cname"))return this._proxyUrl(xe(this.$$("proxy-cname"),t,this._fmtAbs(this.$$("src"))));if(this.$$("pubkey"))return this._proxyUrl(xe(`https://${this.$$("pubkey")}.ucr.io/`,t,this._fmtAbs(this.$$("src"))))}_proxyUrl(e){return this.$$("secure-delivery-proxy")?kr(this.$$("secure-delivery-proxy"),{previewUrl:e},{transform:n=>window.encodeURIComponent(n)}):e}_getElSize(e,t=1,n=!0){let a=e.getBoundingClientRect(),o=t*Math.round(a.width),s=n?"":t*Math.round(a.height);return o||s?`${o||""}x${s||""}`:null}_setupEventProxy(e){let t=a=>{a.stopPropagation();let o=new Event(a.type,a);this.dispatchEvent(o)},n=["load","error"];for(let a of n)e.addEventListener(a,t)}get img(){return this._img||(this._img=new Image,this._setupEventProxy(this.img),this._img.setAttribute(Pn,""),this.img.onload=()=>{this.img.removeAttribute(Pn)},this.initAttributes(),this.appendChild(this._img)),this._img}get bgSelector(){return this.$$("is-background-for")}initAttributes(){[...this.attributes].forEach(e=>{Rt[e.name]||this.img.setAttribute(e.name,e.value)})}get breakpoints(){return this.$$("breakpoints")?Xl(qe(this.$$("breakpoints")).map(e=>Number(e))):null}renderBg(e){let t=new Set;this.breakpoints?this.breakpoints.forEach(a=>{t.add(`url("${this._getUrlBase(a+"x")}") ${a}w`),this.$$("hi-res-support")&&t.add(`url("${this._getUrlBase(a*St+"x")}") ${a*St}w`),this.$$("ultra-res-support")&&t.add(`url("${this._getUrlBase(a*$t+"x")}") ${a*$t}w`)}):(t.add(`url("${this._getUrlBase(this._getElSize(e))}") 1x`),this.$$("hi-res-support")&&t.add(`url("${this._getUrlBase(this._getElSize(e,St))}") ${St}x`),this.$$("ultra-res-support")&&t.add(`url("${this._getUrlBase(this._getElSize(e,$t))}") ${$t}x`));let n=`image-set(${[...t].join(", ")})`;e.style.setProperty("background-image",n),e.style.setProperty("background-image","-webkit-"+n)}getSrcset(){let e=new Set;return this.breakpoints?this.breakpoints.forEach(t=>{e.add(this._getUrlBase(t+"x")+` ${t}w`),this.$$("hi-res-support")&&e.add(this._getUrlBase(t*St+"x")+` ${t*St}w`),this.$$("ultra-res-support")&&e.add(this._getUrlBase(t*$t+"x")+` ${t*$t}w`)}):(e.add(this._getUrlBase(this._getElSize(this.img))+" 1x"),this.$$("hi-res-support")&&e.add(this._getUrlBase(this._getElSize(this.img,2))+" 2x"),this.$$("ultra-res-support")&&e.add(this._getUrlBase(this._getElSize(this.img,3))+" 3x")),[...e].join()}getSrc(){return this._getUrlBase()}init(){this.bgSelector?[...document.querySelectorAll(this.bgSelector)].forEach(e=>{this.$$("intersection")?this.initIntersection(e,()=>{this.renderBg(e)}):this.renderBg(e)}):this.$$("intersection")?this.initIntersection(this.img,()=>{this.img.srcset=this.getSrcset(),this.img.src=this.getSrc()}):(this.img.srcset=this.getSrcset(),this.img.src=this.getSrc())}initIntersection(e,t){let n={root:null,rootMargin:"0px"};this._isnObserver=new IntersectionObserver(a=>{a.forEach(o=>{o.isIntersecting&&(t(),this._isnObserver.unobserve(e))})},n),this._isnObserver.observe(e),this._observed||(this._observed=new Set),this._observed.add(e)}destroyCallback(){super.destroyCallback(),this._isnObserver&&(this._observed.forEach(e=>{this._isnObserver.unobserve(e)}),this._isnObserver=null)}static get observedAttributes(){return Object.keys(Rt)}attributeChangedCallback(e,t,n){window.setTimeout(()=>{this.$[ni+e]=n})}}class Yl extends ql{initCallback(){super.initCallback(),this.sub$$("src",()=>{this.init()}),this.sub$$("uuid",()=>{this.init()}),this.sub$$("lazy",r=>{this.$$("is-background-for")||(this.img.loading=r?"lazy":"eager")})}}class Va extends W{constructor(){super(...arguments);f(this,"init$",{...this.init$,"*simpleButtonText":"",onClick:()=>{this.initFlow()}})}initCallback(){super.initCallback(),this.subConfigValue("multiple",e=>{this.$["*simpleButtonText"]=e?this.l10n("upload-files"):this.l10n("upload-file")})}}Va.template=`
  <lr-drop-area>
    <button type="button" set="onclick: onClick">
      <lr-icon name="upload"></lr-icon>
      <span>{{*simpleButtonText}}</span>
      <slot></slot>
      <div class="visual-drop-area"></div>
    </button>
  </lr-drop-area>
`;class Kl extends F{constructor(){super(...arguments);f(this,"historyTracked",!0);f(this,"activityType","start-from")}initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}function Zl(i){return new Promise(r=>{typeof window.FileReader!="function"&&r(!1);try{let e=new FileReader;e.onerror=()=>{r(!0)};let t=n=>{n.type!=="loadend"&&e.abort(),r(!1)};e.onloadend=t,e.onprogress=t,e.readAsDataURL(i)}catch{r(!1)}})}function Ql(i,r){return new Promise(e=>{let t=0,n=[],a=s=>{s||(console.warn("Unexpectedly received empty content entry",{scope:"drag-and-drop"}),e(null)),s.isFile?(t++,s.file(l=>{t--;const c=new File([l],l.name,{type:l.type||r});n.push(c),t===0&&e(n)})):s.isDirectory&&o(s.createReader())},o=s=>{t++,s.readEntries(l=>{t--;for(let c of l)a(c);t===0&&e(n)})};a(i)})}function Jl(i){let r=[],e=[];for(let t=0;t<i.items.length;t++){let n=i.items[t];if(n)if(n.kind==="file"){const a=n.type;if(typeof n.webkitGetAsEntry=="function"||typeof n.getAsEntry=="function"){let s=typeof n.webkitGetAsEntry=="function"?n.webkitGetAsEntry():n.getAsEntry();e.push(Ql(s,a).then(l=>{r.push(...l)}));continue}let o=n.getAsFile();e.push(Zl(o).then(s=>{s||r.push(o)}))}else n.kind==="string"&&n.type.match("^text/uri-list")&&e.push(new Promise(a=>{n.getAsString(o=>{r.push(o),a()})}))}return Promise.all(e).then(()=>r)}const de={ACTIVE:0,INACTIVE:1,NEAR:2,OVER:3};let Dn=["focus"],ec=100,yr=new Map;function tc(i,r){let e=Math.max(Math.min(i[0],r.x+r.width),r.x),t=Math.max(Math.min(i[1],r.y+r.height),r.y);return Math.sqrt((i[0]-e)*(i[0]-e)+(i[1]-t)*(i[1]-t))}function zn(i){let r=0,e=document.body,t=new Set,n=p=>t.add(p),a=de.INACTIVE,o=p=>{i.shouldIgnore()&&p!==de.INACTIVE||(a!==p&&t.forEach(g=>g(p)),a=p)},s=()=>r>0;n(p=>i.onChange(p));let l=()=>{r=0,o(de.INACTIVE)},c=()=>{r+=1,a===de.INACTIVE&&o(de.ACTIVE)},d=()=>{r-=1,s()||o(de.INACTIVE)},u=p=>{p.preventDefault(),r=0,o(de.INACTIVE)},h=p=>{s()||(r+=1),p.preventDefault();let g=[p.x,p.y],_=i.element.getBoundingClientRect(),y=Math.floor(tc(g,_)),b=y<ec,v=p.composedPath().includes(i.element);yr.set(i.element,y);let I=Math.min(...yr.values())===y;o(v&&I?de.OVER:b&&I?de.NEAR:de.ACTIVE)},m=async p=>{if(i.shouldIgnore())return;p.preventDefault();let g=await Jl(p.dataTransfer);i.onItems(g),o(de.INACTIVE)};return e.addEventListener("drop",u),e.addEventListener("dragleave",d),e.addEventListener("dragenter",c),e.addEventListener("dragover",h),i.element.addEventListener("drop",m),Dn.forEach(p=>{window.addEventListener(p,l)}),()=>{yr.delete(i.element),e.removeEventListener("drop",u),e.removeEventListener("dragleave",d),e.removeEventListener("dragenter",c),e.removeEventListener("dragover",h),i.element.removeEventListener("drop",m),Dn.forEach(p=>{window.removeEventListener(p,l)})}}class Zr extends W{constructor(){super(...arguments);f(this,"init$",{...this.init$,state:de.INACTIVE,withIcon:!1,isClickable:!1,isFullscreen:!1,isEnabled:!0,isVisible:!0,text:this.l10n("drop-files-here"),"lr-drop-area/targets":null})}isActive(){if(!this.$.isEnabled)return!1;const e=this.getBoundingClientRect(),t=e.width>0&&e.height>0,n=e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth),a=window.getComputedStyle(this),o=a.visibility!=="hidden"&&a.display!=="none";return t&&o&&n}initCallback(){super.initCallback(),this.$["lr-drop-area/targets"]||(this.$["lr-drop-area/targets"]=new Set),this.$["lr-drop-area/targets"].add(this),this.defineAccessor("disabled",t=>{this.set$({isEnabled:!t})}),this.defineAccessor("clickable",t=>{this.set$({isClickable:typeof t=="string"})}),this.defineAccessor("with-icon",t=>{this.set$({withIcon:typeof t=="string"})}),this.defineAccessor("fullscreen",t=>{this.set$({isFullscreen:typeof t=="string"})}),this.defineAccessor("text",t=>{t?this.set$({text:this.l10n(t)||t}):this.set$({text:this.l10n("drop-files-here")})}),this._destroyDropzone=zn({element:this,shouldIgnore:()=>this._shouldIgnore(),onChange:t=>{this.$.state=t},onItems:t=>{t.length&&(t.forEach(n=>{if(typeof n=="string"){this.addFileFromUrl(n,{source:Je.DROP_AREA});return}this.addFileFromObject(n,{source:Je.DROP_AREA})}),this.uploadCollection.size&&(this.set$({"*currentActivity":F.activities.UPLOAD_LIST}),this.setForCtxTarget(we.StateConsumerScope,"*modalActive",!0)))}});let e=this.ref["content-wrapper"];e&&(this._destroyContentWrapperDropzone=zn({element:e,onChange:t=>{var a;const n=(a=Object.entries(de).find(([,o])=>o===t))==null?void 0:a[0].toLowerCase();n&&e.setAttribute("drag-state",n)},onItems:()=>{},shouldIgnore:()=>this._shouldIgnore()})),this.sub("state",t=>{var a;const n=(a=Object.entries(de).find(([,o])=>o===t))==null?void 0:a[0].toLowerCase();n&&this.setAttribute("drag-state",n)}),this.subConfigValue("sourceList",t=>{const n=qe(t);this.$.isEnabled=n.includes(W.sourceTypes.LOCAL),this.$.isVisible=this.$.isEnabled||!this.querySelector("[data-default-slot]")}),this.sub("isVisible",t=>{this.toggleAttribute("hidden",!t)}),this.$.isClickable&&(this._onAreaClicked=()=>{this.openSystemDialog()},this.addEventListener("click",this._onAreaClicked))}_shouldIgnore(){return!this.$.isEnabled||!this._couldHandleFiles()?!0:this.$.isFullscreen?[...this.$["lr-drop-area/targets"]].filter(n=>n!==this).filter(n=>n.isActive()).length>0:!1}_couldHandleFiles(){let e=this.cfg.multiple,t=this.cfg.multipleMax,n=this.uploadCollection.size;return!(e&&t&&n>=t||!e&&n>0)}destroyCallback(){var e,t,n,a;super.destroyCallback(),(t=(e=this.$["lr-drop-area/targets"])==null?void 0:e.remove)==null||t.call(e,this),(n=this._destroyDropzone)==null||n.call(this),(a=this._destroyContentWrapperDropzone)==null||a.call(this),this._onAreaClicked&&this.removeEventListener("click",this._onAreaClicked)}}Zr.template=`
  <slot>
    <div data-default-slot hidden></div>
    <div ref="content-wrapper" class="content-wrapper" set="@hidden: !isVisible">
      <div class="icon-container" set="@hidden: !withIcon">
        <lr-icon name="default"></lr-icon>
        <lr-icon name="arrow-down"></lr-icon>
      </div>
      <span class="text">{{text}}</span>
    </div>
  </slot>
`;Zr.bindAttributes({"with-icon":null,clickable:null,text:null,fullscreen:null,disabled:null});const ic="src-type-";class rr extends W{constructor(){super(...arguments);f(this,"_registeredTypes",{});f(this,"init$",{...this.init$,iconName:"default"})}initTypes(){this.registerType({type:W.sourceTypes.LOCAL,onClick:()=>{this.openSystemDialog()}}),this.registerType({type:W.sourceTypes.URL,activity:F.activities.URL,textKey:"from-url"}),this.registerType({type:W.sourceTypes.CAMERA,activity:F.activities.CAMERA,onClick:()=>{var t=document.createElement("input").capture!==void 0;return t&&this.openSystemDialog({captureCamera:!0}),!t}}),this.registerType({type:"draw",activity:F.activities.DRAW,icon:"edit-draw"});for(let e of Object.values(W.extSrcList))this.registerType({type:e,activity:F.activities.EXTERNAL,activityParams:{externalSourceType:e}})}initCallback(){super.initCallback(),this.initTypes(),this.setAttribute("role","button"),this.defineAccessor("type",e=>{e&&this.applyType(e)})}registerType(e){this._registeredTypes[e.type]=e}getType(e){return this._registeredTypes[e]}applyType(e){const t=this._registeredTypes[e];if(!t){console.warn("Unsupported source type: "+e);return}const{textKey:n=e,icon:a=e,activity:o,onClick:s,activityParams:l={}}=t;this.applyL10nKey("src-type",`${ic}${n}`),this.$.iconName=a,this.onclick=c=>{(s?s(c):!!o)&&this.set$({"*currentActivityParams":l,"*currentActivity":o})}}}rr.template=`
  <lr-icon set="@name: iconName"></lr-icon>
  <div class="txt" l10n="src-type"></div>
`;rr.bindAttributes({type:null});class rc extends Q{initCallback(){super.initCallback(),this.subConfigValue("sourceList",r=>{let e=qe(r),t="";e.forEach(n=>{t+=`<lr-source-btn type="${n}"></lr-source-btn>`}),this.cfg.sourceListWrap?this.innerHTML=t:this.outerHTML=t})}}function Fa(i){let r=new Blob([i],{type:"image/svg+xml"});return URL.createObjectURL(r)}function nc(i="#fff",r="rgba(0, 0, 0, .1)"){return Fa(`<svg height="20" width="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
    <rect x="0" y="0" width="20" height="20" fill="${i}" />
    <rect x="0" y="0" width="10" height="10" fill="${r}" />
    <rect x="10" y="10" width="10" height="10" fill="${r}" />
  </svg>`)}function Ir(i="hsl(209, 21%, 65%)",r=32,e=32){return Fa(`
  <svg width="${r}" height="${e}" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" fill="${i}" d="M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z"/>
  </svg>
  `)}function ac(i,r=40){if(i.type==="image/svg+xml")return URL.createObjectURL(i);let e=document.createElement("canvas"),t=e.getContext("2d"),n=new Image,a=new Promise((o,s)=>{n.onload=()=>{let l=n.height/n.width;l>1?(e.width=r,e.height=r*l):(e.height=r,e.width=r/l),t.fillStyle="rgb(240, 240, 240)",t.fillRect(0,0,e.width,e.height),t.drawImage(n,0,0,e.width,e.height),e.toBlob(c=>{if(!c){s();return}let d=URL.createObjectURL(c);o(d)})},n.onerror=l=>{s(l)}});return n.src=URL.createObjectURL(i),a}const ne=Object.freeze({FINISHED:Symbol(0),FAILED:Symbol(1),UPLOADING:Symbol(2),IDLE:Symbol(3),LIMIT_OVERFLOW:Symbol(4)});class yt extends W{constructor(){super(...arguments);f(this,"pauseRender",!0);f(this,"_entrySubs",new Set);f(this,"_entry",null);f(this,"_isIntersecting",!1);f(this,"_debouncedGenerateThumb",xt(this._generateThumbnail.bind(this),100));f(this,"_debouncedCalculateState",xt(this._calculateState.bind(this),100));f(this,"_renderedOnce",!1);f(this,"init$",{...this.init$,uid:"",itemName:"",errorText:"",thumbUrl:"",progressValue:0,progressVisible:!1,progressUnknown:!1,badgeIcon:"",isFinished:!1,isFailed:!1,isUploading:!1,isFocused:!1,isEditable:!1,isLimitOverflow:!1,state:ne.IDLE,"*uploadTrigger":null,onEdit:()=>{this.set$({"*focusedEntry":this._entry}),this.hasBlockInCtx(e=>e.activityType===F.activities.DETAILS)?this.$["*currentActivity"]=F.activities.DETAILS:this.$["*currentActivity"]=F.activities.CLOUD_IMG_EDIT},onRemove:()=>{let e=this._entry.getValue("uuid");if(e){let t=this.getOutputData(n=>n.getValue("uuid")===e);ve.emit(new Te({type:se.REMOVE,ctx:this.ctxName,data:t}))}this.uploadCollection.remove(this.$.uid)},onUpload:()=>{this.upload()}})}_reset(){for(let e of this._entrySubs)e.remove();this._debouncedGenerateThumb.cancel(),this._debouncedCalculateState.cancel(),this._entrySubs=new Set,this._entry=null}_observerCallback(e){let[t]=e;this._isIntersecting=t.isIntersecting,t.isIntersecting&&!this._renderedOnce&&(this.render(),this._renderedOnce=!0),t.intersectionRatio===0?this._debouncedGenerateThumb.cancel():this._debouncedGenerateThumb()}_calculateState(){if(!this._entry)return;let e=this._entry,t=ne.IDLE;e.getValue("uploadError")||e.getValue("validationErrorMsg")?t=ne.FAILED:e.getValue("validationMultipleLimitMsg")?t=ne.LIMIT_OVERFLOW:e.getValue("isUploading")?t=ne.UPLOADING:e.getValue("fileInfo")&&(t=ne.FINISHED),this.$.state=t}async _generateThumbnail(){var t;if(!this._entry)return;let e=this._entry;if(e.getValue("fileInfo")&&e.getValue("isImage")){let n=this.cfg.thumbSize,a=this.proxyUrl(xe(li(this.cfg.cdnCname,this._entry.getValue("uuid")),Pe(e.getValue("cdnUrlModifiers"),`scale_crop/${n}x${n}/center`))),o=e.getValue("thumbUrl");o!==a&&(e.setValue("thumbUrl",a),o!=null&&o.startsWith("blob:")&&URL.revokeObjectURL(o));return}if(!e.getValue("thumbUrl"))if((t=e.getValue("file"))!=null&&t.type.includes("image"))try{let n=await ac(e.getValue("file"),this.cfg.thumbSize);e.setValue("thumbUrl",n)}catch{let a=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon");e.setValue("thumbUrl",Ir(a))}else{let n=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon");e.setValue("thumbUrl",Ir(n))}}_subEntry(e,t){let n=this._entry.subscribe(e,a=>{this.isConnected&&t(a)});this._entrySubs.add(n)}_handleEntryId(e){var n;this._reset();let t=(n=this.uploadCollection)==null?void 0:n.read(e);this._entry=t,t&&(this._subEntry("uploadProgress",a=>{this.$.progressValue=a}),this._subEntry("fileName",a=>{this.$.itemName=a||t.getValue("externalUrl")||this.l10n("file-no-name"),this._debouncedCalculateState()}),this._subEntry("externalUrl",a=>{this.$.itemName=t.getValue("fileName")||a||this.l10n("file-no-name")}),this._subEntry("uuid",a=>{this._debouncedCalculateState(),a&&this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("cdnUrlModifiers",()=>{this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("thumbUrl",a=>{this.$.thumbUrl=a?`url(${a})`:""}),this._subEntry("validationMultipleLimitMsg",()=>this._debouncedCalculateState()),this._subEntry("validationErrorMsg",()=>this._debouncedCalculateState()),this._subEntry("uploadError",()=>this._debouncedCalculateState()),this._subEntry("isUploading",()=>this._debouncedCalculateState()),this._subEntry("fileSize",()=>this._debouncedCalculateState()),this._subEntry("mimeType",()=>this._debouncedCalculateState()),this._subEntry("isImage",()=>this._debouncedCalculateState()),this._isIntersecting&&this._debouncedGenerateThumb())}initCallback(){super.initCallback(),this.sub("uid",e=>{this._handleEntryId(e)}),this.sub("state",e=>{this._handleState(e)}),this.subConfigValue("useCloudImageEditor",()=>this._debouncedCalculateState()),this.onclick=()=>{yt.activeInstances.forEach(e=>{e===this?e.setAttribute("focused",""):e.removeAttribute("focused")})},this.$["*uploadTrigger"]=null,this.sub("*uploadTrigger",e=>{e&&setTimeout(()=>this.isConnected&&this.upload())}),yt.activeInstances.add(this)}_handleState(e){var t,n;this.set$({isFailed:e===ne.FAILED,isLimitOverflow:e===ne.LIMIT_OVERFLOW,isUploading:e===ne.UPLOADING,isFinished:e===ne.FINISHED,progressVisible:e===ne.UPLOADING,isEditable:this.cfg.useCloudImageEditor&&e===ne.FINISHED&&((t=this._entry)==null?void 0:t.getValue("isImage")),errorText:((n=this._entry.getValue("uploadError"))==null?void 0:n.message)||this._entry.getValue("validationErrorMsg")||this._entry.getValue("validationMultipleLimitMsg")}),e===ne.FAILED||e===ne.LIMIT_OVERFLOW?this.$.badgeIcon="badge-error":e===ne.FINISHED&&(this.$.badgeIcon="badge-success"),e===ne.UPLOADING?this.$.isFocused=!1:this.$.progressValue=0}destroyCallback(){super.destroyCallback(),yt.activeInstances.delete(this),this._reset()}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{root:this.parentElement,rootMargin:"50% 0px 50% 0px",threshold:[0,1]}),this._observer.observe(this)}disconnectedCallback(){var e;super.disconnectedCallback(),this._debouncedGenerateThumb.cancel(),(e=this._observer)==null||e.disconnect()}async upload(){var a,o;let e=this._entry;if(!this.uploadCollection.read(e.uid)||e.getValue("fileInfo")||e.getValue("isUploading")||e.getValue("uploadError")||e.getValue("validationErrorMsg")||e.getValue("validationMultipleLimitMsg"))return;const t=this.cfg.multiple?this.cfg.multipleMax:1;if(t&&this.uploadCollection.size>t)return;let n=this.getOutputData(s=>!s.getValue("fileInfo"));ve.emit(new Te({type:se.UPLOAD_START,ctx:this.ctxName,data:n})),this._debouncedCalculateState(),e.setValue("isUploading",!0),e.setValue("uploadError",null),e.setValue("validationErrorMsg",null),e.setValue("validationMultipleLimitMsg",null),!e.getValue("file")&&e.getValue("externalUrl")&&(this.$.progressUnknown=!0);try{let s=new AbortController;e.setValue("abortController",s);const l=async()=>{const d=await this.getUploadClientOptions();return Ea(e.getValue("file")||e.getValue("externalUrl")||e.getValue("uuid"),{...d,fileName:e.getValue("fileName"),source:e.getValue("source"),onProgress:u=>{if(u.isComputable){let h=u.value*100;e.setValue("uploadProgress",h)}this.$.progressUnknown=!u.isComputable},signal:s.signal})};let c=await this.$["*uploadQueue"].add(l);e.setMultipleValues({fileInfo:c,isUploading:!1,fileName:c.originalFilename,fileSize:c.size,isImage:c.isImage,mimeType:((o=(a=c.contentInfo)==null?void 0:a.mime)==null?void 0:o.mime)??c.mimeType,uuid:c.uuid,cdnUrl:c.cdnUrl}),e===this._entry&&this._debouncedCalculateState()}catch(s){console.warn("Upload error",s),e.setMultipleValues({abortController:null,isUploading:!1,uploadProgress:0}),e===this._entry&&this._debouncedCalculateState(),s instanceof fe?s.isCancel||e.setValue("uploadError",s):e.setValue("uploadError",new Error("Unexpected error"))}}}yt.template=`
  <div
    class="inner"
    set="@finished: isFinished; @uploading: isUploading; @failed: isFailed; @limit-overflow: isLimitOverflow; @focused: isFocused"
  >
    <div class="thumb" set="style.backgroundImage: thumbUrl">
      <div class="badge">
        <lr-icon set="@name: badgeIcon"></lr-icon>
      </div>
    </div>
    <div class="file-name-wrapper">
      <span class="file-name" set="@title: itemName">{{itemName}}</span>
      <span class="file-error" set="@hidden: !errorText">{{errorText}}</span>
    </div>
    <div class="file-actions">
      <button type="button" class="edit-btn mini-btn" set="onclick: onEdit; @hidden: !isEditable">
        <lr-icon name="edit-file"></lr-icon>
      </button>
      <button type="button" class="remove-btn mini-btn" set="onclick: onRemove;">
        <lr-icon name="remove-file"></lr-icon>
      </button>
      <button type="button" class="upload-btn mini-btn" set="onclick: onUpload;">
        <lr-icon name="upload"></lr-icon>
      </button>
    </div>
    <lr-progress-bar
      class="progress-bar"
      set="value: progressValue; visible: progressVisible; unknown: progressUnknown"
    >
    </lr-progress-bar>
  </div>
`;yt.activeInstances=new Set;class oc{constructor(){f(this,"caption","");f(this,"text","");f(this,"iconName","");f(this,"isError",!1)}}class Ba extends Q{constructor(){super(...arguments);f(this,"init$",{...this.init$,iconName:"info",captionTxt:"Message caption",msgTxt:"Message...","*message":null,onClose:()=>{this.$["*message"]=null}})}initCallback(){super.initCallback(),this.sub("*message",e=>{e?(this.setAttribute("active",""),this.set$({captionTxt:e.caption||"",msgTxt:e.text||"",iconName:e.isError?"error":"info"}),e.isError?this.setAttribute("error",""):this.removeAttribute("error")):this.removeAttribute("active")})}}Ba.template=`
  <div class="heading">
    <lr-icon set="@name: iconName"></lr-icon>
    <div class="caption">{{captionTxt}}</div>
    <button type="button" set="onclick: onClose">
      <lr-icon name="close"></lr-icon>
    </button>
  </div>
  <div class="msg">{{msgTxt}}</div>
`;class Ha extends W{constructor(){super(...arguments);f(this,"couldBeUploadCollectionOwner",!0);f(this,"historyTracked",!0);f(this,"activityType",F.activities.UPLOAD_LIST);f(this,"init$",{...this.init$,doneBtnVisible:!1,doneBtnEnabled:!1,uploadBtnVisible:!1,addMoreBtnVisible:!1,addMoreBtnEnabled:!1,headerText:"",hasFiles:!1,onAdd:()=>{this.initFlow(!0)},onUpload:()=>{this.uploadAll(),this._updateUploadsState()},onDone:()=>{this.doneFlow()},onCancel:()=>{let e=this.getOutputData(t=>!!t.getValue("fileInfo"));ve.emit(new Te({type:se.REMOVE,ctx:this.ctxName,data:e})),this.uploadCollection.clearAll()}});f(this,"_debouncedHandleCollectionUpdate",xt(()=>{this.isConnected&&(this._updateUploadsState(),this._updateCountLimitMessage())},0))}_validateFilesCount(){let e=!!this.cfg.multiple,t=e?this.cfg.multipleMin??0:1,n=e?this.cfg.multipleMax??0:1,a=this.uploadCollection.size,o=t?a<t:!1,s=n?a>n:!1;return{passed:!o&&!s,tooFew:o,tooMany:s,min:t,max:n,exact:n===a}}_updateCountLimitMessage(){let e=this.uploadCollection.size,t=this._validateFilesCount();if(e&&!t.passed){let n=new oc,a=t.tooFew?"files-count-limit-error-too-few":"files-count-limit-error-too-many";n.caption=this.l10n("files-count-limit-error-title"),n.text=this.l10n(a,{min:t.min,max:t.max,total:e}),n.isError=!0,this.set$({"*message":n})}else this.set$({"*message":null})}_updateUploadsState(){let e=this.uploadCollection.items(),n={total:e.length,succeed:0,uploading:0,failed:0,limitOverflow:0};for(let m of e){let p=this.uploadCollection.read(m);p.getValue("fileInfo")&&!p.getValue("validationErrorMsg")&&(n.succeed+=1),p.getValue("isUploading")&&(n.uploading+=1),(p.getValue("validationErrorMsg")||p.getValue("uploadError"))&&(n.failed+=1),p.getValue("validationMultipleLimitMsg")&&(n.limitOverflow+=1)}const{passed:a,tooMany:o,exact:s}=this._validateFilesCount(),l=n.failed===0&&n.limitOverflow===0;let c=!1,d=!1,u=!1;n.total-n.succeed-n.uploading-n.failed>0&&a?c=!0:(d=!0,u=n.total===n.succeed&&a&&l),this.set$({doneBtnVisible:d,doneBtnEnabled:u,uploadBtnVisible:c,addMoreBtnEnabled:n.total===0||!o&&!s,addMoreBtnVisible:!s||this.cfg.multiple,headerText:this._getHeaderText(n)})}_getHeaderText(e){const t=n=>{const a=e[n];return this.l10n(`header-${n}`,{count:a})};return e.uploading>0?t("uploading"):e.failed>0?t("failed"):e.succeed>0?t("succeed"):t("total")}initCallback(){super.initCallback(),this.registerActivity(this.activityType),this.subConfigValue("multiple",this._debouncedHandleCollectionUpdate),this.subConfigValue("multipleMin",this._debouncedHandleCollectionUpdate),this.subConfigValue("multipleMax",this._debouncedHandleCollectionUpdate),this.sub("*currentActivity",e=>{var t;((t=this.uploadCollection)==null?void 0:t.size)===0&&!this.cfg.showEmptyList&&e===this.activityType&&(this.$["*currentActivity"]=this.initActivity)}),this.uploadCollection.observe(this._debouncedHandleCollectionUpdate),this.sub("*uploadList",e=>{this._debouncedHandleCollectionUpdate(),this.set$({hasFiles:e.length>0}),(e==null?void 0:e.length)===0&&!this.cfg.showEmptyList&&this.historyBack(),this.cfg.confirmUpload||this.add$({"*uploadTrigger":{}},!0)})}destroyCallback(){super.destroyCallback(),this.uploadCollection.unobserve(this._debouncedHandleCollectionUpdate)}}Ha.template=`
  <lr-activity-header>
    <span class="header-text">{{headerText}}</span>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>

  <div class="no-files" set="@hidden: hasFiles">
    <slot name="empty"><span l10n="no-files"></span></slot>
  </div>

  <div class="files" repeat="*uploadList" repeat-item-tag="lr-file-item"></div>

  <div class="toolbar">
    <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel;" l10n="clear"></button>
    <div class="toolbar-spacer"></div>
    <button
      type="button"
      class="add-more-btn secondary-btn"
      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"
    >
      <lr-icon name="add"></lr-icon><span l10n="add-more"></span>
    </button>
    <button
      type="button"
      class="upload-btn primary-btn"
      set="@hidden: !uploadBtnVisible; onclick: onUpload;"
      l10n="upload"
    ></button>
    <button
      type="button"
      class="done-btn primary-btn"
      set="@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled"
      l10n="done"
    ></button>
  </div>

  <lr-drop-area ghost></lr-drop-area>
`;class ja extends W{constructor(){super(...arguments);f(this,"activityType",F.activities.URL);f(this,"init$",{...this.init$,importDisabled:!0,onUpload:e=>{e.preventDefault();let t=this.ref.input.value;this.addFileFromUrl(t,{source:Je.URL_TAB}),this.$["*currentActivity"]=F.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()},onInput:e=>{let t=e.target.value;this.set$({importDisabled:!t})}})}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{this.ref.input.value="",this.ref.input.focus()}})}}ja.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div>
      <lr-icon name="url"></lr-icon>
      <span l10n="caption-from-url"></span>
    </div>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <form class="content">
    <input placeholder="https://" class="url-input" type="text" ref="input" set="oninput: onInput" />
    <button
      type="submit"
      class="url-upload-btn primary-btn"
      set="onclick: onUpload; @disabled: importDisabled"
    ></button>
  </form>
`;const Vn=()=>typeof navigator.permissions<"u";class Wa extends W{constructor(){super(...arguments);f(this,"activityType",F.activities.CAMERA);f(this,"_unsubPermissions",null);f(this,"init$",{...this.init$,video:null,videoTransformCss:null,shotBtnDisabled:!0,videoHidden:!0,messageHidden:!0,requestBtnHidden:Vn(),l10nMessage:null,originalErrorMessage:null,cameraSelectOptions:null,cameraSelectHidden:!0,onCameraSelectChange:e=>{this._selectedCameraId=e.target.value,this._capture()},onCancel:()=>{this.historyBack()},onShot:()=>{this._shot()},onRequestPermissions:()=>{this._capture()}});f(this,"_onActivate",()=>{Vn()&&this._subscribePermissions(),this._capture()});f(this,"_onDeactivate",()=>{this._unsubPermissions&&this._unsubPermissions(),this._stopCapture()});f(this,"_handlePermissionsChange",()=>{this._capture()});f(this,"_setPermissionsState",xt(e=>{this.$.originalErrorMessage=null,this.classList.toggle("initialized",e==="granted"),e==="granted"?this.set$({videoHidden:!1,shotBtnDisabled:!1,messageHidden:!0}):e==="prompt"?(this.$.l10nMessage=this.l10n("camera-permissions-prompt"),this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture()):(this.$.l10nMessage=this.l10n("camera-permissions-denied"),this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture())},300))}async _subscribePermissions(){try{(await navigator.permissions.query({name:"camera"})).addEventListener("change",this._handlePermissionsChange)}catch(e){console.log("Failed to use permissions API. Fallback to manual request mode.",e),this._capture()}}async _capture(){let e={video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!1};this._selectedCameraId&&(e.video.deviceId={exact:this._selectedCameraId}),this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d");try{this._setPermissionsState("prompt");let t=await navigator.mediaDevices.getUserMedia(e);t.addEventListener("inactive",()=>{this._setPermissionsState("denied")}),this.$.video=t,this._capturing=!0,this._setPermissionsState("granted")}catch(t){this._setPermissionsState("denied"),this.$.originalErrorMessage=t.message}}_stopCapture(){var e;this._capturing&&((e=this.$.video)==null||e.getTracks()[0].stop(),this.$.video=null,this._capturing=!1)}_shot(){this._canvas.height=this.ref.video.videoHeight,this._canvas.width=this.ref.video.videoWidth,this._ctx.drawImage(this.ref.video,0,0);let e=Date.now(),t=`camera-${e}.png`;this._canvas.toBlob(n=>{let a=new File([n],t,{lastModified:e,type:"image/png"});this.addFileFromObject(a,{source:Je.CAMERA}),this.set$({"*currentActivity":F.activities.UPLOAD_LIST})})}async initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:this._onActivate,onDeactivate:this._onDeactivate}),this.subConfigValue("cameraMirror",e=>{this.$.videoTransformCss=e?"scaleX(-1)":null});try{let t=(await navigator.mediaDevices.enumerateDevices()).filter(n=>n.kind==="videoinput").map((n,a)=>({text:n.label.trim()||`${this.l10n("caption-camera")} ${a+1}`,value:n.deviceId}));t.length>1&&(this.$.cameraSelectOptions=t,this.$.cameraSelectHidden=!1)}catch{}}}Wa.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div set="@hidden: !cameraSelectHidden">
      <lr-icon name="camera"></lr-icon>
      <span l10n="caption-camera"></span>
    </div>
    <lr-select
      class="camera-select"
      set="$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange"
    >
    </lr-select>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <div class="content">
    <video
      autoplay
      playsinline
      set="srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden"
      ref="video"
    ></video>
    <div class="message-box" set="@hidden: messageHidden">
      <span>{{l10nMessage}}</span>
      <span>{{originalErrorMessage}}</span>
      <button
        type="button"
        set="onclick: onRequestPermissions; @hidden: requestBtnHidden"
        l10n="camera-permissions-request"
      ></button>
    </div>
    <button type="button" class="shot-btn" set="onclick: onShot; @disabled: shotBtnDisabled">
      <lr-icon name="camera"></lr-icon>
    </button>
  </div>
`;class sc extends W{}class Ga extends W{constructor(){super(...arguments);f(this,"activityType",F.activities.DETAILS);f(this,"pauseRender",!0);f(this,"init$",{...this.init$,checkerboard:!1,fileSize:null,fileName:"",cdnUrl:"",errorTxt:"",cloudEditBtnHidden:!0,onNameInput:null,onBack:()=>{this.historyBack()},onRemove:()=>{this.uploadCollection.remove(this.entry.uid),this.historyBack()},onCloudEdit:()=>{this.entry.getValue("uuid")&&(this.$["*currentActivity"]=F.activities.CLOUD_IMG_EDIT)}})}showNonImageThumb(){let e=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon"),t=Ir(e,108,108);this.ref.filePreview.setImageUrl(t),this.set$({checkerboard:!1})}initCallback(){super.initCallback(),this.render(),this.$.fileSize=this.l10n("file-size-unknown"),this.registerActivity(this.activityType,{onDeactivate:()=>{this.ref.filePreview.clear()}}),this.sub("*focusedEntry",e=>{if(!e)return;this._entrySubs?this._entrySubs.forEach(a=>{this._entrySubs.delete(a),a.remove()}):this._entrySubs=new Set,this.entry=e;let t=e.getValue("file");if(t){this._file=t;let a=$r(this._file);a&&!e.getValue("cdnUrl")&&(this.ref.filePreview.setImageFile(this._file),this.set$({checkerboard:!0})),a||this.showNonImageThumb()}let n=(a,o)=>{this._entrySubs.add(this.entry.subscribe(a,o))};n("fileName",a=>{this.$.fileName=a,this.$.onNameInput=()=>{let o=this.ref.file_name_input.value;Object.defineProperty(this._file,"name",{writable:!0,value:o}),this.entry.setValue("fileName",o)}}),n("fileSize",a=>{this.$.fileSize=Number.isFinite(a)?this.fileSizeFmt(a):this.l10n("file-size-unknown")}),n("uploadError",a=>{this.$.errorTxt=a==null?void 0:a.message}),n("externalUrl",a=>{a&&(this.entry.getValue("uuid")||this.showNonImageThumb())}),n("cdnUrl",a=>{const o=this.cfg.useCloudImageEditor&&a&&this.entry.getValue("isImage");if(a&&this.ref.filePreview.clear(),this.set$({cdnUrl:a,cloudEditBtnHidden:!o}),a&&this.entry.getValue("isImage")){let s=xe(a,Pe("format/auto","preview"));this.ref.filePreview.setImageUrl(this.proxyUrl(s))}})})}}Ga.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <span l10n="caption-edit-file"></span>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <div class="content">
    <lr-tabs tab-list="tab-view, tab-details">
      <div tab-ctx="tab-details" class="details">
        <div class="info-block">
          <div class="info-block_name" l10n="file-name"></div>
          <input
            name="name-input"
            ref="file_name_input"
            set="value: fileName; oninput: onNameInput; @disabled: !!cdnUrl"
            type="text"
          />
        </div>

        <div class="info-block">
          <div class="info-block_name" l10n="file-size"></div>
          <div>{{fileSize}}</div>
        </div>

        <div class="info-block">
          <div class="info-block_name" l10n="cdn-url"></div>
          <a class="cdn-link" target="_blank" set="@href: cdnUrl; @disabled: !cdnUrl">{{cdnUrl}}</a>
        </div>

        <div>{{errorTxt}}</div>
      </div>

      <lr-file-preview tab-ctx="tab-view" set="@checkerboard: checkerboard;" ref="filePreview"> </lr-file-preview>
    </lr-tabs>

    <div class="toolbar" set="@edit-disabled: cloudEditBtnHidden">
      <button type="button" class="edit-btn secondary-btn" set="onclick: onCloudEdit; @hidden: cloudEditBtnHidden;">
        <lr-icon name="edit"></lr-icon>
        <span l10n="edit-image"></span>
      </button>
      <button type="button" class="remove-btn secondary-btn" set="onclick: onRemove">
        <lr-icon name="remove"></lr-icon>
        <span l10n="remove-from-list"></span>
      </button>
      <div></div>
      <button type="button" class="back-btn primary-btn" set="onclick: onBack">
        <span l10n="ok"></span>
      </button>
    </div>
  </div>
`;class lc{constructor(){f(this,"captionL10nStr","confirm-your-action");f(this,"messageL10Str","are-you-sure");f(this,"confirmL10nStr","yes");f(this,"denyL10nStr","no")}confirmAction(){console.log("Confirmed")}denyAction(){this.historyBack()}}class Xa extends F{constructor(){super(...arguments);f(this,"activityType",F.activities.CONFIRMATION);f(this,"_defaults",new lc);f(this,"init$",{...this.init$,activityCaption:"",messageTxt:"",confirmBtnTxt:"",denyBtnTxt:"","*confirmation":null,onConfirm:this._defaults.confirmAction,onDeny:this._defaults.denyAction.bind(this)})}initCallback(){super.initCallback(),this.set$({messageTxt:this.l10n(this._defaults.messageL10Str),confirmBtnTxt:this.l10n(this._defaults.confirmL10nStr),denyBtnTxt:this.l10n(this._defaults.denyL10nStr)}),this.sub("*confirmation",e=>{e&&this.set$({"*currentActivity":F.activities.CONFIRMATION,activityCaption:this.l10n(e.captionL10nStr),messageTxt:this.l10n(e.messageL10Str),confirmBtnTxt:this.l10n(e.confirmL10nStr),denyBtnTxt:this.l10n(e.denyL10nStr),onDeny:()=>{e.denyAction()},onConfirm:()=>{e.confirmAction()}})})}}Xa.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <span>{{activityCaption}}</span>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>

  <div class="message">{{messageTxt}}</div>
  <div class="toolbar">
    <button type="button" class="deny-btn secondary-btn" set="onclick: onDeny">{{denyBtnTxt}}</button>
    <button type="button" class="confirm-btn primary-btn" set="onclick: onConfirm">{{confirmBtnTxt}}</button>
  </div>
`;class qa extends W{constructor(){super(...arguments);f(this,"init$",{...this.init$,visible:!1,unknown:!1,value:0,"*commonProgress":0})}initCallback(){super.initCallback(),this.uploadCollection.observe(()=>{let e=this.uploadCollection.items().some(t=>this.uploadCollection.read(t).getValue("isUploading"));this.$.visible=e}),this.sub("visible",e=>{e?this.setAttribute("active",""):this.removeAttribute("active")}),this.sub("*commonProgress",e=>{this.$.value=e})}}qa.template=`
  <lr-progress-bar set="visible: visible; unknown: unknown; value: value"></lr-progress-bar>
`;class Ya extends Q{constructor(){super(...arguments);f(this,"_value",0);f(this,"_unknownMode",!1);f(this,"init$",{...this.init$,width:0,opacity:0})}initCallback(){super.initCallback(),this.defineAccessor("value",e=>{e!==void 0&&(this._value=e,this._unknownMode||this.style.setProperty("--l-width",this._value.toString()))}),this.defineAccessor("visible",e=>{this.ref.line.classList.toggle("progress--hidden",!e)}),this.defineAccessor("unknown",e=>{this._unknownMode=e,this.ref.line.classList.toggle("progress--unknown",e)})}}Ya.template=' <div ref="line" class="progress"></div> ';const rt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";class Qr extends Q{constructor(){super();f(this,"init$",{...this.init$,checkerboard:!1,src:rt})}initCallback(){super.initCallback(),this.sub("checkerboard",()=>{this.style.backgroundImage=this.hasAttribute("checkerboard")?`url(${nc()})`:"unset"})}destroyCallback(){super.destroyCallback(),URL.revokeObjectURL(this._lastObjectUrl)}setImage(e){this.$.src=e.src}setImageFile(e){let t=URL.createObjectURL(e);this.$.src=t,this._lastObjectUrl=t}setImageUrl(e){this.$.src=e}clear(){URL.revokeObjectURL(this._lastObjectUrl),this.$.src=rt}}Qr.template=' <lr-img class="img-view" ref="img" set="@src: src; style.aa: src;" /> ';Qr.bindAttributes({checkerboard:"checkerboard"});const Fn="--cfg-ctx-name";class ct extends Q{get cfgCssCtxName(){return this.getCssData(Fn,!0)}get cfgCtxName(){var e;const r=((e=this.getAttribute("ctx-name"))==null?void 0:e.trim())||this.cfgCssCtxName||this.__cachedCfgCtxName;return this.__cachedCfgCtxName=r,r}connectedCallback(){var r;if(!this.connectedOnce){const e=(r=this.getAttribute("ctx-name"))==null?void 0:r.trim();e&&this.style.setProperty(Fn,`'${e}'`)}super.connectedCallback()}parseCfgProp(r){return{...super.parseCfgProp(r),ctx:X.getCtx(this.cfgCtxName)}}}function Ka(...i){return i.reduce((r,e)=>{if(typeof e=="string")return r[e]=!0,r;for(let t of Object.keys(e))r[t]=e[t];return r},{})}function Le(...i){let r=Ka(...i);return Object.keys(r).reduce((e,t)=>(r[t]&&e.push(t),e),[]).join(" ")}function cc(i,...r){let e=Ka(...r);for(let t of Object.keys(e))i.classList.toggle(t,e[t])}function Ht(i,r){let e,t=(...n)=>{clearTimeout(e),e=setTimeout(()=>i(...n),r)};return t.cancel=()=>{clearTimeout(e)},t}const _e={brightness:0,exposure:0,gamma:100,contrast:0,saturation:0,vibrance:0,warmth:0,enhance:0,filter:0,rotate:0};function dc(i,r){if(typeof r=="number")return _e[i]!==r?`${i}/${r}`:"";if(typeof r=="boolean")return r&&_e[i]!==r?`${i}`:"";if(i==="filter"){if(!r||_e[i]===r.amount)return"";let{name:e,amount:t}=r;return`${i}/${e}/${t}`}if(i==="crop"){if(!r)return"";let{dimensions:e,coords:t}=r;return`${i}/${e.join("x")}/${t.join(",")}`}return""}const Za=["enhance","brightness","exposure","gamma","contrast","saturation","vibrance","warmth","filter","mirror","flip","rotate","crop"];function nr(i){return Kr(...Za.filter(r=>typeof i[r]<"u"&&i[r]!==null).map(r=>{let e=i[r];return dc(r,e)}).filter(r=>!!r))}const Qa=Kr("format/auto","progressive/yes"),Fe=([i])=>typeof i<"u"?Number(i):void 0,Bn=()=>!0,uc=([i,r])=>({name:i,amount:typeof r<"u"?Number(r):100}),hc=([i,r])=>({dimensions:qe(i,"x").map(Number),coords:qe(r).map(Number)}),pc={enhance:Fe,brightness:Fe,exposure:Fe,gamma:Fe,contrast:Fe,saturation:Fe,vibrance:Fe,warmth:Fe,filter:uc,mirror:Bn,flip:Bn,rotate:Fe,crop:hc};function fc(i){let r={};for(let e of i){let[t,...n]=e.split("/");if(!Za.includes(t))continue;const a=pc[t],o=a(n);r[t]=o}return r}function mc(i){return{"*originalUrl":null,"*faderEl":null,"*cropperEl":null,"*imgEl":null,"*imgContainerEl":null,"*networkProblems":!1,"*imageSize":null,"*editorTransformations":{},entry:null,extension:null,editorMode:!1,modalCaption:"",isImage:!1,msg:"",src:rt,fileType:"",showLoader:!1,uuid:null,cdnUrl:null,"presence.networkProblems":!1,"presence.modalCaption":!0,"presence.editorToolbar":!1,"presence.viewerToolbar":!0,"*on.retryNetwork":()=>{let r=i.querySelectorAll("img");for(let e of r){let t=e.src;e.src=rt,e.src=t}i.$["*networkProblems"]=!1},"*on.apply":r=>{if(!r)return;let e=i.$["*originalUrl"],t=Pe(nr(r)),n=xe(e,Pe(t,"preview")),a={originalUrl:e,cdnUrlModifiers:t,cdnUrl:n,transformations:r};i.dispatchEvent(new CustomEvent("apply",{detail:a,bubbles:!0,composed:!0})),i.remove()},"*on.cancel":()=>{i.remove(),i.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}}}const gc=`
  <div class="wrapper wrapper_desktop">
    <lr-presence-toggle class="network_problems_splash" set="visible: presence.networkProblems;">
      <div class="network_problems_content">
        <div class="network_problems_icon">
          <lr-icon size="20" name="sad"></lr-icon>
        </div>
        <div class="network_problems_text">Network error</div>
      </div>
      <div class="network_problems_footer">
        <lr-btn-ui theme="primary" text="Retry" set="onclick: *on.retryNetwork"></lr-btn-ui>
      </div>
    </lr-presence-toggle>
    <div class="viewport">
      <div class="file_type_outer">
        <div class="file_type">{{fileType}}</div>
      </div>
      <div class="image_container" ref="img-container-el">
        <img src="${rt}" class="image image_visible_from_editor" ref="img-el" />
        <lr-editor-image-cropper ref="cropper-el"></lr-editor-image-cropper>
        <lr-editor-image-fader ref="fader-el"></lr-editor-image-fader>
      </div>
      <div class="info_pan">{{msg}}</div>
    </div>
    <div class="toolbar">
      <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>
      <div class="toolbar_content toolbar_content__editor">
        <lr-editor-toolbar></lr-editor-toolbar>
      </div>
    </div>
  </div>
`,ge={CROP:"crop",SLIDERS:"sliders",FILTERS:"filters"},Or=[ge.CROP,ge.SLIDERS,ge.FILTERS],vc=["brightness","exposure","gamma","contrast","saturation","vibrance","warmth","enhance"],bc=["adaris","briaril","calarel","carris","cynarel","cyren","elmet","elonni","enzana","erydark","fenralan","ferand","galen","gavin","gethriel","iorill","iothari","iselva","jadis","lavra","misiara","namala","nerion","nethari","pamaya","sarnar","sedis","sewen","sorahel","sorlen","tarian","thellassan","varriel","varven","vevera","virkas","yedis","yllara","zatvel","zevcen"],_c=["rotate","mirror","flip"],jt={brightness:{zero:_e.brightness,range:[-100,100],keypointsNumber:2},exposure:{zero:_e.exposure,range:[-500,500],keypointsNumber:2},gamma:{zero:_e.gamma,range:[0,1e3],keypointsNumber:2},contrast:{zero:_e.contrast,range:[-100,500],keypointsNumber:2},saturation:{zero:_e.saturation,range:[-100,500],keypointsNumber:1},vibrance:{zero:_e.vibrance,range:[-100,500],keypointsNumber:1},warmth:{zero:_e.warmth,range:[-100,100],keypointsNumber:1},enhance:{zero:_e.enhance,range:[0,100],keypointsNumber:1},filter:{zero:_e.filter,range:[0,100],keypointsNumber:1}};class Xt extends ct{constructor(){super(...arguments);f(this,"init$",{...this.init$,...mc(this)});f(this,"_debouncedShowLoader",Ht(this._showLoader.bind(this),300))}get ctxName(){return this.autoCtxName}_showLoader(e){this.$.showLoader=e}_waitForSize(){return new Promise((t,n)=>{const a=setTimeout(()=>{n(new Error("[cloud-image-editor] timeout waiting for non-zero container size"))},3e3),o=new ResizeObserver(([s])=>{s.contentRect.width>0&&s.contentRect.height>0&&(t(),clearTimeout(a),o.disconnect())});o.observe(this)})}initCallback(){super.initCallback(),this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}async initEditor(){try{await this._waitForSize()}catch(e){this.isConnected&&console.error(e.message);return}if(this.ref["img-el"].addEventListener("load",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$.src!==rt&&(this.$["*networkProblems"]=!1)}),this.ref["img-el"].addEventListener("error",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$["*networkProblems"]=!0}),this.sub("src",e=>{let t=this.ref["img-el"];t.src!==e&&(this._imgLoading=!0,t.src=e||rt)}),this.sub("*tabId",e=>{this.ref["img-el"].className=Le("image",{image_hidden_to_cropper:e===ge.CROP,image_hidden_effects:e!==ge.CROP})}),this.$.cdnUrl){let e=jl(this.$.cdnUrl);this.$["*originalUrl"]=li(this.$.cdnUrl,e);let t=Wl(this.$.cdnUrl),n=fc(t);this.$["*editorTransformations"]=n}else if(this.$.uuid)this.$["*originalUrl"]=li(this.cfg.cdnCname,this.$.uuid);else throw new Error("No UUID nor CDN URL provided");this.classList.add("editor_ON"),this.sub("*networkProblems",e=>{this.$["presence.networkProblems"]=e,this.$["presence.modalCaption"]=!e}),this.sub("*editorTransformations",e=>{let t=this.$["*originalUrl"],n=Pe(nr(e)),a=xe(t,Pe(n,"preview")),o={originalUrl:t,cdnUrlModifiers:n,cdnUrl:a,transformations:e};this.dispatchEvent(new CustomEvent("change",{detail:o,bubbles:!0,composed:!0}))},!1);try{fetch(xe(this.$["*originalUrl"],Pe("json"))).then(e=>e.json()).then(e=>{const{width:t,height:n}=e;this.$["*imageSize"]={width:t,height:n}})}catch(e){e&&console.error("Failed to load image info",e)}}}f(Xt,"className","cloud-image-editor");Xt.template=gc;Xt.bindAttributes({uuid:"uuid","cdn-url":"cdnUrl"});const yc=20,ji=24,ai=34,Ja=3,ke=Ja/2,mt=1,$i=100/3,Me=ji*2+ai;function Lt(i,r){for(let e in r)i.setAttributeNS(null,e,r[e].toString())}function Ae(i,r={}){let e=document.createElementNS("http://www.w3.org/2000/svg",i);return Lt(e,r),e}function wc(i,r){let{x:e,y:t,width:n,height:a}=i,o=r.includes("w")?0:1,s=r.includes("n")?0:1,l=[-1,1][o],c=[-1,1][s],d=[e+o*n+ke*l,t+s*a+ke*c-ji*c],u=[e+o*n+ke*l,t+s*a+ke*c],h=[e+o*n-ji*l+ke*l,t+s*a+ke*c];return{d:`M ${d[0]} ${d[1]} L ${u[0]} ${u[1]} L ${h[0]} ${h[1]}`,center:u}}function xc(i,r){let{x:e,y:t,width:n,height:a}=i,o=["n","s"].includes(r)?.5:{w:0,e:1}[r],s=["w","e"].includes(r)?.5:{n:0,s:1}[r],l=[-1,1][o],c=[-1,1][s],d,u;["n","s"].includes(r)?(d=[e+o*n-ai/2,t+s*a+ke*c],u=[e+o*n+ai/2,t+s*a+ke*c]):(d=[e+o*n+ke*l,t+s*a-ai/2],u=[e+o*n+ke*l,t+s*a+ai/2]);let h=`M ${d[0]} ${d[1]} L ${u[0]} ${u[1]}`,m=[u[0]-(u[0]-d[0])/2,u[1]-(u[1]-d[1])/2];return{d:h,center:m}}function Cc(i){return i===""?"move":["e","w"].includes(i)?"ew-resize":["n","s"].includes(i)?"ns-resize":["nw","se"].includes(i)?"nwse-resize":"nesw-resize"}function Ec(i,[r,e]){return{...i,x:i.x+r,y:i.y+e}}function eo(i,r){let{x:e}=i,{y:t}=i;return i.x<r.x?e=r.x:i.x+i.width>r.x+r.width&&(e=r.x+r.width-i.width),i.y<r.y?t=r.y:i.y+i.height>r.y+r.height&&(t=r.y+r.height-i.height),{...i,x:e,y:t}}function Ac(i,[r,e],t){let{x:n,y:a,width:o,height:s}=i;return t.includes("n")&&(a+=e,s-=e),t.includes("s")&&(s+=e),t.includes("w")&&(n+=r,o-=r),t.includes("e")&&(o+=r),{x:n,y:a,width:o,height:s}}function Tc(i,r){let e=Math.max(i.x,r.x),t=Math.min(i.x+i.width,r.x+r.width),n=Math.max(i.y,r.y),a=Math.min(i.y+i.height,r.y+r.height);return{x:e,y:n,width:t-e,height:a-n}}function to(i,[r,e],t){let{x:n,y:a,width:o,height:s}=i;if(t.includes("n")){let l=s;s=Math.max(e,s),a=a+l-s}if(t.includes("s")&&(s=Math.max(e,s)),t.includes("w")){let l=o;o=Math.max(r,o),n=n+l-o}return t.includes("e")&&(o=Math.max(r,o)),{x:n,y:a,width:o,height:s}}function kc(i,[r,e]){return i.x<=r&&r<=i.x+i.width&&i.y<=e&&e<=i.y+i.height}class io extends ct{constructor(){super();f(this,"init$",{...this.init$,dragging:!1});this._handlePointerUp=this._handlePointerUp_.bind(this),this._handlePointerMove=this._handlePointerMove_.bind(this),this._handleSvgPointerMove=this._handleSvgPointerMove_.bind(this)}_shouldThumbBeDisabled(e){let t=this.$["*imageBox"];if(!t)return;if(e===""&&t.height<=Me&&t.width<=Me)return!0;let n=t.height<=Me&&(e.includes("n")||e.includes("s")),a=t.width<=Me&&(e.includes("e")||e.includes("w"));return n||a}_createBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:t,y:n,width:a,height:o}=e,s=this.ref["svg-el"],l=Ae("mask",{id:"backdrop-mask"}),c=Ae("rect",{x:0,y:0,width:"100%",height:"100%",fill:"white"}),d=Ae("rect",{x:t,y:n,width:a,height:o,fill:"black"});l.appendChild(c),l.appendChild(d);let u=Ae("rect",{x:0,y:0,width:"100%",height:"100%",fill:"var(--color-image-background)","fill-opacity":.85,mask:"url(#backdrop-mask)"});s.appendChild(u),s.appendChild(l),this._backdropMask=l,this._backdropMaskInner=d}_resizeBackdrop(){this._backdropMask&&(this._backdropMask.style.display="none",window.requestAnimationFrame(()=>{this._backdropMask.style.display="block"}))}_updateBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:t,y:n,width:a,height:o}=e;Lt(this._backdropMaskInner,{x:t,y:n,width:a,height:o})}_updateFrame(){let e=this.$["*cropBox"];if(!e)return;for(let n of Object.values(this._frameThumbs)){let{direction:a,pathNode:o,interactionNode:s,groupNode:l}=n,c=a==="",d=a.length===2;if(c){let{x:h,y:m,width:p,height:g}=e,_=[h+p/2,m+g/2];Lt(s,{r:Math.min(p,g)/3,cx:_[0],cy:_[1]})}else{let{d:h,center:m}=d?wc(e,a):xc(e,a);Lt(s,{cx:m[0],cy:m[1]}),Lt(o,{d:h})}let u=this._shouldThumbBeDisabled(a);l.setAttribute("class",Le("thumb",{"thumb--hidden":u,"thumb--visible":!u}))}let t=this._frameGuides;Lt(t,{x:e.x-mt*.5,y:e.y-mt*.5,width:e.width+mt,height:e.height+mt})}_createThumbs(){let e={};for(let t=0;t<3;t++)for(let n=0;n<3;n++){let a=`${["n","","s"][t]}${["w","","e"][n]}`,o=Ae("g");o.classList.add("thumb"),o.setAttribute("with-effects","");let s=Ae("circle",{r:ji+ke,fill:"transparent"}),l=Ae("path",{stroke:"currentColor",fill:"none","stroke-width":Ja});o.appendChild(l),o.appendChild(s),e[a]={direction:a,pathNode:l,interactionNode:s,groupNode:o},s.addEventListener("pointerdown",this._handlePointerDown.bind(this,a))}return e}_createGuides(){let e=Ae("svg"),t=Ae("rect",{x:0,y:0,width:"100%",height:"100%",fill:"none",stroke:"#000000","stroke-width":mt,"stroke-opacity":.5});e.appendChild(t);for(let n=1;n<=2;n++){let a=Ae("line",{x1:`${$i*n}%`,y1:"0%",x2:`${$i*n}%`,y2:"100%",stroke:"#000000","stroke-width":mt,"stroke-opacity":.3});e.appendChild(a)}for(let n=1;n<=2;n++){let a=Ae("line",{x1:"0%",y1:`${$i*n}%`,x2:"100%",y2:`${$i*n}%`,stroke:"#000000","stroke-width":mt,"stroke-opacity":.3});e.appendChild(a)}return e.classList.add("guides","guides--semi-hidden"),e}_createFrame(){let e=this.ref["svg-el"],t=document.createDocumentFragment(),n=this._createGuides();t.appendChild(n);let a=this._createThumbs();for(let{groupNode:o}of Object.values(a))t.appendChild(o);e.appendChild(t),this._frameThumbs=a,this._frameGuides=n}_handlePointerDown(e,t){let n=this._frameThumbs[e];if(this._shouldThumbBeDisabled(e))return;let a=this.$["*cropBox"],{x:o,y:s}=this.ref["svg-el"].getBoundingClientRect(),l=t.x-o,c=t.y-s;this.$.dragging=!0,this._draggingThumb=n,this._dragStartPoint=[l,c],this._dragStartCrop={...a}}_handlePointerUp_(e){this._updateCursor(),this.$.dragging&&(e.stopPropagation(),e.preventDefault(),this.$.dragging=!1)}_handlePointerMove_(e){if(!this.$.dragging)return;e.stopPropagation(),e.preventDefault();let t=this.ref["svg-el"],{x:n,y:a}=t.getBoundingClientRect(),o=e.x-n,s=e.y-a,l=o-this._dragStartPoint[0],c=s-this._dragStartPoint[1],{direction:d}=this._draggingThumb,u=this.$["*imageBox"],h=this._dragStartCrop;d===""?(h=Ec(h,[l,c]),h=eo(h,u)):(h=Ac(h,[l,c],d),h=Tc(h,u));let m=[Math.min(u.width,Me),Math.min(u.height,Me)];if(h=to(h,m,d),!Object.values(h).every(p=>Number.isFinite(p)&&p>=0)){console.error("CropFrame is trying to create invalid rectangle",{payload:h});return}this.$["*cropBox"]=h}_handleSvgPointerMove_(e){let t=Object.values(this._frameThumbs).find(n=>{if(this._shouldThumbBeDisabled(n.direction))return!1;let o=n.groupNode.getBoundingClientRect(),s={x:o.x,y:o.y,width:o.width,height:o.height};return kc(s,[e.x,e.y])});this._hoverThumb=t,this._updateCursor()}_updateCursor(){let e=this._hoverThumb;this.ref["svg-el"].style.cursor=e?Cc(e.direction):"initial"}_render(){this._updateBackdrop(),this._updateFrame()}toggleThumbs(e){Object.values(this._frameThumbs).map(({groupNode:t})=>t).forEach(t=>{t.setAttribute("class",Le("thumb",{"thumb--hidden":!e,"thumb--visible":e}))})}initCallback(){super.initCallback(),this._createBackdrop(),this._createFrame(),this.sub("*imageBox",()=>{this._resizeBackdrop(),window.requestAnimationFrame(()=>{this._render()})}),this.sub("*cropBox",e=>{e&&(this._guidesHidden=e.height<=Me||e.width<=Me,window.requestAnimationFrame(()=>{this._render()}))}),this.sub("dragging",e=>{this._frameGuides.setAttribute("class",Le({"guides--hidden":this._guidesHidden,"guides--visible":!this._guidesHidden&&e,"guides--semi-hidden":!this._guidesHidden&&!e}))}),this.ref["svg-el"].addEventListener("pointermove",this._handleSvgPointerMove,!0),document.addEventListener("pointermove",this._handlePointerMove,!0),document.addEventListener("pointerup",this._handlePointerUp,!0)}destroyCallback(){super.destroyCallback(),document.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerUp)}}io.template=' <svg class="svg" ref="svg-el" xmlns="http://www.w3.org/2000/svg"></svg> ';class ar extends ct{constructor(){super(...arguments);f(this,"init$",{...this.init$,active:!1,title:"",icon:"","on.click":null})}initCallback(){super.initCallback(),this._titleEl=this.ref["title-el"],this._iconEl=this.ref["icon-el"],this.setAttribute("role","button"),this.tabIndex===-1&&(this.tabIndex=0),this.sub("title",e=>{this._titleEl&&(this._titleEl.style.display=e?"block":"none")}),this.sub("active",e=>{this.className=Le({active:e,not_active:!e})}),this.sub("on.click",e=>{this.onclick=e})}}ar.template=`
  <div class="before"></div>
  <lr-icon size="20" set="@name: icon;"></lr-icon>
  <div class="title" ref="title-el">{{title}}</div>
`;function Sc(i){let r=i+90;return r=r>=360?0:r,r}function $c(i,r){return i==="rotate"?Sc(r):["mirror","flip"].includes(i)?!r:null}class Rr extends ar{initCallback(){super.initCallback(),this.defineAccessor("operation",r=>{r&&(this._operation=r,this.$.icon=r)}),this.$["on.click"]=r=>{let e=this.$["*cropperEl"].getValue(this._operation),t=$c(this._operation,e);this.$["*cropperEl"].setValue(this._operation,t)}}}const ti={FILTER:"filter",COLOR_OPERATION:"color_operation"},tt="original";class ro extends ct{constructor(){super(...arguments);f(this,"init$",{...this.init$,disabled:!1,min:0,max:100,value:0,defaultValue:0,zero:0,"on.input":e=>{this.$["*faderEl"].set(e),this.$.value=e}})}setOperation(e,t){this._controlType=e==="filter"?ti.FILTER:ti.COLOR_OPERATION,this._operation=e,this._iconName=e,this._title=e.toUpperCase(),this._filter=t,this._initializeValues(),this.$["*faderEl"].activate({url:this.$["*originalUrl"],operation:this._operation,value:this._filter===tt?void 0:this.$.value,filter:this._filter===tt?void 0:this._filter,fromViewer:!1})}_initializeValues(){let{range:e,zero:t}=jt[this._operation],[n,a]=e;this.$.min=n,this.$.max=a,this.$.zero=t;let o=this.$["*editorTransformations"][this._operation];if(this._controlType===ti.FILTER){let s=a;if(o){let{name:l,amount:c}=o;s=l===this._filter?c:a}this.$.value=s,this.$.defaultValue=s}if(this._controlType===ti.COLOR_OPERATION){let s=typeof o<"u"?o:t;this.$.value=s,this.$.defaultValue=s}}apply(){let e;this._controlType===ti.FILTER?this._filter===tt?e=null:e={name:this._filter,amount:this.$.value}:e=this.$.value;let t={...this.$["*editorTransformations"],[this._operation]:e};this.$["*editorTransformations"]=t}cancel(){this.$["*faderEl"].deactivate({hide:!1})}initCallback(){super.initCallback(),this.sub("*originalUrl",e=>{this._originalUrl=e}),this.sub("value",e=>{let t=`${this._filter||this._operation} ${e}`;this.$["*operationTooltip"]=t})}}ro.template=`
  <lr-slider-ui
    ref="slider-el"
    set="disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;"
  ></lr-slider-ui>
`;function Jr(i){let r=new Image;return{promise:new Promise((n,a)=>{r.src=i,r.onload=n,r.onerror=a}),image:r,cancel:()=>{r.naturalWidth===0&&(r.src=rt)}}}function Mr(i){let r=[];for(let a of i){let o=Jr(a);r.push(o)}let e=r.map(a=>a.image);return{promise:Promise.allSettled(r.map(a=>a.promise)),images:e,cancel:()=>{r.forEach(a=>{a.cancel()})}}}class Wi extends ar{constructor(){super(...arguments);f(this,"init$",{...this.init$,active:!1,title:"",icon:"",isOriginal:!1,iconSize:"20","on.click":null})}_previewSrc(){let e=parseInt(window.getComputedStyle(this).getPropertyValue("--l-base-min-width"),10),t=window.devicePixelRatio,n=Math.ceil(t*e),a=t>=2?"lightest":"normal",o=100,s={...this.$["*editorTransformations"]};return s[this._operation]=this._filter!==tt?{name:this._filter,amount:o}:void 0,xe(this._originalUrl,Pe(Qa,nr(s),`quality/${a}`,`scale_crop/${n}x${n}/center`))}_observerCallback(e,t){if(e[0].isIntersecting){let a=this.proxyUrl(this._previewSrc()),o=this.ref["preview-el"],{promise:s,cancel:l}=Jr(a);this._cancelPreload=l,s.catch(c=>{this.$["*networkProblems"]=!0,console.error("Failed to load image",{error:c})}).finally(()=>{o.style.backgroundImage=`url(${a})`,o.setAttribute("loaded",""),t.unobserve(this)})}else this._cancelPreload&&this._cancelPreload()}initCallback(){super.initCallback(),this.$["on.click"]=t=>{this.$.active?this.$.isOriginal||(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*showSlider"]=!0):(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*sliderEl"].apply()),this.$["*currentFilter"]=this._filter},this.defineAccessor("filter",t=>{this._operation="filter",this._filter=t,this.$.isOriginal=t===tt,this.$.icon=this.$.isOriginal?"original":"slider"}),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]});let e=this.$["*originalUrl"];this._originalUrl=e,this.$.isOriginal?this.ref["icon-el"].classList.add("original-icon"):this._observer.observe(this),this.sub("*currentFilter",t=>{this.$.active=t&&t===this._filter}),this.sub("isOriginal",t=>{this.$.iconSize=t?40:20}),this.sub("active",t=>{if(this.$.isOriginal)return;let n=this.ref["icon-el"];n.style.opacity=t?"1":"0";let a=this.ref["preview-el"];t?a.style.opacity="0":a.style.backgroundImage&&(a.style.opacity="1")}),this.sub("*networkProblems",t=>{if(!t){let n=this.proxyUrl(this._previewSrc()),a=this.ref["preview-el"];a.style.backgroundImage&&(a.style.backgroundImage="none",a.style.backgroundImage=`url(${n})`)}})}destroyCallback(){var e;super.destroyCallback(),(e=this._observer)==null||e.disconnect(),this._cancelPreload&&this._cancelPreload()}}Wi.template=`
  <div class="before"></div>
  <div class="preview" ref="preview-el"></div>
  <lr-icon size="40" ref="icon-el" set="@name: icon; @size: iconSize;"></lr-icon>
`;class Ur extends ar{constructor(){super(...arguments);f(this,"_operation","")}initCallback(){super.initCallback(),this.$["on.click"]=e=>{this.$["*sliderEl"].setOperation(this._operation),this.$["*showSlider"]=!0,this.$["*currentOperation"]=this._operation},this.defineAccessor("operation",e=>{e&&(this._operation=e,this.$.icon=e,this.$.title=this.l10n(e))}),this.sub("*editorTransformations",e=>{if(!this._operation)return;let{zero:t}=jt[this._operation],n=e[this._operation],a=typeof n<"u"?n!==t:!1;this.$.active=a})}}function Lc(i,r){let e={};for(let t of r){let n=i[t];(i.hasOwnProperty(t)||n!==void 0)&&(e[t]=n)}return e}function en(i,r,e){let n=window.devicePixelRatio,a=Math.min(Math.ceil(r*n),3e3),o=n>=2?"lightest":"normal";return xe(i,Pe(Qa,nr(e),`quality/${o}`,`stretch/off/-/resize/${a}x`))}function Li(i,r,e){return Math.min(Math.max(i,r),e)}function ii({width:i,height:r},e){let t=e/90%2!==0;return{width:t?r:i,height:t?i:r}}function Ic(i){return i?[({dimensions:e,coords:t})=>[...e,...t].every(n=>Number.isInteger(n)&&Number.isFinite(n)),({dimensions:e,coords:t})=>e.every(n=>n>0)&&t.every(n=>n>=0)].every(e=>e(i)):!0}class no extends ct{constructor(){super();f(this,"init$",{...this.init$,image:null,"*padding":yc,"*operations":{rotate:0,mirror:!1,flip:!1},"*imageBox":{x:0,y:0,width:0,height:0},"*cropBox":{x:0,y:0,width:0,height:0}});this._commitDebounced=Ht(this._commit.bind(this),300),this._handleResizeDebounced=Ht(this._handleResize.bind(this),10)}_handleResize(){this.isConnected&&(this.deactivate(),this.activate(this._imageSize,{fromViewer:!1}))}_syncTransformations(){let e=this.$["*editorTransformations"],t=Lc(e,Object.keys(this.$["*operations"])),n={...this.$["*operations"],...t};this.$["*operations"]=n}_initCanvas(){let e=this.ref["canvas-el"],t=e.getContext("2d"),n=this.offsetWidth,a=this.offsetHeight,o=window.devicePixelRatio;e.style.width=`${n}px`,e.style.height=`${a}px`,e.width=n*o,e.height=a*o,t.scale(o,o),this._canvas=e,this._ctx=t}_alignImage(){if(!this._isActive||!this.$.image)return;let e=this.$.image,t=this.$["*padding"],n=this.$["*operations"],{rotate:a}=n,o={width:this.offsetWidth,height:this.offsetHeight},s=ii({width:e.naturalWidth,height:e.naturalHeight},a);if(s.width>o.width-t*2||s.height>o.height-t*2){let l=s.width/s.height,c=o.width/o.height;if(l>c){let d=o.width-t*2,u=d/l,h=0+t,m=t+(o.height-t*2)/2-u/2;this.$["*imageBox"]={x:h,y:m,width:d,height:u}}else{let d=o.height-t*2,u=d*l,h=t+(o.width-t*2)/2-u/2,m=0+t;this.$["*imageBox"]={x:h,y:m,width:u,height:d}}}else{let{width:l,height:c}=s,d=t+(o.width-t*2)/2-l/2,u=t+(o.height-t*2)/2-c/2;this.$["*imageBox"]={x:d,y:u,width:l,height:c}}}_alignCrop(){let e=this.$["*cropBox"],t=this.$["*imageBox"],n=this.$["*operations"],{rotate:a}=n,o=this.$["*editorTransformations"].crop;if(o){let{dimensions:[l,c],coords:[d,u]}=o,{width:h,x:m,y:p}=this.$["*imageBox"],{width:g}=ii(this._imageSize,a),_=h/g;e={x:m+d*_,y:p+u*_,width:l*_,height:c*_}}else e={x:t.x,y:t.y,width:t.width,height:t.height};let s=[Math.min(t.width,Me),Math.min(t.height,Me)];e=to(e,s,"se"),e=eo(e,t),this.$["*cropBox"]=e}_drawImage(){let e=this.$.image,t=this.$["*imageBox"],n=this.$["*operations"],{mirror:a,flip:o,rotate:s}=n,l=this._ctx,c=ii({width:t.width,height:t.height},s);l.save(),l.translate(t.x+t.width/2,t.y+t.height/2),l.rotate(s*Math.PI*-1/180),l.scale(a?-1:1,o?-1:1),l.drawImage(e,-c.width/2,-c.height/2,c.width,c.height),l.restore()}_draw(){if(!this._isActive||!this.$.image)return;let e=this._canvas;this._ctx.clearRect(0,0,e.width,e.height),this._drawImage()}_animateIn({fromViewer:e}){this.$.image&&(this.ref["frame-el"].toggleThumbs(!0),this._transitionToImage(),setTimeout(()=>{this.className=Le({active_from_viewer:e,active_from_editor:!e,inactive_to_editor:!1})}))}_calculateDimensions(){let e=this.$["*cropBox"],t=this.$["*imageBox"],n=this.$["*operations"],{rotate:a}=n,{width:o,height:s}=t,{width:l,height:c}=ii(this._imageSize,a),{width:d,height:u}=e,h=o/l,m=s/c;return[Li(Math.round(d/h),1,l),Li(Math.round(u/m),1,c)]}_calculateCrop(){let e=this.$["*cropBox"],t=this.$["*imageBox"],n=this.$["*operations"],{rotate:a}=n,{width:o,height:s,x:l,y:c}=t,{width:d,height:u}=ii(this._imageSize,a),{x:h,y:m}=e,p=o/d,g=s/u,_=this._calculateDimensions(),y={dimensions:_,coords:[Li(Math.round((h-l)/p),0,d-_[0]),Li(Math.round((m-c)/g),0,u-_[1])]};if(!Ic(y)){console.error("Cropper is trying to create invalid crop object",{payload:y});return}if(!(_[0]===d&&_[1]===u))return y}_commit(){if(!this.isConnected)return;let e=this.$["*operations"],{rotate:t,mirror:n,flip:a}=e,o=this._calculateCrop(),l={...this.$["*editorTransformations"],crop:o,rotate:t,mirror:n,flip:a};this.$["*editorTransformations"]=l}setValue(e,t){console.log(`Apply cropper operation [${e}=${t}]`),this.$["*operations"]={...this.$["*operations"],[e]:t},this._isActive&&(this._alignImage(),this._alignCrop(),this._draw())}getValue(e){return this.$["*operations"][e]}async activate(e,{fromViewer:t}){if(!this._isActive){this._isActive=!0,this._imageSize=e,this.removeEventListener("transitionend",this._reset),this._initCanvas();try{this.$.image=await this._waitForImage(this.$["*originalUrl"],this.$["*editorTransformations"]),this._syncTransformations(),this._alignImage(),this._alignCrop(),this._draw(),this._animateIn({fromViewer:t})}catch(n){console.error("Failed to activate cropper",{error:n})}}}deactivate(){this._isActive&&(this._commit(),this._isActive=!1,this._transitionToCrop(),this.className=Le({active_from_viewer:!1,active_from_editor:!1,inactive_to_editor:!0}),this.ref["frame-el"].toggleThumbs(!1),this.addEventListener("transitionend",this._reset,{once:!0}))}_transitionToCrop(){let e=this._calculateDimensions(),t=Math.min(this.offsetWidth,e[0])/this.$["*cropBox"].width,n=Math.min(this.offsetHeight,e[1])/this.$["*cropBox"].height,a=Math.min(t,n),o=this.$["*cropBox"].x+this.$["*cropBox"].width/2,s=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform=`scale(${a}) translate(${(this.offsetWidth/2-o)/a}px, ${(this.offsetHeight/2-s)/a}px)`,this.style.transformOrigin=`${o}px ${s}px`}_transitionToImage(){let e=this.$["*cropBox"].x+this.$["*cropBox"].width/2,t=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(1)",this.style.transformOrigin=`${e}px ${t}px`}_reset(){this._isActive||(this.$.image=null)}_waitForImage(e,t){let n=this.offsetWidth;t={...t,crop:void 0,rotate:void 0,flip:void 0,mirror:void 0};let a=this.proxyUrl(en(e,n,t)),{promise:o,cancel:s,image:l}=Jr(a),c=this._handleImageLoading(a);return l.addEventListener("load",c,{once:!0}),l.addEventListener("error",c,{once:!0}),this._cancelPreload&&this._cancelPreload(),this._cancelPreload=s,o.then(()=>l).catch(d=>(console.error("Failed to load image",{error:d}),this.$["*networkProblems"]=!0,Promise.resolve(l)))}_handleImageLoading(e){let t="crop",n=this.$["*loadingOperations"];return n.get(t)||n.set(t,new Map),n.get(t).get(e)||(n.set(t,n.get(t).set(e,!0)),this.$["*loadingOperations"]=n),()=>{var a;(a=n==null?void 0:n.get(t))!=null&&a.has(e)&&(n.get(t).delete(e),this.$["*loadingOperations"]=n)}}initCallback(){super.initCallback(),this._observer=new ResizeObserver(([e])=>{e.contentRect.width>0&&e.contentRect.height>0&&this._isActive&&this.$.image&&this._handleResizeDebounced()}),this._observer.observe(this),this.sub("*imageBox",()=>{this._draw()}),this.sub("*cropBox",e=>{this.$.image&&this._commitDebounced()}),setTimeout(()=>{this.sub("*networkProblems",e=>{e||this._isActive&&this.activate(this._imageSize,{fromViewer:!1})})},0)}destroyCallback(){var e;super.destroyCallback(),(e=this._observer)==null||e.disconnect()}}no.template=`
  <canvas class="canvas" ref="canvas-el"></canvas>
  <lr-crop-frame ref="frame-el"></lr-crop-frame>
`;function Hn(i,r,e){let t=Array(e);e--;for(let n=e;n>=0;n--)t[n]=Math.ceil((n*r+(e-n)*i)/e);return t}function Oc(i){return i.reduce((r,e,t)=>t<i.length-1?[...r,[e,i[t+1]]]:r,[])}function Rc(i,r,e){let t=Oc(i).find(([n,a])=>n<=r&&r<=a);return i.map(n=>{let a=Math.abs(t[0]-t[1]),o=Math.abs(r-t[0])/a;return t[0]===n?r>e?1:1-o:t[1]===n?r>=e?o:1:0})}function Mc(i,r){return i.map((e,t)=>e<r?i.length-t:t)}function jn(i,r){let e=jt[i].keypointsNumber,{range:t,zero:n}=jt[i];return[...new Set([...Hn(t[0],n,e+1),...Hn(n,t[1],e+1),n,r])].sort((a,o)=>a-o)}class Uc extends ct{constructor(){super(),this._isActive=!1,this._hidden=!0,this._addKeypointDebounced=Ht(this._addKeypoint.bind(this),600),this.classList.add("inactive_to_cropper")}_handleImageLoading(r){let e=this._operation,t=this.$["*loadingOperations"];return t.get(e)||t.set(e,new Map),t.get(e).get(r)||(t.set(e,t.get(e).set(r,!0)),this.$["*loadingOperations"]=t),()=>{var n;(n=t==null?void 0:t.get(e))!=null&&n.has(r)&&(t.get(e).delete(r),this.$["*loadingOperations"]=t)}}_flush(){window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame(()=>{for(let r of this._keypoints){let{image:e}=r;e&&(e.style.opacity=r.opacity.toString(),e.style.zIndex=r.zIndex.toString())}})}_imageSrc({url:r=this._url,filter:e=this._filter,operation:t,value:n}={}){let a={...this._transformations};t&&(a[t]=e?{name:e,amount:n}:n);let o=this.offsetWidth;return this.proxyUrl(en(r,o,a))}_constructKeypoint(r,e){return{src:this._imageSrc({operation:r,value:e}),image:null,opacity:0,zIndex:0,value:e}}_isSame(r,e){return this._operation===r&&this._filter===e}_addKeypoint(r,e,t){let n=()=>!this._isSame(r,e)||this._value!==t||!!this._keypoints.find(l=>l.value===t);if(n())return;let a=this._constructKeypoint(r,t),o=new Image;o.src=a.src;let s=this._handleImageLoading(a.src);o.addEventListener("load",s,{once:!0}),o.addEventListener("error",s,{once:!0}),a.image=o,o.classList.add("fader-image"),o.addEventListener("load",()=>{if(n())return;let l=this._keypoints,c=l.findIndex(u=>u.value>t),d=c<l.length?l[c].image:null;!this._container||d&&!this._container.contains(d)||(l.splice(c,0,a),this._container.insertBefore(o,d),this._update(r,t))},{once:!0}),o.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}set(r){r=typeof r=="string"?parseInt(r,10):r,this._update(this._operation,r),this._addKeypointDebounced(this._operation,this._filter,r)}_update(r,e){this._operation=r,this._value=e;let{zero:t}=jt[r],n=this._keypoints.map(s=>s.value),a=Rc(n,e,t),o=Mc(n,t);for(let[s,l]of Object.entries(this._keypoints))l.opacity=a[s],l.zIndex=o[s];this._flush()}_createPreviewImage(){let r=new Image;return r.classList.add("fader-image","fader-image--preview"),r.style.opacity="0",r}async _initNodes(){let r=document.createDocumentFragment();this._previewImage=this._previewImage||this._createPreviewImage(),!this.contains(this._previewImage)&&r.appendChild(this._previewImage);let e=document.createElement("div");r.appendChild(e);let t=this._keypoints.map(c=>c.src),{images:n,promise:a,cancel:o}=Mr(t);n.forEach(c=>{let d=this._handleImageLoading(c.src);c.addEventListener("load",d),c.addEventListener("error",d)}),this._cancelLastImages=()=>{o(),this._cancelLastImages=void 0};let s=this._operation,l=this._filter;await a,this._isActive&&this._isSame(s,l)&&(this._container&&this._container.remove(),this._container=e,this._keypoints.forEach((c,d)=>{let u=n[d];u.classList.add("fader-image"),c.image=u,this._container.appendChild(u)}),this.appendChild(r),this._flush())}setTransformations(r){if(this._transformations=r,this._previewImage){let e=this._imageSrc(),t=this._handleImageLoading(e);this._previewImage.src=e,this._previewImage.addEventListener("load",t,{once:!0}),this._previewImage.addEventListener("error",t,{once:!0}),this._previewImage.style.opacity="1",this._previewImage.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}}preload({url:r,filter:e,operation:t,value:n}){this._cancelBatchPreload&&this._cancelBatchPreload();let o=jn(t,n).map(l=>this._imageSrc({url:r,filter:e,operation:t,value:l})),{cancel:s}=Mr(o);this._cancelBatchPreload=s}_setOriginalSrc(r){let e=this._previewImage||this._createPreviewImage();if(!this.contains(e)&&this.appendChild(e),this._previewImage=e,e.src===r){e.style.opacity="1",e.style.transform="scale(1)",this.className=Le({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1});return}e.style.opacity="0";let t=this._handleImageLoading(r);e.addEventListener("error",t,{once:!0}),e.src=r,e.addEventListener("load",()=>{t(),e&&(e.style.opacity="1",e.style.transform="scale(1)",this.className=Le({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}))},{once:!0}),e.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}activate({url:r,operation:e,value:t,filter:n,fromViewer:a}){if(this._isActive=!0,this._hidden=!1,this._url=r,this._operation=e||"initial",this._value=t,this._filter=n,this._fromViewer=a,typeof t!="number"&&!n){let s=this._imageSrc({operation:e,value:t});this._setOriginalSrc(s),this._container&&this._container.remove();return}this._keypoints=jn(e,t).map(s=>this._constructKeypoint(e,s)),this._update(e,t),this._initNodes()}deactivate({hide:r=!0}={}){this._isActive=!1,this._cancelLastImages&&this._cancelLastImages(),this._cancelBatchPreload&&this._cancelBatchPreload(),r&&!this._hidden?(this._hidden=!0,this._previewImage&&(this._previewImage.style.transform="scale(1)"),this.className=Le({active_from_viewer:!1,active_from_cropper:!1,inactive_to_cropper:!0}),this.addEventListener("transitionend",()=>{this._container&&this._container.remove()},{once:!0})):this._container&&this._container.remove()}}const Pc=1;class ao extends ct{initCallback(){super.initCallback(),this.addEventListener("wheel",r=>{r.preventDefault();let{deltaY:e,deltaX:t}=r;Math.abs(t)>Pc?this.scrollLeft+=t:this.scrollLeft+=e})}}ao.template=" <slot></slot> ";function Nc(i){return`
    <lr-btn-ui
      theme="boring"
      ref="tab-toggle-${i}"
      data-id="${i}"
      icon="${i}"
      tabindex="0"
      set="onclick: on.clickTab;"
    >
    </lr-btn-ui>
  `}function Dc(i){return`
    <lr-presence-toggle class="tab-content" set="visible: presence.tabContent.${i}; styles: presence.tabContentStyles">
      <lr-editor-scroller hidden-scrollbar>
        <div class="controls-list_align">
          <div class="controls-list_inner" ref="controls-list-${i}"></div>
        </div>
      </lr-editor-scroller>
    </lr-presence-toggle>
  `}class oo extends ct{constructor(){super();f(this,"_updateInfoTooltip",Ht(()=>{var a,o;let e=this.$["*editorTransformations"],t="",n=!1;if(this.$["*tabId"]===ge.FILTERS)if(n=!0,this.$["*currentFilter"]&&((a=e==null?void 0:e.filter)==null?void 0:a.name)===this.$["*currentFilter"]){let s=((o=e==null?void 0:e.filter)==null?void 0:o.amount)||100;t=this.l10n(this.$["*currentFilter"])+" "+s}else t=this.l10n(tt);else if(this.$["*tabId"]===ge.SLIDERS&&this.$["*currentOperation"]){n=!0;let s=(e==null?void 0:e[this.$["*currentOperation"]])||jt[this.$["*currentOperation"]].zero;t=this.$["*currentOperation"]+" "+s}n&&(this.$["*operationTooltip"]=t),this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",n)},0));this.init$={...this.init$,"*sliderEl":null,"*loadingOperations":new Map,"*showSlider":!1,"*currentFilter":tt,"*currentOperation":null,"*tabId":ge.CROP,showLoader:!1,filters:bc,colorOperations:vc,cropOperations:_c,"*operationTooltip":null,"l10n.cancel":this.l10n("cancel"),"l10n.apply":this.l10n("apply"),"presence.mainToolbar":!0,"presence.subToolbar":!1,"presence.tabContent.crop":!1,"presence.tabContent.sliders":!1,"presence.tabContent.filters":!1,"presence.subTopToolbarStyles":{hidden:"sub-toolbar--top-hidden",visible:"sub-toolbar--visible"},"presence.subBottomToolbarStyles":{hidden:"sub-toolbar--bottom-hidden",visible:"sub-toolbar--visible"},"presence.tabContentStyles":{hidden:"tab-content--hidden",visible:"tab-content--visible"},"on.cancel":e=>{this._cancelPreload&&this._cancelPreload(),this.$["*on.cancel"]()},"on.apply":e=>{this.$["*on.apply"](this.$["*editorTransformations"])},"on.applySlider":e=>{this.ref["slider-el"].apply(),this._onSliderClose()},"on.cancelSlider":e=>{this.ref["slider-el"].cancel(),this._onSliderClose()},"on.clickTab":e=>{let t=e.currentTarget.getAttribute("data-id");this._activateTab(t,{fromViewer:!1})}},this._debouncedShowLoader=Ht(this._showLoader.bind(this),500)}_onSliderClose(){this.$["*showSlider"]=!1,this.$["*tabId"]===ge.SLIDERS&&this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",!1)}_createOperationControl(e){let t=Ur.is&&new Ur;return t.operation=e,t}_createFilterControl(e){let t=Wi.is&&new Wi;return t.filter=e,t}_createToggleControl(e){let t=Rr.is&&new Rr;return t.operation=e,t}_renderControlsList(e){let t=this.ref[`controls-list-${e}`],n=document.createDocumentFragment();e===ge.CROP?this.$.cropOperations.forEach(a=>{let o=this._createToggleControl(a);n.appendChild(o)}):e===ge.FILTERS?[tt,...this.$.filters].forEach(a=>{let o=this._createFilterControl(a);n.appendChild(o)}):e===ge.SLIDERS&&this.$.colorOperations.forEach(a=>{let o=this._createOperationControl(a);n.appendChild(o)}),n.childNodes.forEach((a,o)=>{o===n.childNodes.length-1&&a.classList.add("controls-list_last-item")}),t.innerHTML="",t.appendChild(n)}_activateTab(e,{fromViewer:t}){this.$["*tabId"]=e,e===ge.CROP?(this.$["*faderEl"].deactivate(),this.$["*cropperEl"].activate(this.$["*imageSize"],{fromViewer:t})):(this.$["*faderEl"].activate({url:this.$["*originalUrl"],fromViewer:t}),this.$["*cropperEl"].deactivate());for(let n of Or){let a=n===e,o=this.ref[`tab-toggle-${n}`];o.active=a,a?(this._renderControlsList(e),this._syncTabIndicator()):this._unmountTabControls(n),this.$[`presence.tabContent.${n}`]=a}}_unmountTabControls(e){let t=this.ref[`controls-list-${e}`];t&&(t.innerHTML="")}_syncTabIndicator(){let e=this.ref[`tab-toggle-${this.$["*tabId"]}`],t=this.ref["tabs-indicator"];t.style.transform=`translateX(${e.offsetLeft}px)`}_preloadEditedImage(){if(this.$["*imgContainerEl"]&&this.$["*originalUrl"]){let e=this.$["*imgContainerEl"].offsetWidth,t=this.proxyUrl(en(this.$["*originalUrl"],e,this.$["*editorTransformations"]));this._cancelPreload&&this._cancelPreload();let{cancel:n}=Mr([t]);this._cancelPreload=()=>{n(),this._cancelPreload=void 0}}}_showLoader(e){this.$.showLoader=e}initCallback(){super.initCallback(),this.$["*sliderEl"]=this.ref["slider-el"],this.sub("*imageSize",e=>{e&&setTimeout(()=>{this._activateTab(this.$["*tabId"],{fromViewer:!0})},0)}),this.sub("*editorTransformations",e=>{var n;let t=(n=e==null?void 0:e.filter)==null?void 0:n.name;this.$["*currentFilter"]!==t&&(this.$["*currentFilter"]=t)}),this.sub("*currentFilter",()=>{this._updateInfoTooltip()}),this.sub("*currentOperation",()=>{this._updateInfoTooltip()}),this.sub("*tabId",()=>{this._updateInfoTooltip()}),this.sub("*originalUrl",e=>{this.$["*faderEl"]&&this.$["*faderEl"].deactivate()}),this.sub("*editorTransformations",e=>{this._preloadEditedImage(),this.$["*faderEl"]&&this.$["*faderEl"].setTransformations(e)}),this.sub("*loadingOperations",e=>{let t=!1;for(let[,n]of e.entries()){if(t)break;for(let[,a]of n.entries())if(a){t=!0;break}}this._debouncedShowLoader(t)}),this.sub("*showSlider",e=>{this.$["presence.subToolbar"]=e,this.$["presence.mainToolbar"]=!e}),this._updateInfoTooltip()}}oo.template=`
  <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>
  <div class="info-tooltip_container">
    <div class="info-tooltip_wrapper">
      <div ref="tooltip-el" class="info-tooltip info-tooltip_hidden">{{*operationTooltip}}</div>
    </div>
  </div>
  <div class="toolbar-container">
    <lr-presence-toggle class="sub-toolbar" set="visible: presence.mainToolbar; styles: presence.subTopToolbarStyles">
      <div class="tab-content-row">${Or.map(Dc).join("")}</div>
      <div class="controls-row">
        <lr-btn-ui theme="boring" icon="closeMax" set="onclick: on.cancel"> </lr-btn-ui>
        <div class="tab-toggles">
          <div ref="tabs-indicator" class="tab-toggles_indicator"></div>
          ${Or.map(Nc).join("")}
        </div>
        <lr-btn-ui theme="primary" icon="done" set="onclick: on.apply"> </lr-btn-ui>
      </div>
    </lr-presence-toggle>
    <lr-presence-toggle class="sub-toolbar" set="visible: presence.subToolbar; styles: presence.subBottomToolbarStyles">
      <div class="slider">
        <lr-editor-slider ref="slider-el"></lr-editor-slider>
      </div>
      <div class="controls-row">
        <lr-btn-ui theme="boring" set="@text: l10n.cancel; onclick: on.cancelSlider;"> </lr-btn-ui>
        <lr-btn-ui theme="primary" set="@text: l10n.apply; onclick: on.applySlider;"> </lr-btn-ui>
      </div>
    </lr-presence-toggle>
  </div>
`;class tn extends Q{constructor(){super(),this._iconReversed=!1,this._iconSingle=!1,this._iconHidden=!1,this.init$={...this.init$,text:"",icon:"",iconCss:this._iconCss(),theme:null},this.defineAccessor("active",r=>{r?this.setAttribute("active",""):this.removeAttribute("active")})}_iconCss(){return Le("icon",{icon_left:!this._iconReversed,icon_right:this._iconReversed,icon_hidden:this._iconHidden,icon_single:this._iconSingle})}initCallback(){super.initCallback(),this.sub("icon",r=>{this._iconSingle=!this.$.text,this._iconHidden=!r,this.$.iconCss=this._iconCss()}),this.sub("theme",r=>{r!=="custom"&&(this.className=r)}),this.sub("text",r=>{this._iconSingle=!1}),this.setAttribute("role","button"),this.tabIndex===-1&&(this.tabIndex=0),this.hasAttribute("theme")||this.setAttribute("theme","default")}set reverse(r){this.hasAttribute("reverse")?(this.style.flexDirection="row-reverse",this._iconReversed=!0):(this._iconReversed=!1,this.style.flexDirection=null)}}tn.bindAttributes({text:"text",icon:"icon",reverse:"reverse",theme:"theme"});tn.template=`
  <lr-icon size="20" set="className: iconCss; @name: icon;"></lr-icon>
  <div class="text">{{text}}</div>
`;class so extends Q{constructor(){super(),this._active=!1,this._handleTransitionEndRight=()=>{let r=this.ref["line-el"];r.style.transition="initial",r.style.opacity="0",r.style.transform="translateX(-101%)",this._active&&this._start()}}initCallback(){super.initCallback(),this.defineAccessor("active",r=>{typeof r=="boolean"&&(r?this._start():this._stop())})}_start(){this._active=!0;let{width:r}=this.getBoundingClientRect(),e=this.ref["line-el"];e.style.transition="transform 1s",e.style.opacity="1",e.style.transform=`translateX(${r}px)`,e.addEventListener("transitionend",this._handleTransitionEndRight,{once:!0})}_stop(){this._active=!1}}so.template=`
  <div class="inner">
    <div class="line" ref="line-el"></div>
  </div>
`;const Ii={transition:"transition",visible:"visible",hidden:"hidden"};class lo extends Q{constructor(){super(),this._visible=!1,this._visibleStyle=Ii.visible,this._hiddenStyle=Ii.hidden,this._externalTransitions=!1,this.defineAccessor("styles",r=>{r&&(this._externalTransitions=!0,this._visibleStyle=r.visible,this._hiddenStyle=r.hidden)}),this.defineAccessor("visible",r=>{typeof r=="boolean"&&(this._visible=r,this._handleVisible())})}_handleVisible(){this.style.visibility=this._visible?"inherit":"hidden",cc(this,{[Ii.transition]:!this._externalTransitions,[this._visibleStyle]:this._visible,[this._hiddenStyle]:!this._visible}),this.setAttribute("aria-hidden",this._visible?"false":"true")}initCallback(){super.initCallback(),this.setAttribute("hidden",""),this._externalTransitions||this.classList.add(Ii.transition),this._handleVisible(),setTimeout(()=>this.removeAttribute("hidden"),0)}}lo.template=" <slot></slot> ";class co extends Q{constructor(){super();f(this,"init$",{...this.init$,disabled:!1,min:0,max:100,onInput:null,onChange:null,defaultValue:null,"on.sliderInput":()=>{let e=parseInt(this.ref["input-el"].value,10);this._updateValue(e),this.$.onInput&&this.$.onInput(e)},"on.sliderChange":()=>{let e=parseInt(this.ref["input-el"].value,10);this.$.onChange&&this.$.onChange(e)}});this.setAttribute("with-effects","")}initCallback(){super.initCallback(),this.defineAccessor("disabled",t=>{this.$.disabled=t}),this.defineAccessor("min",t=>{this.$.min=t}),this.defineAccessor("max",t=>{this.$.max=t}),this.defineAccessor("defaultValue",t=>{this.$.defaultValue=t,this.ref["input-el"].value=t,this._updateValue(t)}),this.defineAccessor("zero",t=>{this._zero=t}),this.defineAccessor("onInput",t=>{t&&(this.$.onInput=t)}),this.defineAccessor("onChange",t=>{t&&(this.$.onChange=t)}),this._updateSteps(),this._observer=new ResizeObserver(()=>{this._updateSteps();let t=parseInt(this.ref["input-el"].value,10);this._updateValue(t)}),this._observer.observe(this),this._thumbSize=parseInt(window.getComputedStyle(this).getPropertyValue("--l-thumb-size"),10),setTimeout(()=>{let t=parseInt(this.ref["input-el"].value,10);this._updateValue(t)},0),this.sub("disabled",t=>{let n=this.ref["input-el"];t?n.setAttribute("disabled","disabled"):n.removeAttribute("disabled")});let e=this.ref["input-el"];e.addEventListener("focus",()=>{this.style.setProperty("--color-effect","var(--hover-color-rgb)")}),e.addEventListener("blur",()=>{this.style.setProperty("--color-effect","var(--idle-color-rgb)")})}_updateValue(e){this._updateZeroDot(e);let{width:t}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(e-this.$.min)*(t-this._thumbSize)/100;window.requestAnimationFrame(()=>{this.ref["thumb-el"].style.transform=`translateX(${o}px)`})}_updateZeroDot(e){if(!this._zeroDotEl)return;e===this._zero?this._zeroDotEl.style.opacity="0":this._zeroDotEl.style.opacity="0.2";let{width:t}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(this._zero-this.$.min)*(t-this._thumbSize)/100;window.requestAnimationFrame(()=>{this._zeroDotEl.style.transform=`translateX(${o}px)`})}_updateSteps(){let t=this.ref["steps-el"],{width:n}=t.getBoundingClientRect(),a=Math.ceil(n/2),o=Math.ceil(a/15)-2;if(this._stepsCount===o)return;let s=document.createDocumentFragment(),l=document.createElement("div"),c=document.createElement("div");l.className="minor-step",c.className="border-step",s.appendChild(c);for(let u=0;u<o;u++)s.appendChild(l.cloneNode());s.appendChild(c.cloneNode());for(let u=0;u<o;u++)s.appendChild(l.cloneNode());s.appendChild(c.cloneNode());let d=document.createElement("div");d.className="zero-dot",s.appendChild(d),this._zeroDotEl=d,t.innerHTML="",t.appendChild(s),this._stepsCount=o}destroyCallback(){var e;(e=this._observer)==null||e.disconnect()}}co.template=`
  <div class="steps" ref="steps-el"></div>
  <div ref="thumb-el" class="thumb"></div>
  <input
    class="input"
    type="range"
    ref="input-el"
    tabindex="0"
    set="oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;"
  />
`;class zc extends W{constructor(){super(...arguments);f(this,"activityType",F.activities.CLOUD_IMG_EDIT);f(this,"init$",{...this.init$,cdnUrl:null})}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>this.mountEditor(),onDeactivate:()=>this.unmountEditor()}),this.sub("*focusedEntry",e=>{e&&(this.entry=e,this.entry.subscribe("cdnUrl",t=>{t&&(this.$.cdnUrl=t)}))})}handleApply(e){let t=e.detail;this.entry.setMultipleValues({cdnUrl:t.cdnUrl,cdnUrlModifiers:t.cdnUrlModifiers}),this.historyBack()}handleCancel(){this.historyBack()}mountEditor(){let e=new Xt,t=this.$.cdnUrl;e.setAttribute("ctx-name",this.ctxName),e.setAttribute("cdn-url",t),e.addEventListener("apply",n=>this.handleApply(n)),e.addEventListener("cancel",()=>this.handleCancel()),this.innerHTML="",this.appendChild(e)}unmountEditor(){this.innerHTML=""}}const Vc=function(i){return i.replace(/[\\-\\[]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},Fc=function(i,r="i"){const e=i.split("*").map(Vc);return new RegExp("^"+e.join(".+")+"$",r)};let Bc=i=>Object.keys(i).reduce((e,t)=>{let n=i[t],a=Object.keys(n).reduce((o,s)=>{let l=n[s];return o+`${s}: ${l};`},"");return e+`${t}{${a}}`},"");function Hc({textColor:i,backgroundColor:r,linkColor:e,linkColorHover:t,shadeColor:n}){let a=`solid 1px ${n}`;return Bc({body:{color:i,"background-color":r},".side-bar":{background:"inherit","border-right":a},".main-content":{background:"inherit"},".main-content-header":{background:"inherit"},".main-content-footer":{background:"inherit"},".list-table-row":{color:"inherit"},".list-table-row:hover":{background:n},".list-table-row .list-table-cell-a, .list-table-row .list-table-cell-b":{"border-top":a},".list-table-body .list-items":{"border-bottom":a},".bread-crumbs a":{color:e},".bread-crumbs a:hover":{color:t},".main-content.loading":{background:`${r} url(/static/images/loading_spinner.gif) center no-repeat`,"background-size":"25px 25px"},".list-icons-item":{"background-color":n},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a":{color:e},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a:hover":{color:t},".side-bar-menu a":{color:e},".side-bar-menu a:hover":{color:t},".source-gdrive .side-bar-menu .current, .source-gdrive .side-bar-menu a:hover, .source-gphotos .side-bar-menu .current, .source-gphotos .side-bar-menu a:hover":{color:t},".source-vk .side-bar-menu a":{color:e},".source-vk .side-bar-menu a:hover":{color:t,background:"none"}})}let it={};window.addEventListener("message",i=>{let r;try{r=JSON.parse(i.data)}catch{return}if((r==null?void 0:r.type)in it){let e=it[r.type];for(let[t,n]of e)i.source===t&&n(r)}});const jc=function(i,r,e){i in it||(it[i]=[]),it[i].push([r,e])},Wc=function(i,r){i in it&&(it[i]=it[i].filter(e=>e[0]!==r))};function Gc(i){let r=[];for(let[e,t]of Object.entries(i))t==null||typeof t=="string"&&t.length===0||r.push(`${e}=${encodeURIComponent(t)}`);return r.join("&")}class uo extends W{constructor(){super(...arguments);f(this,"activityType",F.activities.EXTERNAL);f(this,"init$",{...this.init$,activityIcon:"",activityCaption:"",counter:0,onDone:()=>{this.$["*currentActivity"]=F.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()}});f(this,"_iframe",null);f(this,"_inheritedUpdateCssData",this.updateCssData);f(this,"updateCssData",()=>{this.isActivityActive&&(this._inheritedUpdateCssData(),this.applyStyles())})}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{let{externalSourceType:e}=this.activityParams;this.set$({activityCaption:`${e==null?void 0:e[0].toUpperCase()}${e==null?void 0:e.slice(1)}`,activityIcon:e}),this.$.counter=0,this.mountIframe()}}),this.sub("*currentActivity",e=>{e!==this.activityType&&this.unmountIframe()})}sendMessage(e){var t,n;(n=(t=this._iframe)==null?void 0:t.contentWindow)==null||n.postMessage(JSON.stringify(e),"*")}async handleFileSelected(e){console.log(e),this.$.counter=this.$.counter+1;const t=(()=>{if(e.alternatives){const o=qe(this.cfg.externalSourcesPreferredTypes);for(const s of o){const l=Fc(s);for(const[c,d]of Object.entries(e.alternatives))if(l.test(c))return d}}return e.url})();let{filename:n}=e,{externalSourceType:a}=this.activityParams;this.addFileFromUrl(t,{fileName:n,source:a})}handleIframeLoad(){this.applyStyles()}getCssValue(e){return window.getComputedStyle(this).getPropertyValue(e).trim()}applyStyles(){let e={backgroundColor:this.getCssValue("--clr-background-light"),textColor:this.getCssValue("--clr-txt"),shadeColor:this.getCssValue("--clr-shade-lv1"),linkColor:"#157cfc",linkColorHover:"#3891ff"};this.sendMessage({type:"embed-css",style:Hc(e)})}remoteUrl(){var s,l;let e=this.cfg.pubkey,t=(!1).toString(),{externalSourceType:n}=this.activityParams,a={lang:((l=(s=this.getCssData("--l10n-locale-name"))==null?void 0:s.split("-"))==null?void 0:l[0])||"en",public_key:e,images_only:t,pass_window_open:!1,session_key:this.cfg.remoteTabSessionKey},o=new URL(this.cfg.socialBaseUrl);return o.pathname=`/window3/${n}`,o.search=Gc(a),o.toString()}mountIframe(){let e=jr({tag:"iframe",attributes:{src:this.remoteUrl(),marginheight:0,marginwidth:0,frameborder:0,allowTransparency:!0}});e.addEventListener("load",this.handleIframeLoad.bind(this)),this.ref.iframeWrapper.innerHTML="",this.ref.iframeWrapper.appendChild(e),jc("file-selected",e.contentWindow,this.handleFileSelected.bind(this)),this._iframe=e}unmountIframe(){this._iframe&&Wc("file-selected",this._iframe.contentWindow),this.ref.iframeWrapper.innerHTML="",this._iframe=null}}uo.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div>
      <lr-icon set="@name: activityIcon"></lr-icon>
      <span>{{activityCaption}}</span>
    </div>
    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <div class="content">
    <div ref="iframeWrapper" class="iframe-wrapper"></div>
    <div class="toolbar">
      <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel" l10n="cancel"></button>
      <div></div>
      <div class="selected-counter"><span l10n="selected-count"></span>{{counter}}</div>
      <button type="button" class="done-btn primary-btn" set="onclick: onDone; @disabled: !counter">
        <lr-icon name="check"></lr-icon>
      </button>
    </div>
  </div>
`;class rn extends Q{setCurrentTab(r){if(!r)return;[...this.ref.context.querySelectorAll("[tab-ctx]")].forEach(t=>{t.getAttribute("tab-ctx")===r?t.removeAttribute("hidden"):t.setAttribute("hidden","")});for(let t in this._tabMap)t===r?this._tabMap[t].setAttribute("current",""):this._tabMap[t].removeAttribute("current")}initCallback(){super.initCallback(),this._tabMap={},this.defineAccessor("tab-list",r=>{if(!r)return;qe(r).forEach(t=>{let n=jr({tag:"div",attributes:{class:"tab"},properties:{onclick:()=>{this.setCurrentTab(t)}}});n.textContent=this.l10n(t),this.ref.row.appendChild(n),this._tabMap[t]=n})}),this.defineAccessor("default",r=>{this.setCurrentTab(r)}),this.hasAttribute("default")||this.setCurrentTab(Object.keys(this._tabMap)[0])}}rn.bindAttributes({"tab-list":null,default:null});rn.template=`
  <div ref="row" class="tabs-row"></div>
  <div ref="context" class="tabs-context">
    <slot></slot>
  </div>
`;class or extends W{constructor(){super(...arguments);f(this,"processInnerHtml",!0);f(this,"init$",{...this.init$,output:null,filesData:null})}get dict(){return or.dict}get validationInput(){return this._validationInputElement}initCallback(){if(super.initCallback(),this.hasAttribute(this.dict.FORM_INPUT_ATTR)&&(this._dynamicInputsContainer=document.createElement("div"),this.appendChild(this._dynamicInputsContainer),this.hasAttribute(this.dict.INPUT_REQUIRED))){let e=document.createElement("input");e.type="text",e.name="__UPLOADCARE_VALIDATION_INPUT__",e.required=!0,this.appendChild(e),this._validationInputElement=e}this.sub("output",e=>{if(e){if(this.hasAttribute(this.dict.FIRE_EVENT_ATTR)&&this.dispatchEvent(new CustomEvent(this.dict.EVENT_NAME,{bubbles:!0,composed:!0,detail:{timestamp:Date.now(),ctxName:this.ctxName,data:e}})),this.hasAttribute(this.dict.FORM_INPUT_ATTR)){this._dynamicInputsContainer.innerHTML="";let t=e.groupData?[e.groupData.cdnUrl]:e.map(n=>n.cdnUrl);for(let n of t){let a=document.createElement("input");a.type="hidden",a.name=this.getAttribute(this.dict.INPUT_NAME_ATTR)||this.ctxName,a.value=n,this._dynamicInputsContainer.appendChild(a)}this.hasAttribute(this.dict.INPUT_REQUIRED)&&(this._validationInputElement.value=t.length?"__VALUE__":"")}this.hasAttribute(this.dict.CONSOLE_ATTR)&&console.log(e)}},!1),this.sub(this.dict.SRC_CTX_KEY,async e=>{if(!e){this.$.output=null,this.$.filesData=null;return}if(this.$.filesData=e,this.cfg.groupOutput||this.hasAttribute(this.dict.GROUP_ATTR)){let t=e.map(o=>o.uuid);const n=await this.getUploadClientOptions();let a=await El(t,{...n});this.$.output={groupData:a,files:e}}else this.$.output=e},!1)}}or.dict=Object.freeze({SRC_CTX_KEY:"*outputData",EVENT_NAME:"lr-data-output",FIRE_EVENT_ATTR:"use-event",CONSOLE_ATTR:"use-console",GROUP_ATTR:"use-group",FORM_INPUT_ATTR:"use-input",INPUT_NAME_ATTR:"input-name",INPUT_REQUIRED:"input-required"});class Xc extends F{}class ho extends Q{constructor(){super(...arguments);f(this,"init$",{...this.init$,currentText:"",options:[],selectHtml:"",onSelect:e=>{var t;e.preventDefault(),e.stopPropagation(),this.value=this.ref.select.value,this.$.currentText=((t=this.$.options.find(n=>n.value==this.value))==null?void 0:t.text)||"",this.dispatchEvent(new Event("change"))}})}initCallback(){super.initCallback(),this.sub("options",e=>{var n;this.$.currentText=((n=e==null?void 0:e[0])==null?void 0:n.text)||"";let t="";e==null||e.forEach(a=>{t+=`<option value="${a.value}">${a.text}</option>`}),this.$.selectHtml=t})}}ho.template=`
  <button>
    {{currentText}}
    <lr-icon name="select"></lr-icon>
    <select ref="select" set="innerHTML: selectHtml; onchange: onSelect"></select>
  </button>
`;const ce={PLAY:"play",PAUSE:"pause",FS_ON:"fullscreen-on",FS_OFF:"fullscreen-off",VOL_ON:"unmute",VOL_OFF:"mute",CAP_ON:"captions",CAP_OFF:"captions-off"},Wn={requestFullscreen:i=>{i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen&&i.webkitRequestFullscreen()},exitFullscreen:()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}};class He extends Q{constructor(){super(...arguments);f(this,"init$",{...this.init$,src:"",ppIcon:ce.PLAY,fsIcon:ce.FS_ON,volIcon:ce.VOL_ON,capIcon:ce.CAP_OFF,totalTime:"00:00",currentTime:"00:00",progressCssWidth:"0",hasSubtitles:!1,volumeDisabled:!1,volumeValue:0,onPP:()=>{this.togglePlay()},onFs:()=>{this.toggleFullscreen()},onCap:()=>{this.toggleCaptions()},onMute:()=>{this.toggleSound()},onVolChange:e=>{let t=parseFloat(e.currentTarget.$.value);this.setVolume(t)},progressClicked:e=>{let t=this.progress.getBoundingClientRect();this._video.currentTime=this._video.duration*(e.offsetX/t.width)}})}togglePlay(){this._video.paused||this._video.ended?this._video.play():this._video.pause()}toggleFullscreen(){(document.fullscreenElement||document.webkitFullscreenElement)===this?Wn.exitFullscreen():Wn.requestFullscreen(this)}toggleCaptions(){this.$.capIcon===ce.CAP_OFF?(this.$.capIcon=ce.CAP_ON,this._video.textTracks[0].mode="showing",window.localStorage.setItem(He.is+":captions","1")):(this.$.capIcon=ce.CAP_OFF,this._video.textTracks[0].mode="hidden",window.localStorage.removeItem(He.is+":captions"))}toggleSound(){this.$.volIcon===ce.VOL_ON?(this.$.volIcon=ce.VOL_OFF,this.$.volumeDisabled=!0,this._video.muted=!0):(this.$.volIcon=ce.VOL_ON,this.$.volumeDisabled=!1,this._video.muted=!1)}setVolume(e){window.localStorage.setItem(He.is+":volume",e);let t=e?e/100:0;this._video.volume=t}get progress(){return this.ref.progress}_getUrl(e){return e.includes("/")?e:`https://ucarecdn.com/${e}/`}_desc2attrs(e){let t=[];for(let n in e){let a=n==="src"?this._getUrl(e[n]):e[n];t.push(`${n}="${a}"`)}return t.join(" ")}_timeFmt(e){let t=new Date(Math.round(e)*1e3);return[t.getMinutes(),t.getSeconds()].map(n=>n<10?"0"+n:n).join(":")}_initTracks(){[...this._video.textTracks].forEach(e=>{e.mode="hidden"}),window.localStorage.getItem(He.is+":captions")&&this.toggleCaptions()}_castAttributes(){let e=["autoplay","loop","muted"];[...this.attributes].forEach(t=>{e.includes(t.name)&&this._video.setAttribute(t.name,t.value)})}initCallback(){super.initCallback(),this._video=this.ref.video,this._castAttributes(),this._video.addEventListener("play",()=>{this.$.ppIcon=ce.PAUSE,this.setAttribute("playback","")}),this._video.addEventListener("pause",()=>{this.$.ppIcon=ce.PLAY,this.removeAttribute("playback")}),this.addEventListener("fullscreenchange",t=>{console.log(t),document.fullscreenElement===this?this.$.fsIcon=ce.FS_OFF:this.$.fsIcon=ce.FS_ON}),this.sub("src",t=>{if(!t)return;let n=this._getUrl(t);this._video.src=n}),this.sub("video",async t=>{if(!t)return;let n=await(await window.fetch(this._getUrl(t))).json();n.poster&&(this._video.poster=this._getUrl(n.poster));let a="";n==null||n.sources.forEach(o=>{a+=`<source ${this._desc2attrs(o)} />`}),n.tracks&&(n.tracks.forEach(o=>{a+=`<track ${this._desc2attrs(o)} />`}),this.$.hasSubtitles=!0),this._video.innerHTML+=a,this._initTracks(),console.log(n)}),this._video.addEventListener("loadedmetadata",t=>{this.$.currentTime=this._timeFmt(this._video.currentTime),this.$.totalTime=this._timeFmt(this._video.duration)}),this._video.addEventListener("timeupdate",t=>{let n=Math.round(100*(this._video.currentTime/this._video.duration));this.$.progressCssWidth=n+"%",this.$.currentTime=this._timeFmt(this._video.currentTime)});let e=window.localStorage.getItem(He.is+":volume");if(e){let t=parseFloat(e);this.setVolume(t),this.$.volumeValue=t}}}He.template=`
  <div class="video-wrapper">
    <video ref="video" preload="metadata" crossorigin="anonymous"></video>
  </div>

  <div class="toolbar">
    <div class="progress" ref="progress" set -onclick="progressClicked">
      <div class="bar" set -style.width="progressCssWidth"></div>
    </div>

    <div class="tb-block">
      <button set -onclick="onPP">
        <lr-icon set -@name="ppIcon"></lr-icon>
      </button>
      <div class="timer">{{currentTime}} / {{totalTime}}</div>
    </div>

    <div class="tb-block">
      <button set -onclick="onCap" -@hidden="!hasSubtitles">
        <lr-icon set -@name="capIcon"></lr-icon>
      </button>

      <button set -onclick="onMute">
        <lr-icon set -@name="volIcon"></lr-icon>
      </button>

      <lr-range type="range" set -onchange="onVolChange" -@disabled="volumeDisabled" -value="volumeValue"> </lr-range>

      <button set -onclick="onFs">
        <lr-icon set -@name="fsIcon"></lr-icon>
      </button>
    </div>
  </div>
`;He.bindAttributes({video:"video",src:"src"});const qc="css-src";function nn(i){return class extends i{constructor(){super(...arguments);f(this,"renderShadow",!0);f(this,"pauseRender",!0)}shadowReadyCallback(){}initCallback(){super.initCallback(),this.setAttribute("hidden",""),setTimeout(()=>{let e=this.getAttribute(qc);if(e){this.attachShadow({mode:"open"});let t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,t.onload=()=>{window.requestAnimationFrame(()=>{this.render(),window.setTimeout(()=>{this.removeAttribute("hidden"),this.shadowReadyCallback()})})},this.shadowRoot.prepend(t)}else console.error("Attribute `css-src` is required and it is not set. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/")})}}}class an extends nn(Q){}class po extends Q{initCallback(){super.initCallback(),this.subConfigValue("removeCopyright",r=>{this.toggleAttribute("hidden",!!r)})}}f(po,"template",`
    <a
      href="https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4"
      target="_blank noopener"
      class="credits"
      >Powered by Uploadcare</a
    >
  `);class on extends an{constructor(){super(...arguments);f(this,"init$",ka(this));f(this,"_template",null)}static set template(e){this._template=e+"<slot></slot>"}static get template(){return this._template}}class fo extends on{}fo.template=`
  <lr-simple-btn></lr-simple-btn>

  <lr-modal strokes block-body-scrolling>
    <lr-start-from>
      <lr-drop-area with-icon clickable></lr-drop-area>
      <lr-source-list wrap></lr-source-list>
      <lr-copyright></lr-copyright>
    </lr-start-from>
    <lr-upload-list></lr-upload-list>
    <lr-camera-source></lr-camera-source>
    <lr-url-source></lr-url-source>
    <lr-external-source></lr-external-source>
    <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>
  </lr-modal>

  <lr-message-box></lr-message-box>
  <lr-progress-bar-common></lr-progress-bar-common>
`;class mo extends on{constructor(){super(...arguments);f(this,"pauseRender",!0)}shadowReadyCallback(){const e=this.ref.uBlock;this.sub("*currentActivity",t=>{t||(this.$["*currentActivity"]=e.initActivity||F.activities.START_FROM)}),this.sub("*uploadList",t=>{(t==null?void 0:t.length)===0&&(this.$["*currentActivity"]=e.initActivity||F.activities.START_FROM)}),this.sub(he("sourceList"),t=>{t!=="local"&&(this.$[he("sourceList")]="local")}),this.sub(he("confirmUpload"),t=>{t!==!1&&(this.$[he("confirmUpload")]=!1)})}}mo.template=`
  <lr-start-from>
    <lr-drop-area clickable l10n="choose-file"></lr-drop-area>
    <lr-copyright></lr-copyright>
  </lr-start-from>
  <lr-upload-list ref="uBlock"></lr-upload-list>
  <lr-message-box></lr-message-box>
`;class go extends on{shadowReadyCallback(){const r=this.ref.uBlock;this.sub("*currentActivity",e=>{e||(this.$["*currentActivity"]=r.initActivity||F.activities.START_FROM)})}}go.template=` <lr-start-from>
    <lr-drop-area with-icon clickable></lr-drop-area>
    <lr-source-list wrap></lr-source-list>
    <lr-copyright></lr-copyright>
  </lr-start-from>
  <lr-upload-list ref="uBlock"></lr-upload-list>
  <lr-camera-source></lr-camera-source>
  <lr-url-source></lr-url-source>
  <lr-external-source></lr-external-source>
  <lr-message-box></lr-message-box>
  <lr-progress-bar></lr-progress-bar>
  <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>`;class Yc extends nn(Xt){shadowReadyCallback(){this.__shadowReady=!0,this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}async initEditor(){this.__shadowReady&&await super.initEditor()}}function sn(i){for(let r in i){let e=[...r].reduce((t,n)=>(n.toUpperCase()===n&&(n="-"+n.toLowerCase()),t+=n),"");e.startsWith("-")&&(e=e.replace("-","")),e.startsWith("lr-")||(e="lr-"+e),i[r].reg&&i[r].reg(e)}}const wr="LR";async function Kc(i,r=!1){return new Promise((e,t)=>{if(typeof document!="object"){e(null);return}if(typeof window=="object"&&window[wr]){e(window[wr]);return}let n=document.createElement("script");n.async=!0,n.src=i,n.onerror=()=>{t()},n.onload=()=>{let a=window[wr];r&&sn(a),e(a)},document.head.appendChild(n)})}const Zc=Object.freeze(Object.defineProperty({__proto__:null,ActivityBlock:F,ActivityHeader:Xc,BaseComponent:Ki,Block:Q,CameraSource:Wa,CloudImageEditor:Yc,CloudImageEditorActivity:zc,CloudImageEditorBlock:Xt,Config:Ra,ConfirmationDialog:Xa,Copyright:po,CropFrame:io,Data:X,DataOutput:or,DropArea:Zr,EditorCropButtonControl:Rr,EditorFilterControl:Wi,EditorImageCropper:no,EditorImageFader:Uc,EditorOperationControl:Ur,EditorScroller:ao,EditorSlider:ro,EditorToolbar:oo,ExternalSource:uo,FileItem:yt,FilePreview:Qr,FileUploaderInline:go,FileUploaderMinimal:mo,FileUploaderRegular:fo,Icon:Yr,Img:Yl,LineLoaderUi:so,LrBtnUi:tn,MessageBox:Ba,Modal:we,PACKAGE_NAME:Ia,PACKAGE_VERSION:Oa,PresenceToggle:lo,ProgressBar:Ya,ProgressBarCommon:qa,Select:ho,ShadowWrapper:an,SimpleBtn:Va,SliderUi:co,SourceBtn:rr,SourceList:rc,StartFrom:Kl,Tabs:rn,UploadCtxProvider:sc,UploadDetails:Ga,UploadList:Ha,UploaderBlock:W,UrlSource:ja,Video:He,connectBlocksFrom:Kc,registerBlocks:sn,shadowed:nn,toKebabCase:_t},Symbol.toStringTag,{value:"Module"})),Qc=`:where(.lr-wgt-cfg,.lr-wgt-common),:host{--cfg-pubkey: "YOUR_PUBLIC_KEY";--cfg-multiple: 1;--cfg-multiple-min: 0;--cfg-multiple-max: 0;--cfg-confirm-upload: 0;--cfg-img-only: 0;--cfg-accept: "";--cfg-external-sources-preferred-types: "";--cfg-store: "auto";--cfg-camera-mirror: 1;--cfg-source-list: "local, url, camera, dropbox, gdrive";--cfg-max-local-file-size-bytes: 0;--cfg-thumb-size: 76;--cfg-show-empty-list: 0;--cfg-use-local-image-editor: 0;--cfg-use-cloud-image-editor: 1;--cfg-remove-copyright: 0;--cfg-modal-scroll-lock: 1;--cfg-modal-backdrop-strokes: 0;--cfg-source-list-wrap: 1;--cfg-init-activity: "start-from";--cfg-done-activity: "";--cfg-remote-tab-session-key: "";--cfg-cdn-cname: "https://ucarecdn.com";--cfg-base-url: "https://upload.uploadcare.com";--cfg-social-base-url: "https://social.uploadcare.com";--cfg-secure-signature: "";--cfg-secure-expire: "";--cfg-secure-delivery-proxy: "";--cfg-retry-throttled-request-max-times: 1;--cfg-multipart-min-file-size: 26214400;--cfg-multipart-chunk-size: 5242880;--cfg-max-concurrent-requests: 10;--cfg-multipart-max-concurrent-requests: 4;--cfg-multipart-max-attempts: 3;--cfg-check-for-url-duplicates: 0;--cfg-save-url-for-recurrent-uploads: 0;--cfg-group-output: 0;--cfg-user-agent-integration: ""}:where(.lr-wgt-icons,.lr-wgt-common),:host{--icon-default: "m11.5014.392135c.2844-.253315.7134-.253315.9978 0l6.7037 5.971925c.3093.27552.3366.74961.0611 1.05889-.2755.30929-.7496.33666-1.0589.06113l-5.4553-4.85982v13.43864c0 .4142-.3358.75-.75.75s-.75-.3358-.75-.75v-13.43771l-5.45427 4.85889c-.30929.27553-.78337.24816-1.0589-.06113-.27553-.30928-.24816-.78337.06113-1.05889zm-10.644466 16.336765c.414216 0 .749996.3358.749996.75v4.9139h20.78567v-4.9139c0-.4142.3358-.75.75-.75.4143 0 .75.3358.75.75v5.6639c0 .4143-.3357.75-.75.75h-22.285666c-.414214 0-.75-.3357-.75-.75v-5.6639c0-.4142.335786-.75.75-.75z";--icon-file: "m2.89453 1.2012c0-.473389.38376-.857145.85714-.857145h8.40003c.2273 0 .4453.090306.6061.251051l8.4 8.400004c.1607.16074.251.37876.251.60609v13.2c0 .4734-.3837.8571-.8571.8571h-16.80003c-.47338 0-.85714-.3837-.85714-.8571zm1.71429.85714v19.88576h15.08568v-11.4858h-7.5428c-.4734 0-.8572-.3837-.8572-.8571v-7.54286zm8.39998 1.21218 5.4736 5.47353-5.4736.00001z";--icon-close: "m4.60395 4.60395c.29289-.2929.76776-.2929 1.06066 0l6.33539 6.33535 6.3354-6.33535c.2929-.2929.7677-.2929 1.0606 0 .2929.29289.2929.76776 0 1.06066l-6.3353 6.33539 6.3353 6.3354c.2929.2929.2929.7677 0 1.0606s-.7677.2929-1.0606 0l-6.3354-6.3353-6.33539 6.3353c-.2929.2929-.76777.2929-1.06066 0-.2929-.2929-.2929-.7677 0-1.0606l6.33535-6.3354-6.33535-6.33539c-.2929-.2929-.2929-.76777 0-1.06066z";--icon-collapse: "M3.11572 12C3.11572 11.5858 3.45151 11.25 3.86572 11.25H20.1343C20.5485 11.25 20.8843 11.5858 20.8843 12C20.8843 12.4142 20.5485 12.75 20.1343 12.75H3.86572C3.45151 12.75 3.11572 12.4142 3.11572 12Z";--icon-expand: "M12.0001 8.33716L3.53033 16.8068C3.23743 17.0997 2.76256 17.0997 2.46967 16.8068C2.17678 16.5139 2.17678 16.0391 2.46967 15.7462L11.0753 7.14067C11.1943 7.01825 11.3365 6.92067 11.4936 6.8536C11.6537 6.78524 11.826 6.75 12.0001 6.75C12.1742 6.75 12.3465 6.78524 12.5066 6.8536C12.6637 6.92067 12.8059 7.01826 12.925 7.14068L21.5304 15.7462C21.8233 16.0391 21.8233 16.5139 21.5304 16.8068C21.2375 17.0997 20.7627 17.0997 20.4698 16.8068L12.0001 8.33716Z";--icon-info: "M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z";--icon-error: "M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z";--icon-arrow-down: "m11.5009 23.0302c.2844.2533.7135.2533.9978 0l9.2899-8.2758c.3092-.2756.3366-.7496.0611-1.0589s-.7496-.3367-1.0589-.0612l-8.0417 7.1639v-19.26834c0-.41421-.3358-.749997-.75-.749997s-.75.335787-.75.749997v19.26704l-8.04025-7.1626c-.30928-.2755-.78337-.2481-1.05889.0612-.27553.3093-.24816.7833.06112 1.0589z";--icon-upload: "m11.5014.392135c.2844-.253315.7134-.253315.9978 0l6.7037 5.971925c.3093.27552.3366.74961.0611 1.05889-.2755.30929-.7496.33666-1.0589.06113l-5.4553-4.85982v13.43864c0 .4142-.3358.75-.75.75s-.75-.3358-.75-.75v-13.43771l-5.45427 4.85889c-.30929.27553-.78337.24816-1.0589-.06113-.27553-.30928-.24816-.78337.06113-1.05889zm-10.644466 16.336765c.414216 0 .749996.3358.749996.75v4.9139h20.78567v-4.9139c0-.4142.3358-.75.75-.75.4143 0 .75.3358.75.75v5.6639c0 .4143-.3357.75-.75.75h-22.285666c-.414214 0-.75-.3357-.75-.75v-5.6639c0-.4142.335786-.75.75-.75z";--icon-local: "m3 3.75c-.82843 0-1.5.67157-1.5 1.5v13.5c0 .8284.67157 1.5 1.5 1.5h18c.8284 0 1.5-.6716 1.5-1.5v-9.75c0-.82843-.6716-1.5-1.5-1.5h-9c-.2634 0-.5076-.13822-.6431-.36413l-2.03154-3.38587zm-3 1.5c0-1.65685 1.34315-3 3-3h6.75c.2634 0 .5076.13822.6431.36413l2.0315 3.38587h8.5754c1.6569 0 3 1.34315 3 3v9.75c0 1.6569-1.3431 3-3 3h-18c-1.65685 0-3-1.3431-3-3z";--icon-url: "m19.1099 3.67026c-1.7092-1.70917-4.5776-1.68265-6.4076.14738l-2.2212 2.22122c-.2929.29289-.7678.29289-1.0607 0-.29289-.29289-.29289-.76777 0-1.06066l2.2212-2.22122c2.376-2.375966 6.1949-2.481407 8.5289-.14738l1.2202 1.22015c2.334 2.33403 2.2286 6.15294-.1474 8.52895l-2.2212 2.2212c-.2929.2929-.7678.2929-1.0607 0s-.2929-.7678 0-1.0607l2.2212-2.2212c1.8301-1.83003 1.8566-4.69842.1474-6.40759zm-3.3597 4.57991c.2929.29289.2929.76776 0 1.06066l-6.43918 6.43927c-.29289.2928-.76777.2928-1.06066 0-.29289-.2929-.29289-.7678 0-1.0607l6.43924-6.43923c.2929-.2929.7677-.2929 1.0606 0zm-9.71158 1.17048c.29289.29289.29289.76775 0 1.06065l-2.22123 2.2212c-1.83002 1.8301-1.85654 4.6984-.14737 6.4076l1.22015 1.2202c1.70917 1.7091 4.57756 1.6826 6.40763-.1474l2.2212-2.2212c.2929-.2929.7677-.2929 1.0606 0s.2929.7677 0 1.0606l-2.2212 2.2212c-2.37595 2.376-6.19486 2.4815-8.52889.1474l-1.22015-1.2201c-2.334031-2.3341-2.22859-6.153.14737-8.5289l2.22123-2.22125c.29289-.2929.76776-.2929 1.06066 0z";--icon-camera: "m7.65 2.55c.14164-.18885.36393-.3.6-.3h7.5c.2361 0 .4584.11115.6.3l2.025 2.7h2.625c1.6569 0 3 1.34315 3 3v10.5c0 1.6569-1.3431 3-3 3h-18c-1.65685 0-3-1.3431-3-3v-10.5c0-1.65685 1.34315-3 3-3h2.625zm.975 1.2-2.025 2.7c-.14164.18885-.36393.3-.6.3h-3c-.82843 0-1.5.67157-1.5 1.5v10.5c0 .8284.67157 1.5 1.5 1.5h18c.8284 0 1.5-.6716 1.5-1.5v-10.5c0-.82843-.6716-1.5-1.5-1.5h-3c-.2361 0-.4584-.11115-.6-.3l-2.025-2.7zm3.375 6c-1.864 0-3.375 1.511-3.375 3.375s1.511 3.375 3.375 3.375 3.375-1.511 3.375-3.375-1.511-3.375-3.375-3.375zm-4.875 3.375c0-2.6924 2.18261-4.875 4.875-4.875 2.6924 0 4.875 2.1826 4.875 4.875s-2.1826 4.875-4.875 4.875c-2.69239 0-4.875-2.1826-4.875-4.875z";--icon-dots: "M16,12A2,2 0 0,1 18,10A2,2 0 0,1 20,12A2,2 0 0,1 18,14A2,2 0 0,1 16,12M10,12A2,2 0 0,1 12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12M4,12A2,2 0 0,1 6,10A2,2 0 0,1 8,12A2,2 0 0,1 6,14A2,2 0 0,1 4,12Z";--icon-back: "M20.251 12.0001C20.251 12.4143 19.9152 12.7501 19.501 12.7501L6.06696 12.7501L11.7872 18.6007C12.0768 18.8968 12.0715 19.3717 11.7753 19.6613C11.4791 19.9508 11.0043 19.9455 10.7147 19.6493L4.13648 12.9213C4.01578 12.8029 3.91947 12.662 3.85307 12.5065C3.78471 12.3464 3.74947 12.1741 3.74947 12C3.74947 11.8259 3.78471 11.6536 3.85307 11.4935C3.91947 11.338 4.01578 11.1971 4.13648 11.0787L10.7147 4.35068C11.0043 4.0545 11.4791 4.04916 11.7753 4.33873C12.0715 4.62831 12.0768 5.10315 11.7872 5.39932L6.06678 11.2501L19.501 11.2501C19.9152 11.2501 20.251 11.5859 20.251 12.0001Z";--icon-remove: "m6.35673 9.71429c-.76333 0-1.35856.66121-1.27865 1.42031l1.01504 9.6429c.06888.6543.62067 1.1511 1.27865 1.1511h9.25643c.658 0 1.2098-.4968 1.2787-1.1511l1.015-9.6429c.0799-.7591-.5153-1.42031-1.2786-1.42031zm.50041-4.5v.32142h-2.57143c-.71008 0-1.28571.57564-1.28571 1.28572s.57563 1.28571 1.28571 1.28571h15.42859c.7101 0 1.2857-.57563 1.2857-1.28571s-.5756-1.28572-1.2857-1.28572h-2.5714v-.32142c0-1.77521-1.4391-3.21429-3.2143-3.21429h-3.8572c-1.77517 0-3.21426 1.43908-3.21426 3.21429zm7.07146-.64286c.355 0 .6428.28782.6428.64286v.32142h-5.14283v-.32142c0-.35504.28782-.64286.64283-.64286z";--icon-edit: "M3.96371 14.4792c-.15098.151-.25578.3419-.3021.5504L2.52752 20.133c-.17826.8021.53735 1.5177 1.33951 1.3395l5.10341-1.1341c.20844-.0463.39934-.1511.55032-.3021l8.05064-8.0507-5.557-5.55702-8.05069 8.05062ZM13.4286 5.01437l5.557 5.55703 2.0212-2.02111c.6576-.65765.6576-1.72393 0-2.38159l-3.1755-3.17546c-.6577-.65765-1.7239-.65765-2.3816 0l-2.0211 2.02113Z";--icon-detail: "M5,3C3.89,3 3,3.89 3,5V19C3,20.11 3.89,21 5,21H19C20.11,21 21,20.11 21,19V5C21,3.89 20.11,3 19,3H5M5,5H19V19H5V5M7,7V9H17V7H7M7,11V13H17V11H7M7,15V17H14V15H7Z";--icon-select: "M7,10L12,15L17,10H7Z";--icon-check: "m12 22c5.5228 0 10-4.4772 10-10 0-5.52285-4.4772-10-10-10-5.52285 0-10 4.47715-10 10 0 5.5228 4.47715 10 10 10zm4.7071-11.4929-5.9071 5.9071-3.50711-3.5071c-.39052-.3905-.39052-1.0237 0-1.4142.39053-.3906 1.02369-.3906 1.41422 0l2.09289 2.0929 4.4929-4.49294c.3905-.39052 1.0237-.39052 1.4142 0 .3905.39053.3905 1.02374 0 1.41424z";--icon-add: "M12.75 21C12.75 21.4142 12.4142 21.75 12 21.75C11.5858 21.75 11.25 21.4142 11.25 21V12.7499H3C2.58579 12.7499 2.25 12.4141 2.25 11.9999C2.25 11.5857 2.58579 11.2499 3 11.2499H11.25V3C11.25 2.58579 11.5858 2.25 12 2.25C12.4142 2.25 12.75 2.58579 12.75 3V11.2499H21C21.4142 11.2499 21.75 11.5857 21.75 11.9999C21.75 12.4141 21.4142 12.7499 21 12.7499H12.75V21Z";--icon-edit-file: "m12.1109 6c.3469-1.69213 1.8444-2.96484 3.6391-2.96484s3.2922 1.27271 3.6391 2.96484h2.314c.4142 0 .75.33578.75.75 0 .41421-.3358.75-.75.75h-2.314c-.3469 1.69213-1.8444 2.9648-3.6391 2.9648s-3.2922-1.27267-3.6391-2.9648h-9.81402c-.41422 0-.75001-.33579-.75-.75 0-.41422.33578-.75.75-.75zm3.6391-1.46484c-1.2232 0-2.2148.99162-2.2148 2.21484s.9916 2.21484 2.2148 2.21484 2.2148-.99162 2.2148-2.21484-.9916-2.21484-2.2148-2.21484zm-11.1391 11.96484c.34691-1.6921 1.84437-2.9648 3.6391-2.9648 1.7947 0 3.2922 1.2727 3.6391 2.9648h9.814c.4142 0 .75.3358.75.75s-.3358.75-.75.75h-9.814c-.3469 1.6921-1.8444 2.9648-3.6391 2.9648-1.79473 0-3.29219-1.2727-3.6391-2.9648h-2.31402c-.41422 0-.75-.3358-.75-.75s.33578-.75.75-.75zm3.6391-1.4648c-1.22322 0-2.21484.9916-2.21484 2.2148s.99162 2.2148 2.21484 2.2148 2.2148-.9916 2.2148-2.2148-.99158-2.2148-2.2148-2.2148z";--icon-remove-file: "m11.9554 3.29999c-.7875 0-1.5427.31281-2.0995.86963-.49303.49303-.79476 1.14159-.85742 1.83037h5.91382c-.0627-.68878-.3644-1.33734-.8575-1.83037-.5568-.55682-1.312-.86963-2.0994-.86963zm4.461 2.7c-.0656-1.08712-.5264-2.11657-1.3009-2.89103-.8381-.83812-1.9749-1.30897-3.1601-1.30897-1.1853 0-2.32204.47085-3.16016 1.30897-.77447.77446-1.23534 1.80391-1.30087 2.89103h-2.31966c-.03797 0-.07529.00282-.11174.00827h-1.98826c-.41422 0-.75.33578-.75.75 0 .41421.33578.75.75.75h1.35v11.84174c0 .7559.30026 1.4808.83474 2.0152.53448.5345 1.25939.8348 2.01526.8348h9.44999c.7559 0 1.4808-.3003 2.0153-.8348.5344-.5344.8347-1.2593.8347-2.0152v-11.84174h1.35c.4142 0 .75-.33579.75-.75 0-.41422-.3358-.75-.75-.75h-1.9883c-.0364-.00545-.0737-.00827-.1117-.00827zm-10.49169 1.50827v11.84174c0 .358.14223.7014.3954.9546.25318.2532.59656.3954.9546.3954h9.44999c.358 0 .7014-.1422.9546-.3954s.3954-.5966.3954-.9546v-11.84174z";--icon-trash-file: var(--icon-remove);--icon-upload-error: var(--icon-error);--icon-fullscreen: "M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z";--icon-fullscreen-exit: "M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z";--icon-badge-success: "M10.5 18.2044L18.0992 10.0207C18.6629 9.41362 18.6277 8.46452 18.0207 7.90082C17.4136 7.33711 16.4645 7.37226 15.9008 7.97933L10.5 13.7956L8.0992 11.2101C7.53549 10.603 6.5864 10.5679 5.97933 11.1316C5.37226 11.6953 5.33711 12.6444 5.90082 13.2515L10.5 18.2044Z";--icon-badge-error: "m13.6 18.4c0 .8837-.7164 1.6-1.6 1.6-.8837 0-1.6-.7163-1.6-1.6s.7163-1.6 1.6-1.6c.8836 0 1.6.7163 1.6 1.6zm-1.6-13.9c.8284 0 1.5.67157 1.5 1.5v7c0 .8284-.6716 1.5-1.5 1.5s-1.5-.6716-1.5-1.5v-7c0-.82843.6716-1.5 1.5-1.5z";--icon-about: "M11.152 14.12v.1h1.523v-.1c.007-.409.053-.752.138-1.028.086-.277.22-.517.405-.72.188-.202.434-.397.735-.586.32-.191.593-.412.82-.66.232-.249.41-.531.533-.847.125-.32.187-.678.187-1.076 0-.579-.137-1.085-.41-1.518a2.717 2.717 0 0 0-1.14-1.018c-.49-.245-1.062-.367-1.715-.367-.597 0-1.142.114-1.636.34-.49.228-.884.564-1.182 1.008-.299.44-.46.98-.485 1.619h1.62c.024-.377.118-.684.282-.922.163-.241.369-.419.617-.532.25-.114.51-.17.784-.17.301 0 .575.063.82.191.248.124.447.302.597.533.149.23.223.504.223.82 0 .263-.05.502-.149.72-.1.216-.234.408-.405.574a3.48 3.48 0 0 1-.575.453c-.33.199-.613.42-.847.66-.234.242-.415.558-.543.949-.125.39-.19.916-.197 1.577ZM11.205 17.15c.21.206.46.31.75.31.196 0 .374-.049.534-.144.16-.096.287-.224.383-.384.1-.163.15-.343.15-.538a1 1 0 0 0-.32-.746 1.019 1.019 0 0 0-.746-.314c-.291 0-.542.105-.751.314-.21.206-.314.455-.314.746 0 .295.104.547.314.756ZM24 12c0 6.627-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0s12 5.373 12 12Zm-1.5 0c0 5.799-4.701 10.5-10.5 10.5S1.5 17.799 1.5 12 6.201 1.5 12 1.5 22.5 6.201 22.5 12Z";--icon-edit-rotate: "M16.89,15.5L18.31,16.89C19.21,15.73 19.76,14.39 19.93,13H17.91C17.77,13.87 17.43,14.72 16.89,15.5M13,17.9V19.92C14.39,19.75 15.74,19.21 16.9,18.31L15.46,16.87C14.71,17.41 13.87,17.76 13,17.9M19.93,11C19.76,9.61 19.21,8.27 18.31,7.11L16.89,8.53C17.43,9.28 17.77,10.13 17.91,11M15.55,5.55L11,1V4.07C7.06,4.56 4,7.92 4,12C4,16.08 7.05,19.44 11,19.93V17.91C8.16,17.43 6,14.97 6,12C6,9.03 8.16,6.57 11,6.09V10L15.55,5.55Z";--icon-edit-flip-v: "M3 15V17H5V15M15 19V21H17V19M19 3H5C3.9 3 3 3.9 3 5V9H5V5H19V9H21V5C21 3.9 20.1 3 19 3M21 19H19V21C20.1 21 21 20.1 21 19M1 11V13H23V11M7 19V21H9V19M19 15V17H21V15M11 19V21H13V19M3 19C3 20.1 3.9 21 5 21V19Z";--icon-edit-flip-h: "M15 21H17V19H15M19 9H21V7H19M3 5V19C3 20.1 3.9 21 5 21H9V19H5V5H9V3H5C3.9 3 3 3.9 3 5M19 3V5H21C21 3.9 20.1 3 19 3M11 23H13V1H11M19 17H21V15H19M15 5H17V3H15M19 13H21V11H19M19 21C20.1 21 21 20.1 21 19H19Z";--icon-edit-brightness: "M12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18M20,15.31L23.31,12L20,8.69V4H15.31L12,0.69L8.69,4H4V8.69L0.69,12L4,15.31V20H8.69L12,23.31L15.31,20H20V15.31Z";--icon-edit-contrast: "M12,20C9.79,20 7.79,19.1 6.34,17.66L17.66,6.34C19.1,7.79 20,9.79 20,12A8,8 0 0,1 12,20M6,8H8V6H9.5V8H11.5V9.5H9.5V11.5H8V9.5H6M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,16H17V14.5H12V16Z";--icon-edit-saturation: "M3,13A9,9 0 0,0 12,22C12,17 7.97,13 3,13M12,5.5A2.5,2.5 0 0,1 14.5,8A2.5,2.5 0 0,1 12,10.5A2.5,2.5 0 0,1 9.5,8A2.5,2.5 0 0,1 12,5.5M5.6,10.25A2.5,2.5 0 0,0 8.1,12.75C8.63,12.75 9.12,12.58 9.5,12.31C9.5,12.37 9.5,12.43 9.5,12.5A2.5,2.5 0 0,0 12,15A2.5,2.5 0 0,0 14.5,12.5C14.5,12.43 14.5,12.37 14.5,12.31C14.88,12.58 15.37,12.75 15.9,12.75C17.28,12.75 18.4,11.63 18.4,10.25C18.4,9.25 17.81,8.4 16.97,8C17.81,7.6 18.4,6.74 18.4,5.75C18.4,4.37 17.28,3.25 15.9,3.25C15.37,3.25 14.88,3.41 14.5,3.69C14.5,3.63 14.5,3.56 14.5,3.5A2.5,2.5 0 0,0 12,1A2.5,2.5 0 0,0 9.5,3.5C9.5,3.56 9.5,3.63 9.5,3.69C9.12,3.41 8.63,3.25 8.1,3.25A2.5,2.5 0 0,0 5.6,5.75C5.6,6.74 6.19,7.6 7.03,8C6.19,8.4 5.6,9.25 5.6,10.25M12,22A9,9 0 0,0 21,13C16,13 12,17 12,22Z";--icon-edit-crop: "M7,17V1H5V5H1V7H5V17A2,2 0 0,0 7,19H17V23H19V19H23V17M17,15H19V7C19,5.89 18.1,5 17,5H9V7H17V15Z";--icon-edit-text: "M18.5,4L19.66,8.35L18.7,8.61C18.25,7.74 17.79,6.87 17.26,6.43C16.73,6 16.11,6 15.5,6H13V16.5C13,17 13,17.5 13.33,17.75C13.67,18 14.33,18 15,18V19H9V18C9.67,18 10.33,18 10.67,17.75C11,17.5 11,17 11,16.5V6H8.5C7.89,6 7.27,6 6.74,6.43C6.21,6.87 5.75,7.74 5.3,8.61L4.34,8.35L5.5,4H18.5Z";--icon-edit-draw: "m21.879394 2.1631238c-1.568367-1.62768627-4.136546-1.53831744-5.596267.1947479l-8.5642801 10.1674753c-1.4906533-.224626-3.061232.258204-4.2082427 1.448604-1.0665468 1.106968-1.0997707 2.464806-1.1203996 3.308068-.00142.05753-.00277.113001-.00439.16549-.02754.894146-.08585 1.463274-.5821351 2.069648l-.80575206.98457.88010766.913285c1.0539516 1.093903 2.6691689 1.587048 4.1744915 1.587048 1.5279113 0 3.2235468-.50598 4.4466094-1.775229 1.147079-1.190514 1.612375-2.820653 1.395772-4.367818l9.796763-8.8879697c1.669907-1.5149954 1.75609-4.1802333.187723-5.8079195zm-16.4593821 13.7924592c.8752943-.908358 2.2944227-.908358 3.1697054 0 .8752942.908358.8752942 2.381259 0 3.289617-.5909138.61325-1.5255389.954428-2.53719.954428-.5223687 0-.9935663-.09031-1.3832112-.232762.3631253-.915463.3952949-1.77626.4154309-2.429737.032192-1.045425.072224-1.308557.3352649-1.581546z";--icon-edit-guides: "M1.39,18.36L3.16,16.6L4.58,18L5.64,16.95L4.22,15.54L5.64,14.12L8.11,16.6L9.17,15.54L6.7,13.06L8.11,11.65L9.53,13.06L10.59,12L9.17,10.59L10.59,9.17L13.06,11.65L14.12,10.59L11.65,8.11L13.06,6.7L14.47,8.11L15.54,7.05L14.12,5.64L15.54,4.22L18,6.7L19.07,5.64L16.6,3.16L18.36,1.39L22.61,5.64L5.64,22.61L1.39,18.36Z";--icon-edit-color: "M17.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,9A1.5,1.5 0 0,1 19,10.5A1.5,1.5 0 0,1 17.5,12M14.5,8A1.5,1.5 0 0,1 13,6.5A1.5,1.5 0 0,1 14.5,5A1.5,1.5 0 0,1 16,6.5A1.5,1.5 0 0,1 14.5,8M9.5,8A1.5,1.5 0 0,1 8,6.5A1.5,1.5 0 0,1 9.5,5A1.5,1.5 0 0,1 11,6.5A1.5,1.5 0 0,1 9.5,8M6.5,12A1.5,1.5 0 0,1 5,10.5A1.5,1.5 0 0,1 6.5,9A1.5,1.5 0 0,1 8,10.5A1.5,1.5 0 0,1 6.5,12M12,3A9,9 0 0,0 3,12A9,9 0 0,0 12,21A1.5,1.5 0 0,0 13.5,19.5C13.5,19.11 13.35,18.76 13.11,18.5C12.88,18.23 12.73,17.88 12.73,17.5A1.5,1.5 0 0,1 14.23,16H16A5,5 0 0,0 21,11C21,6.58 16.97,3 12,3Z";--icon-edit-resize: "M10.59,12L14.59,8H11V6H18V13H16V9.41L12,13.41V16H20V4H8V12H10.59M22,2V18H12V22H2V12H6V2H22M10,14H4V20H10V14Z";--icon-external-source-placeholder: "M6.341 3.27a10.5 10.5 0 0 1 5.834-1.77.75.75 0 0 0 0-1.5 12 12 0 1 0 12 12 .75.75 0 0 0-1.5 0A10.5 10.5 0 1 1 6.34 3.27Zm14.145 1.48a.75.75 0 1 0-1.06-1.062L9.925 13.19V7.95a.75.75 0 1 0-1.5 0V15c0 .414.336.75.75.75h7.05a.75.75 0 0 0 0-1.5h-5.24l9.501-9.5Z";--icon-facebook: "m12 1.5c-5.79901 0-10.5 4.70099-10.5 10.5 0 4.9427 3.41586 9.0888 8.01562 10.2045v-6.1086h-2.13281c-.41421 0-.75-.3358-.75-.75v-3.2812c0-.4142.33579-.75.75-.75h2.13281v-1.92189c0-.95748.22571-2.51089 1.38068-3.6497 1.1934-1.17674 3.1742-1.71859 6.2536-1.05619.3455.07433.5923.3798.5923.73323v2.75395c0 .41422-.3358.75-.75.75-.6917 0-1.2029.02567-1.5844.0819-.3865.05694-.5781.13711-.675.20223-.1087.07303-.2367.20457-.2367 1.02837v1.0781h2.3906c.2193 0 .4275.0959.57.2626.1425.1666.205.3872.1709.6038l-.5156 3.2813c-.0573.3647-.3716.6335-.7409.6335h-1.875v6.1058c4.5939-1.1198 8.0039-5.2631 8.0039-10.2017 0-5.79901-4.701-10.5-10.5-10.5zm-12 10.5c0-6.62744 5.37256-12 12-12 6.6274 0 12 5.37256 12 12 0 5.9946-4.3948 10.9614-10.1384 11.8564-.2165.0337-.4369-.0289-.6033-.1714s-.2622-.3506-.2622-.5697v-7.7694c0-.4142.3358-.75.75-.75h1.9836l.28-1.7812h-2.2636c-.4142 0-.75-.3358-.75-.75v-1.8281c0-.82854.0888-1.72825.9-2.27338.3631-.24396.8072-.36961 1.293-.4412.3081-.0454.6583-.07238 1.0531-.08618v-1.39629c-2.4096-.40504-3.6447.13262-4.2928.77165-.7376.72735-.9338 1.79299-.9338 2.58161v2.67189c0 .4142-.3358.75-.75.75h-2.13279v1.7812h2.13279c.4142 0 .75.3358.75.75v7.7712c0 .219-.0956.427-.2619.5695-.1662.1424-.3864.2052-.6028.1717-5.74968-.8898-10.1509-5.8593-10.1509-11.8583z";--icon-dropbox: "m6.01895 1.92072c.24583-.15659.56012-.15658.80593.00003l5.17512 3.29711 5.1761-3.29714c.2458-.15659.5601-.15658.8059.00003l5.5772 3.55326c.2162.13771.347.37625.347.63253 0 .25629-.1308.49483-.347.63254l-4.574 2.91414 4.574 2.91418c.2162.1377.347.3762.347.6325s-.1308.4948-.347.6325l-5.5772 3.5533c-.2458.1566-.5601.1566-.8059 0l-5.1761-3.2971-5.17512 3.2971c-.24581.1566-.5601.1566-.80593 0l-5.578142-3.5532c-.216172-.1377-.347058-.3763-.347058-.6326s.130886-.4949.347058-.6326l4.574772-2.91408-4.574772-2.91411c-.216172-.1377-.347058-.37626-.347058-.63257 0-.2563.130886-.49486.347058-.63256zm.40291 8.61518-4.18213 2.664 4.18213 2.664 4.18144-2.664zm6.97504 2.664 4.1821 2.664 4.1814-2.664-4.1814-2.664zm2.7758-3.54668-4.1727 2.65798-4.17196-2.65798 4.17196-2.658zm1.4063-.88268 4.1814-2.664-4.1814-2.664-4.1821 2.664zm-6.9757-2.664-4.18144-2.664-4.18213 2.664 4.18213 2.664zm-4.81262 12.43736c.22254-.3494.68615-.4522 1.03551-.2297l5.17521 3.2966 5.1742-3.2965c.3493-.2226.813-.1198 1.0355.2295.2226.3494.1198.813-.2295 1.0355l-5.5772 3.5533c-.2458.1566-.5601.1566-.8059 0l-5.57819-3.5532c-.34936-.2226-.45216-.6862-.22963-1.0355z";--icon-gdrive: "m7.73633 1.81806c.13459-.22968.38086-.37079.64707-.37079h7.587c.2718 0 .5223.14697.6548.38419l7.2327 12.94554c.1281.2293.1269.5089-.0031.7371l-3.7935 6.6594c-.1334.2342-.3822.3788-.6517.3788l-14.81918.0004c-.26952 0-.51831-.1446-.65171-.3788l-3.793526-6.6598c-.1327095-.233-.130949-.5191.004617-.7504zm.63943 1.87562-6.71271 11.45452 2.93022 5.1443 6.65493-11.58056zm3.73574 6.52652-2.39793 4.1727 4.78633.0001zm4.1168 4.1729 5.6967-.0002-6.3946-11.44563h-5.85354zm5.6844 1.4998h-13.06111l-2.96515 5.1598 13.08726-.0004z";--icon-gphotos: "M12.51 0c-.702 0-1.272.57-1.272 1.273V7.35A6.381 6.381 0 0 0 0 11.489c0 .703.57 1.273 1.273 1.273H7.35A6.381 6.381 0 0 0 11.488 24c.704 0 1.274-.57 1.274-1.273V16.65A6.381 6.381 0 0 0 24 12.51c0-.703-.57-1.273-1.273-1.273H16.65A6.381 6.381 0 0 0 12.511 0Zm.252 11.232V1.53a4.857 4.857 0 0 1 0 9.702Zm-1.53.006H1.53a4.857 4.857 0 0 1 9.702 0Zm1.536 1.524a4.857 4.857 0 0 0 9.702 0h-9.702Zm-6.136 4.857c0-2.598 2.04-4.72 4.606-4.85v9.7a4.857 4.857 0 0 1-4.606-4.85Z";--icon-instagram: "M6.225 12a5.775 5.775 0 1 1 11.55 0 5.775 5.775 0 0 1-11.55 0zM12 7.725a4.275 4.275 0 1 0 0 8.55 4.275 4.275 0 0 0 0-8.55zM18.425 6.975a1.4 1.4 0 1 0 0-2.8 1.4 1.4 0 0 0 0 2.8zM11.958.175h.084c2.152 0 3.823 0 5.152.132 1.35.134 2.427.41 3.362 1.013a7.15 7.15 0 0 1 2.124 2.124c.604.935.88 2.012 1.013 3.362.132 1.329.132 3 .132 5.152v.084c0 2.152 0 3.823-.132 5.152-.134 1.35-.41 2.427-1.013 3.362a7.15 7.15 0 0 1-2.124 2.124c-.935.604-2.012.88-3.362 1.013-1.329.132-3 .132-5.152.132h-.084c-2.152 0-3.824 0-5.153-.132-1.35-.134-2.427-.409-3.36-1.013a7.15 7.15 0 0 1-2.125-2.124C.716 19.62.44 18.544.307 17.194c-.132-1.329-.132-3-.132-5.152v-.084c0-2.152 0-3.823.132-5.152.133-1.35.409-2.427 1.013-3.362A7.15 7.15 0 0 1 3.444 1.32C4.378.716 5.456.44 6.805.307c1.33-.132 3-.132 5.153-.132zM6.953 1.799c-1.234.123-2.043.36-2.695.78A5.65 5.65 0 0 0 2.58 4.26c-.42.65-.657 1.46-.78 2.695C1.676 8.2 1.675 9.797 1.675 12c0 2.203 0 3.8.124 5.046.123 1.235.36 2.044.78 2.696a5.649 5.649 0 0 0 1.68 1.678c.65.421 1.46.658 2.694.78 1.247.124 2.844.125 5.047.125s3.8 0 5.046-.124c1.235-.123 2.044-.36 2.695-.78a5.648 5.648 0 0 0 1.68-1.68c.42-.65.657-1.46.78-2.694.123-1.247.124-2.844.124-5.047s-.001-3.8-.125-5.046c-.122-1.235-.359-2.044-.78-2.695a5.65 5.65 0 0 0-1.679-1.68c-.651-.42-1.46-.657-2.695-.78-1.246-.123-2.843-.124-5.046-.124-2.203 0-3.8 0-5.047.124z";--icon-flickr: "M5.95874 7.92578C3.66131 7.92578 1.81885 9.76006 1.81885 11.9994C1.81885 14.2402 3.66145 16.0744 5.95874 16.0744C8.26061 16.0744 10.1039 14.2396 10.1039 11.9994C10.1039 9.76071 8.26074 7.92578 5.95874 7.92578ZM0.318848 11.9994C0.318848 8.91296 2.85168 6.42578 5.95874 6.42578C9.06906 6.42578 11.6039 8.91232 11.6039 11.9994C11.6039 15.0877 9.06919 17.5744 5.95874 17.5744C2.85155 17.5744 0.318848 15.0871 0.318848 11.9994ZM18.3898 7.92578C16.0878 7.92578 14.2447 9.76071 14.2447 11.9994C14.2447 14.2396 16.088 16.0744 18.3898 16.0744C20.6886 16.0744 22.531 14.2401 22.531 11.9994C22.531 9.76019 20.6887 7.92578 18.3898 7.92578ZM12.7447 11.9994C12.7447 8.91232 15.2795 6.42578 18.3898 6.42578C21.4981 6.42578 24.031 8.91283 24.031 11.9994C24.031 15.0872 21.4982 17.5744 18.3898 17.5744C15.2794 17.5744 12.7447 15.0877 12.7447 11.9994Z";--icon-vk: var(--icon-external-source-placeholder);--icon-evernote: "M9.804 2.27v-.048c.055-.263.313-.562.85-.562h.44c.142 0 .325.014.526.033.066.009.124.023.267.06l.13.032h.002c.319.079.515.275.644.482a1.461 1.461 0 0 1 .16.356l.004.012a.75.75 0 0 0 .603.577l1.191.207a1988.512 1988.512 0 0 0 2.332.402c.512.083 1.1.178 1.665.442.64.3 1.19.795 1.376 1.77.548 2.931.657 5.829.621 8a39.233 39.233 0 0 1-.125 2.602 17.518 17.518 0 0 1-.092.849.735.735 0 0 0-.024.112c-.378 2.705-1.269 3.796-2.04 4.27-.746.457-1.53.451-2.217.447h-.192c-.46 0-1.073-.23-1.581-.635-.518-.412-.763-.87-.763-1.217 0-.45.188-.688.355-.786.161-.095.436-.137.796.087a.75.75 0 1 0 .792-1.274c-.766-.476-1.64-.52-2.345-.108-.7.409-1.098 1.188-1.098 2.08 0 .996.634 1.84 1.329 2.392.704.56 1.638.96 2.515.96l.185.002c.667.009 1.874.025 3.007-.67 1.283-.786 2.314-2.358 2.733-5.276.01-.039.018-.078.022-.105.011-.061.023-.14.034-.23.023-.184.051-.445.079-.772.055-.655.111-1.585.13-2.704.037-2.234-.074-5.239-.647-8.301v-.002c-.294-1.544-1.233-2.391-2.215-2.85-.777-.363-1.623-.496-2.129-.576-.097-.015-.18-.028-.25-.041l-.006-.001-1.99-.345-.761-.132a2.93 2.93 0 0 0-.182-.338A2.532 2.532 0 0 0 12.379.329l-.091-.023a3.967 3.967 0 0 0-.493-.103L11.769.2a7.846 7.846 0 0 0-.675-.04h-.44c-.733 0-1.368.284-1.795.742L2.416 7.431c-.468.428-.751 1.071-.751 1.81 0 .02 0 .041.003.062l.003.034c.017.21.038.468.096.796.107.715.275 1.47.391 1.994.029.13.055.245.075.342l.002.008c.258 1.141.641 1.94.978 2.466.168.263.323.456.444.589a2.808 2.808 0 0 0 .192.194c1.536 1.562 3.713 2.196 5.731 2.08.13-.005.35-.032.537-.073a2.627 2.627 0 0 0 .652-.24c.425-.26.75-.661.992-1.046.184-.294.342-.61.473-.915.197.193.412.357.627.493a5.022 5.022 0 0 0 1.97.709l.023.002.018.003.11.016c.088.014.205.035.325.058l.056.014c.088.022.164.04.235.061a1.736 1.736 0 0 1 .145.048l.03.014c.765.34 1.302 1.09 1.302 1.871a.75.75 0 0 0 1.5 0c0-1.456-.964-2.69-2.18-3.235-.212-.103-.5-.174-.679-.217l-.063-.015a10.616 10.616 0 0 0-.606-.105l-.02-.003-.03-.003h-.002a3.542 3.542 0 0 1-1.331-.485c-.471-.298-.788-.692-.828-1.234a.75.75 0 0 0-1.48-.106l-.001.003-.004.017a8.23 8.23 0 0 1-.092.352 9.963 9.963 0 0 1-.298.892c-.132.34-.29.68-.47.966-.174.276-.339.454-.478.549a1.178 1.178 0 0 1-.221.072 1.949 1.949 0 0 1-.241.036h-.013l-.032.002c-1.684.1-3.423-.437-4.604-1.65a.746.746 0 0 0-.053-.05L4.84 14.6a1.348 1.348 0 0 1-.07-.073 2.99 2.99 0 0 1-.293-.392c-.242-.379-.558-1.014-.778-1.985a54.1 54.1 0 0 0-.083-.376 27.494 27.494 0 0 1-.367-1.872l-.003-.02a6.791 6.791 0 0 1-.08-.67c.004-.277.086-.475.2-.609l.067-.067a.63.63 0 0 1 .292-.145h.05c.18 0 1.095.055 2.013.115l1.207.08.534.037a.747.747 0 0 0 .052.002c.782 0 1.349-.206 1.759-.585l.005-.005c.553-.52.622-1.225.622-1.76V6.24l-.026-.565A774.97 774.97 0 0 1 9.885 4.4c-.042-.961-.081-1.939-.081-2.13ZM4.995 6.953a251.126 251.126 0 0 1 2.102.137l.508.035c.48-.004.646-.122.715-.185.07-.068.146-.209.147-.649l-.024-.548a791.69 791.69 0 0 1-.095-2.187L4.995 6.953Zm16.122 9.996ZM15.638 11.626a.75.75 0 0 0 1.014.31 2.04 2.04 0 0 1 .304-.089 1.84 1.84 0 0 1 .544-.039c.215.023.321.06.37.085.033.016.039.026.047.04a.75.75 0 0 0 1.289-.767c-.337-.567-.906-.783-1.552-.85a3.334 3.334 0 0 0-1.002.062c-.27.056-.531.14-.705.234a.75.75 0 0 0-.31 1.014Z";--icon-box: "M1.01 4.148a.75.75 0 0 1 .75.75v4.348a4.437 4.437 0 0 1 2.988-1.153c1.734 0 3.23.992 3.978 2.438a4.478 4.478 0 0 1 3.978-2.438c2.49 0 4.488 2.044 4.488 4.543 0 2.5-1.999 4.544-4.488 4.544a4.478 4.478 0 0 1-3.978-2.438 4.478 4.478 0 0 1-3.978 2.438C2.26 17.18.26 15.135.26 12.636V4.898a.75.75 0 0 1 .75-.75Zm.75 8.488c0 1.692 1.348 3.044 2.988 3.044s2.989-1.352 2.989-3.044c0-1.691-1.349-3.043-2.989-3.043S1.76 10.945 1.76 12.636Zm10.944-3.043c-1.64 0-2.988 1.352-2.988 3.043 0 1.692 1.348 3.044 2.988 3.044s2.988-1.352 2.988-3.044c0-1.69-1.348-3.043-2.988-3.043Zm4.328-1.23a.75.75 0 0 1 1.052.128l2.333 2.983 2.333-2.983a.75.75 0 0 1 1.181.924l-2.562 3.277 2.562 3.276a.75.75 0 1 1-1.181.924l-2.333-2.983-2.333 2.983a.75.75 0 1 1-1.181-.924l2.562-3.276-2.562-3.277a.75.75 0 0 1 .129-1.052Z";--icon-onedrive: "M13.616 4.147a7.689 7.689 0 0 0-7.642 3.285A6.299 6.299 0 0 0 1.455 17.3c.684.894 2.473 2.658 5.17 2.658h12.141c.95 0 1.882-.256 2.697-.743.815-.486 1.514-1.247 1.964-2.083a5.26 5.26 0 0 0-3.713-7.612 7.69 7.69 0 0 0-6.098-5.373ZM3.34 17.15c.674.63 1.761 1.308 3.284 1.308h12.142a3.76 3.76 0 0 0 2.915-1.383l-7.494-4.489L3.34 17.15Zm10.875-6.25 2.47-1.038a5.239 5.239 0 0 1 1.427-.389 6.19 6.19 0 0 0-10.3-1.952 6.338 6.338 0 0 1 2.118.813l4.285 2.567Zm4.55.033c-.512 0-1.019.104-1.489.307l-.006.003-1.414.594 6.521 3.906a3.76 3.76 0 0 0-3.357-4.8l-.254-.01ZM4.097 9.617A4.799 4.799 0 0 1 6.558 8.9c.9 0 1.84.25 2.587.713l3.4 2.037-10.17 4.28a4.799 4.799 0 0 1 1.721-6.312Z";--icon-huddle: "M6.204 2.002c-.252.23-.357.486-.357.67V21.07c0 .15.084.505.313.812.208.28.499.477.929.477.519 0 .796-.174.956-.365.178-.212.286-.535.286-.924v-.013l.117-6.58c.004-1.725 1.419-3.883 3.867-3.883 1.33 0 2.332.581 2.987 1.364.637.762.95 1.717.95 2.526v6.47c0 .392.11.751.305.995.175.22.468.41 1.008.41.52 0 .816-.198 1.002-.437.207-.266.31-.633.31-.969V14.04c0-2.81-1.943-5.108-4.136-5.422a5.971 5.971 0 0 0-3.183.41c-.912.393-1.538.96-1.81 1.489a.75.75 0 0 1-1.417-.344v-7.5c0-.587-.47-1.031-1.242-1.031-.315 0-.638.136-.885.36ZM5.194.892A2.844 2.844 0 0 1 7.09.142c1.328 0 2.742.867 2.742 2.53v5.607a6.358 6.358 0 0 1 1.133-.629 7.47 7.47 0 0 1 3.989-.516c3.056.436 5.425 3.482 5.425 6.906v6.914c0 .602-.177 1.313-.627 1.89-.47.605-1.204 1.016-2.186 1.016-.96 0-1.698-.37-2.179-.973-.46-.575-.633-1.294-.633-1.933v-6.469c0-.456-.19-1.071-.602-1.563-.394-.471-.986-.827-1.836-.827-1.447 0-2.367 1.304-2.367 2.39v.014l-.117 6.58c-.001.64-.177 1.333-.637 1.881-.48.57-1.2.9-2.105.9-.995 0-1.7-.5-2.132-1.081-.41-.552-.61-1.217-.61-1.708V2.672c0-.707.366-1.341.847-1.78Z"}:where(.lr-wgt-l10n_en-US,.lr-wgt-common),:host{--l10n-locale-name: "en-US";--l10n-upload-file: "Upload file";--l10n-upload-files: "Upload files";--l10n-choose-file: "Choose file";--l10n-choose-files: "Choose files";--l10n-drop-files-here: "Drop files here";--l10n-select-file-source: "Select file source";--l10n-selected: "Selected";--l10n-upload: "Upload";--l10n-add-more: "Add more";--l10n-cancel: "Cancel";--l10n-clear: "Clear";--l10n-camera-shot: "Shot";--l10n-upload-url: "Import";--l10n-upload-url-placeholder: "Paste link here";--l10n-edit-image: "Edit image";--l10n-edit-detail: "Details";--l10n-back: "Back";--l10n-done: "Done";--l10n-ok: "Ok";--l10n-remove-from-list: "Remove";--l10n-no: "No";--l10n-yes: "Yes";--l10n-confirm-your-action: "Confirm your action";--l10n-are-you-sure: "Are you sure?";--l10n-selected-count: "Selected:";--l10n-upload-error: "Upload error";--l10n-validation-error: "Validation error";--l10n-no-files: "No files selected";--l10n-browse: "Browse";--l10n-not-uploaded-yet: "Not uploaded yet...";--l10n-file__one: "file";--l10n-file__other: "files";--l10n-error__one: "error";--l10n-error__other: "errors";--l10n-header-uploading: "Uploading {{count}} {{plural:file(count)}}";--l10n-header-failed: "{{count}} {{plural:error(count)}}";--l10n-header-succeed: "{{count}} {{plural:file(count)}} uploaded";--l10n-header-total: "{{count}} {{plural:file(count)}} selected";--l10n-src-type-local: "From device";--l10n-src-type-from-url: "From link";--l10n-src-type-camera: "Camera";--l10n-src-type-draw: "Draw";--l10n-src-type-facebook: "Facebook";--l10n-src-type-dropbox: "Dropbox";--l10n-src-type-gdrive: "Google Drive";--l10n-src-type-gphotos: "Google Photos";--l10n-src-type-instagram: "Instagram";--l10n-src-type-flickr: "Flickr";--l10n-src-type-vk: "VK";--l10n-src-type-evernote: "Evernote";--l10n-src-type-box: "Box";--l10n-src-type-onedrive: "Onedrive";--l10n-src-type-huddle: "Huddle";--l10n-src-type-other: "Other";--l10n-src-type: var(--l10n-src-type-local);--l10n-caption-from-url: "Import from link";--l10n-caption-camera: "Camera";--l10n-caption-draw: "Draw";--l10n-caption-edit-file: "Edit file";--l10n-file-no-name: "No name...";--l10n-toggle-fullscreen: "Toggle fullscreen";--l10n-toggle-guides: "Toggle guides";--l10n-rotate: "Rotate";--l10n-flip-vertical: "Flip vertical";--l10n-flip-horizontal: "Flip horizontal";--l10n-brightness: "Brightness";--l10n-contrast: "Contrast";--l10n-saturation: "Saturation";--l10n-resize: "Resize image";--l10n-crop: "Crop";--l10n-select-color: "Select color";--l10n-text: "Text";--l10n-draw: "Draw";--l10n-cancel-edit: "Cancel edit";--l10n-tab-view: "Preview";--l10n-tab-details: "Details";--l10n-file-name: "Name";--l10n-file-size: "Size";--l10n-cdn-url: "CDN URL";--l10n-file-size-unknown: "Unknown";--l10n-camera-permissions-denied: "Camera access denied";--l10n-camera-permissions-prompt: "Please allow access to the camera";--l10n-camera-permissions-request: "Request access";--l10n-files-count-limit-error-title: "Files count limit overflow";--l10n-files-count-limit-error-too-few: "You\\2019ve chosen {{total}}. At least {{min}} required.";--l10n-files-count-limit-error-too-many: "You\\2019ve chosen too many files. {{max}} is maximum.";--l10n-files-count-allowed: "Only {{count}} files are allowed";--l10n-files-max-size-limit-error: "File is too big. Max file size is {{maxFileSize}}.";--l10n-has-validation-errors: "File validation error ocurred. Please, check your files before upload.";--l10n-images-only-accepted: "Only image files are accepted.";--l10n-file-type-not-allowed: "Uploading of these file types is not allowed."}:where(.lr-wgt-theme,.lr-wgt-common),:host{--darkmode: 0;--h-foreground: 208;--s-foreground: 4%;--l-foreground: calc(10% + 78% * var(--darkmode));--h-background: 208;--s-background: 4%;--l-background: calc(97% - 85% * var(--darkmode));--h-accent: 211;--s-accent: 100%;--l-accent: calc(50% - 5% * var(--darkmode));--h-confirm: 137;--s-confirm: 85%;--l-confirm: 53%;--h-error: 358;--s-error: 100%;--l-error: 66%;--shadows: 1;--h-shadow: 0;--s-shadow: 0%;--l-shadow: 0%;--opacity-normal: .6;--opacity-hover: .9;--opacity-active: 1;--ui-size: 32px;--gap-min: 2px;--gap-small: 4px;--gap-mid: 10px;--gap-max: 20px;--gap-table: 0px;--borders: 1;--border-radius-element: 8px;--border-radius-frame: 12px;--border-radius-thumb: 6px;--transition-duration: .2s;--modal-max-w: 800px;--modal-max-h: 600px;--modal-normal-w: 430px;--darkmode-minus: calc(1 + var(--darkmode) * -2);--clr-background: hsl(var(--h-background), var(--s-background), var(--l-background));--clr-background-dark: hsl( var(--h-background), var(--s-background), calc(var(--l-background) - 3% * var(--darkmode-minus)) );--clr-background-light: hsl( var(--h-background), var(--s-background), calc(var(--l-background) + 3% * var(--darkmode-minus)) );--clr-accent: hsl(var(--h-accent), var(--s-accent), calc(var(--l-accent) + 15% * var(--darkmode)));--clr-accent-light: hsla(var(--h-accent), var(--s-accent), var(--l-accent), 30%);--clr-accent-lightest: hsla(var(--h-accent), var(--s-accent), var(--l-accent), 10%);--clr-accent-light-opaque: hsl(var(--h-accent), var(--s-accent), calc(var(--l-accent) + 45% * var(--darkmode-minus)));--clr-accent-lightest-opaque: hsl( var(--h-accent), var(--s-accent), calc(var(--l-accent) + 47% * var(--darkmode-minus)) );--clr-confirm: hsl(var(--h-confirm), var(--s-confirm), var(--l-confirm));--clr-error: hsl(var(--h-error), var(--s-error), var(--l-error));--clr-error-light: hsla(var(--h-error), var(--s-error), var(--l-error), 15%);--clr-error-lightest: hsla(var(--h-error), var(--s-error), var(--l-error), 5%);--clr-error-message-bgr: hsl(var(--h-error), var(--s-error), calc(var(--l-error) + 60% * var(--darkmode-minus)));--clr-txt: hsl(var(--h-foreground), var(--s-foreground), var(--l-foreground));--clr-txt-mid: hsl(var(--h-foreground), var(--s-foreground), calc(var(--l-foreground) + 20% * var(--darkmode-minus)));--clr-txt-light: hsl( var(--h-foreground), var(--s-foreground), calc(var(--l-foreground) + 30% * var(--darkmode-minus)) );--clr-txt-lightest: hsl( var(--h-foreground), var(--s-foreground), calc(var(--l-foreground) + 50% * var(--darkmode-minus)) );--clr-shade-lv1: hsla(var(--h-foreground), var(--s-foreground), var(--l-foreground), 5%);--clr-shade-lv2: hsla(var(--h-foreground), var(--s-foreground), var(--l-foreground), 8%);--clr-shade-lv3: hsla(var(--h-foreground), var(--s-foreground), var(--l-foreground), 12%);--clr-generic-file-icon: var(--clr-txt-lightest);--border-light: 1px solid hsla( var(--h-foreground), var(--s-foreground), var(--l-foreground), calc((.1 - .05 * var(--darkmode)) * var(--borders)) );--border-mid: 1px solid hsla( var(--h-foreground), var(--s-foreground), var(--l-foreground), calc((.2 - .1 * var(--darkmode)) * var(--borders)) );--border-accent: 1px solid hsla(var(--h-accent), var(--s-accent), var(--l-accent), 1 * var(--borders));--border-dashed: 1px dashed hsla(var(--h-foreground), var(--s-foreground), var(--l-foreground), calc(.2 * var(--borders)));--clr-curtain: hsla(var(--h-background), var(--s-background), calc(var(--l-background)), 60%);--hsl-shadow: var(--h-shadow), var(--s-shadow), var(--l-shadow);--modal-shadow: 0px 0px 1px hsla(var(--hsl-shadow), calc((.3 + .65 * var(--darkmode)) * var(--shadows))), 0px 6px 20px hsla(var(--hsl-shadow), calc((.1 + .4 * var(--darkmode)) * var(--shadows)));--clr-btn-bgr-primary: var(--clr-accent);--clr-btn-bgr-primary-hover: hsl( var(--h-accent), var(--s-accent), calc(var(--l-accent) - 4% * var(--darkmode-minus)) );--clr-btn-bgr-primary-active: hsl( var(--h-accent), var(--s-accent), calc(var(--l-accent) - 8% * var(--darkmode-minus)) );--clr-btn-txt-primary: hsl(var(--h-accent), var(--s-accent), 98%);--shadow-btn-primary: none;--clr-btn-bgr-secondary: hsl( var(--h-background), var(--s-background), calc(var(--l-background) - 3% * var(--darkmode-minus)) );--clr-btn-bgr-secondary-hover: hsl( var(--h-background), var(--s-background), calc(var(--l-background) - 7% * var(--darkmode-minus)) );--clr-btn-bgr-secondary-active: hsl( var(--h-background), var(--s-background), calc(var(--l-background) - 12% * var(--darkmode-minus)) );--clr-btn-txt-secondary: var(--clr-txt-mid);--shadow-btn-secondary: none;--clr-btn-bgr-disabled: var(--clr-background);--clr-btn-txt-disabled: var(--clr-txt-lightest);--shadow-btn-disabled: none}@media only screen and (max-height: 600px){:where(.lr-wgt-theme,.lr-wgt-common),:host{--modal-max-h: 100%}}@media only screen and (max-width: 430px){:where(.lr-wgt-theme,.lr-wgt-common),:host{--modal-max-w: 100vw;--modal-max-h: var(--uploadcare-blocks-window-height)}}:where(.lr-wgt-theme,.lr-wgt-common),:host{color:var(--clr-txt);font-size:14px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}:where(.lr-wgt-theme,.lr-wgt-common) *,:host *{box-sizing:border-box}:where(.lr-wgt-theme,.lr-wgt-common) [hidden],:host [hidden]{display:none!important}:where(.lr-wgt-theme,.lr-wgt-common) [activity]:not([active]),:host [activity]:not([active]){display:none}:where(.lr-wgt-theme,.lr-wgt-common) dialog:not([open]) [activity],:host dialog:not([open]) [activity]{display:none}:where(.lr-wgt-theme,.lr-wgt-common) button,:host button{display:flex;align-items:center;justify-content:center;height:var(--ui-size);padding-right:1.4em;padding-left:1.4em;font-size:1em;font-family:inherit;white-space:nowrap;border:none;border-radius:var(--border-radius-element);cursor:pointer;user-select:none}@media only screen and (max-width: 800px){:where(.lr-wgt-theme,.lr-wgt-common) button,:host button{padding-right:1em;padding-left:1em}}:where(.lr-wgt-theme,.lr-wgt-common) button.primary-btn,:host button.primary-btn{color:var(--clr-btn-txt-primary);background-color:var(--clr-btn-bgr-primary);box-shadow:var(--shadow-btn-primary);transition:background-color var(--transition-duration)}:where(.lr-wgt-theme,.lr-wgt-common) button.primary-btn:hover,:host button.primary-btn:hover{background-color:var(--clr-btn-bgr-primary-hover)}:where(.lr-wgt-theme,.lr-wgt-common) button.primary-btn:active,:host button.primary-btn:active{background-color:var(--clr-btn-bgr-primary-active)}:where(.lr-wgt-theme,.lr-wgt-common) button.secondary-btn,:host button.secondary-btn{color:var(--clr-btn-txt-secondary);background-color:var(--clr-btn-bgr-secondary);box-shadow:var(--shadow-btn-secondary);transition:background-color var(--transition-duration)}:where(.lr-wgt-theme,.lr-wgt-common) button.secondary-btn:hover,:host button.secondary-btn:hover{background-color:var(--clr-btn-bgr-secondary-hover)}:where(.lr-wgt-theme,.lr-wgt-common) button.secondary-btn:active,:host button.secondary-btn:active{background-color:var(--clr-btn-bgr-secondary-active)}:where(.lr-wgt-theme,.lr-wgt-common) button.mini-btn,:host button.mini-btn{width:var(--ui-size);height:var(--ui-size);padding:0;background-color:transparent;border:none;cursor:pointer;transition:var(--transition-duration) ease;color:var(--clr-txt)}:where(.lr-wgt-theme,.lr-wgt-common) button.mini-btn:hover,:host button.mini-btn:hover{background-color:var(--clr-shade-lv1)}:where(.lr-wgt-theme,.lr-wgt-common) button.mini-btn:active,:host button.mini-btn:active{background-color:var(--clr-shade-lv2)}:where(.lr-wgt-theme,.lr-wgt-common) :is(button[disabled],button.primary-btn[disabled],button.secondary-btn[disabled]),:host :is(button[disabled],button.primary-btn[disabled],button.secondary-btn[disabled]){color:var(--clr-btn-txt-disabled);background-color:var(--clr-btn-bgr-disabled);box-shadow:var(--shadow-btn-disabled);pointer-events:none}:where(.lr-wgt-theme,.lr-wgt-common) a,:host a{color:var(--clr-accent);text-decoration:none}:where(.lr-wgt-theme,.lr-wgt-common) a[disabled],:host a[disabled]{pointer-events:none}:where(.lr-wgt-theme,.lr-wgt-common) input[type=text],:host input[type=text]{display:flex;width:100%;height:var(--ui-size);padding-right:.6em;padding-left:.6em;color:var(--clr-txt);font-size:1em;font-family:inherit;background-color:var(--clr-background-light);border:var(--border-light);border-radius:var(--border-radius-element);transition:var(--transition-duration)}:where(.lr-wgt-theme,.lr-wgt-common) input[type=text],:host input[type=text]::placeholder{color:var(--clr-txt-lightest)}:where(.lr-wgt-theme,.lr-wgt-common) input[type=text]:hover,:host input[type=text]:hover{border-color:var(--clr-accent-light)}:where(.lr-wgt-theme,.lr-wgt-common) input[type=text]:focus,:host input[type=text]:focus{border-color:var(--clr-accent);outline:none}:where(.lr-wgt-theme,.lr-wgt-common) input[disabled],:host input[disabled]{opacity:.6;pointer-events:none}lr-icon{display:inline-flex;align-items:center;justify-content:center;width:var(--ui-size);height:var(--ui-size)}lr-icon svg{width:calc(var(--ui-size) / 2);height:calc(var(--ui-size) / 2)}lr-icon:not([raw]) path{fill:currentColor}lr-tabs{display:grid;grid-template-rows:min-content minmax(var(--ui-size),auto);height:100%;overflow:hidden;color:var(--clr-txt-lightest)}lr-tabs>.tabs-row{display:flex;grid-template-columns:minmax();background-color:var(--clr-background-light)}lr-tabs>.tabs-context{overflow-y:auto}lr-tabs .tabs-row>.tab{display:flex;flex-grow:1;align-items:center;justify-content:center;height:var(--ui-size);border-bottom:var(--border-light);cursor:pointer;transition:var(--transition-duration)}lr-tabs .tabs-row>.tab[current]{color:var(--clr-txt);border-color:var(--clr-txt)}lr-range{position:relative;display:inline-flex;align-items:center;justify-content:center;height:var(--ui-size)}lr-range datalist{display:none}lr-range input{width:100%;height:100%;opacity:0}lr-range .track-wrapper{position:absolute;right:10px;left:10px;display:flex;align-items:center;justify-content:center;height:2px;user-select:none;pointer-events:none}lr-range .track{position:absolute;right:0;left:0;display:flex;align-items:center;justify-content:center;height:2px;background-color:currentColor;border-radius:2px;opacity:.5}lr-range .slider{position:absolute;width:16px;height:16px;background-color:currentColor;border-radius:100%;transform:translate(-50%)}lr-range .bar{position:absolute;left:0;height:100%;background-color:currentColor;border-radius:2px}lr-range .caption{position:absolute;display:inline-flex;justify-content:center}lr-color{position:relative;display:inline-flex;align-items:center;justify-content:center;width:var(--ui-size);height:var(--ui-size);overflow:hidden;background-color:var(--clr-background);cursor:pointer}lr-color[current]{background-color:var(--clr-txt)}lr-color input[type=color]{position:absolute;display:block;width:100%;height:100%;opacity:0}lr-color .current-color{position:absolute;width:50%;height:50%;border:2px solid #fff;border-radius:100%;pointer-events:none}lr-config{display:none}lr-simple-btn{position:relative;display:inline-flex}lr-simple-btn button{padding-left:.2em!important;color:var(--clr-btn-txt-secondary);background-color:var(--clr-btn-bgr-secondary);box-shadow:var(--shadow-btn-secondary)}lr-simple-btn button lr-icon svg{transform:scale(.8)}lr-simple-btn button:hover{background-color:var(--clr-btn-bgr-secondary-hover)}lr-simple-btn button:active{background-color:var(--clr-btn-bgr-secondary-active)}lr-simple-btn>lr-drop-area{display:contents}lr-simple-btn .visual-drop-area{position:absolute;top:0;left:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%;padding:var(--gap-min);border:var(--border-dashed);border-radius:inherit;opacity:0;transition:border-color var(--transition-duration) ease,background-color var(--transition-duration) ease,opacity var(--transition-duration) ease}lr-simple-btn .visual-drop-area:before{position:absolute;top:0;left:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%;color:var(--clr-txt-light);background-color:var(--clr-background);border-radius:inherit;content:var(--l10n-drop-files-here)}lr-simple-btn>lr-drop-area[drag-state=active] .visual-drop-area{background-color:var(--clr-accent-lightest);opacity:1}lr-simple-btn>lr-drop-area[drag-state=inactive] .visual-drop-area{background-color:var(--clr-shade-lv1);opacity:0}lr-simple-btn>lr-drop-area[drag-state=near] .visual-drop-area{background-color:var(--clr-accent-lightest);border-color:var(--clr-accent-light);opacity:1}lr-simple-btn>lr-drop-area[drag-state=over] .visual-drop-area{background-color:var(--clr-accent-lightest);border-color:var(--clr-accent);opacity:1}lr-simple-btn>:where(lr-drop-area[drag-state="active"],lr-drop-area[drag-state="near"],lr-drop-area[drag-state="over"]) button{box-shadow:none}lr-simple-btn>lr-drop-area:after{content:""}lr-source-btn{display:flex;align-items:center;margin-bottom:var(--gap-min);padding:var(--gap-min) var(--gap-mid);color:var(--clr-txt-mid);border-radius:var(--border-radius-element);cursor:pointer;transition-duration:var(--transition-duration);transition-property:background-color,color;user-select:none}lr-source-btn:hover{color:var(--clr-accent);background-color:var(--clr-accent-lightest)}lr-source-btn:active{color:var(--clr-accent);background-color:var(--clr-accent-light)}lr-source-btn lr-icon{display:inline-flex;flex-grow:1;justify-content:center;min-width:var(--ui-size);margin-right:var(--gap-mid);opacity:.8}lr-source-btn[type=local]>.txt:after{content:var(--l10n-local-files)}lr-source-btn[type=camera]>.txt:after{content:var(--l10n-camera)}lr-source-btn[type=url]>.txt:after{content:var(--l10n-from-url)}lr-source-btn[type=other]>.txt:after{content:var(--l10n-other)}lr-source-btn .txt{display:flex;align-items:center;box-sizing:border-box;width:100%;height:var(--ui-size);padding:0;white-space:nowrap;border:none}lr-drop-area{padding:var(--gap-min);overflow:hidden;border:var(--border-dashed);border-radius:var(--border-radius-frame);transition:var(--transition-duration) ease}lr-drop-area,lr-drop-area .content-wrapper{display:flex;align-items:center;justify-content:center;width:100%;height:100%}lr-drop-area .text{position:relative;margin:var(--gap-mid);color:var(--clr-txt-light);transition:var(--transition-duration) ease}lr-drop-area[ghost][drag-state=inactive]{display:none;opacity:0}lr-drop-area[ghost]:not([fullscreen]):is([drag-state="active"],[drag-state="near"],[drag-state="over"]){background:var(--clr-background)}lr-drop-area[with-icon]>.content-wrapper:is([drag-state="active"],[drag-state="near"],[drag-state="over"]) :is(.text,.icon-container){color:var(--clr-accent)}lr-drop-area:is([drag-state="active"],[drag-state="near"],[drag-state="over"],:hover){color:var(--clr-accent);background:var(--clr-accent-lightest);border-color:var(--clr-accent-light)}lr-drop-area:is([drag-state="active"],[drag-state="near"]){opacity:1}lr-drop-area[drag-state=over]{border-color:var(--clr-accent);opacity:1}lr-drop-area[with-icon]{min-height:calc(var(--ui-size) * 6)}lr-drop-area[with-icon] .content-wrapper{display:flex;flex-direction:column}lr-drop-area[with-icon] .text{color:var(--clr-txt);font-weight:500;font-size:1.1em}lr-drop-area[with-icon] .icon-container{position:relative;width:calc(var(--ui-size) * 2);height:calc(var(--ui-size) * 2);margin:var(--gap-mid);overflow:hidden;color:var(--clr-txt);background-color:var(--clr-background);border-radius:50%;transition:var(--transition-duration) ease}lr-drop-area[with-icon] lr-icon{position:absolute;top:calc(50% - var(--ui-size) / 2);left:calc(50% - var(--ui-size) / 2);transition:var(--transition-duration) ease}lr-drop-area[with-icon] lr-icon:last-child{transform:translateY(calc(var(--ui-size) * 1.5))}lr-drop-area[with-icon]:hover .icon-container,lr-drop-area[with-icon]:hover .text{color:var(--clr-accent)}lr-drop-area[with-icon]:hover .icon-container{background-color:var(--clr-accent-lightest)}lr-drop-area[with-icon]>.content-wrapper:is([drag-state="active"],[drag-state="near"],[drag-state="over"]) .icon-container{color:#fff;background-color:var(--clr-accent)}lr-drop-area[with-icon]>.content-wrapper:is([drag-state="active"],[drag-state="near"],[drag-state="over"]) .text{color:var(--clr-accent)}lr-drop-area[with-icon]>.content-wrapper:is([drag-state="active"],[drag-state="near"],[drag-state="over"]) lr-icon:first-child{transform:translateY(calc(var(--ui-size) * -1.5))}lr-drop-area[with-icon]>.content-wrapper:is([drag-state="active"],[drag-state="near"],[drag-state="over"]) lr-icon:last-child{transform:translateY(0)}lr-drop-area[with-icon]>.content-wrapper[drag-state=near] lr-icon:last-child{transform:scale(1.3)}lr-drop-area[with-icon]>.content-wrapper[drag-state=over] lr-icon:last-child{transform:scale(1.5)}lr-drop-area[fullscreen]{position:fixed;inset:0;z-index:2147483647;display:flex;align-items:center;justify-content:center;width:calc(100vw - var(--gap-mid) * 2);height:calc(100vh - var(--gap-mid) * 2);margin:var(--gap-mid)}lr-drop-area[fullscreen] .content-wrapper{width:100%;max-width:calc(var(--modal-normal-w) * .8);height:calc(var(--ui-size) * 6);color:var(--clr-txt);background-color:var(--clr-background-light);border-radius:var(--border-radius-frame);box-shadow:var(--modal-shadow);transition:var(--transition-duration) ease}lr-drop-area[with-icon][fullscreen][drag-state=active]>.content-wrapper,lr-drop-area[with-icon][fullscreen][drag-state=near]>.content-wrapper{transform:translateY(var(--gap-mid));opacity:0}lr-drop-area[with-icon][fullscreen][drag-state=over]>.content-wrapper{transform:translateY(0);opacity:1}:is(lr-drop-area[with-icon][fullscreen])>.content-wrapper lr-icon:first-child{transform:translateY(calc(var(--ui-size) * -1.5))}lr-modal{--modal-max-content-height: calc(var(--uploadcare-blocks-window-height, 100vh) - 4 * var(--gap-mid) - var(--ui-size));--modal-content-height-fill: var(--uploadcare-blocks-window-height, 100vh)}lr-modal[dialog-fallback]{--lr-z-max: 2147483647;position:fixed;z-index:var(--lr-z-max);display:flex;align-items:center;justify-content:center;width:100vw;height:100vh;pointer-events:none;inset:0}lr-modal[dialog-fallback] dialog[open]{z-index:var(--lr-z-max);pointer-events:auto}lr-modal[dialog-fallback] dialog[open]+.backdrop{position:fixed;top:0;left:0;z-index:calc(var(--lr-z-max) - 1);align-items:center;justify-content:center;width:100vw;height:100vh;background-color:var(--clr-curtain);pointer-events:auto}lr-modal[strokes][dialog-fallback] dialog[open]+.backdrop{background-image:var(--modal-backdrop-background-image)}@supports selector(dialog::backdrop){lr-modal>dialog::backdrop{background-color:#0000001a}lr-modal[strokes]>dialog::backdrop{background-image:var(--modal-backdrop-background-image)}}lr-modal>dialog[open]{transform:translateY(0);visibility:visible;opacity:1}lr-modal>dialog:not([open]){transform:translateY(20px);visibility:hidden;opacity:0}lr-modal>dialog{display:flex;flex-direction:column;width:max-content;max-width:min(calc(100% - var(--gap-mid) * 2),calc(var(--modal-max-w) - var(--gap-mid) * 2));min-height:var(--ui-size);max-height:calc(var(--modal-max-h) - var(--gap-mid) * 2);margin:auto;padding:0;overflow:hidden;background-color:var(--clr-background-light);border:0;border-radius:var(--border-radius-frame);box-shadow:var(--modal-shadow);transition:transform calc(var(--transition-duration) * 2)}@media only screen and (max-width: 430px),only screen and (max-height: 600px){lr-modal>dialog>.content{height:var(--modal-max-content-height)}}lr-url-source{display:block;background-color:var(--clr-background-light)}lr-modal lr-url-source{width:min(calc(var(--modal-normal-w) - var(--gap-mid) * 2),calc(100vw - var(--gap-mid) * 2))}lr-url-source>.content{display:grid;grid-gap:var(--gap-small);grid-template-columns:1fr min-content;padding:var(--gap-mid);padding-top:0}lr-url-source .url-input{display:flex}lr-url-source .url-upload-btn:after{content:var(--l10n-upload-url)}lr-camera-source{position:relative;display:flex;flex-direction:column;width:100%;height:100%;max-height:100%;overflow:hidden;background-color:var(--clr-background-light);border-radius:var(--border-radius-element)}lr-modal lr-camera-source{width:min(calc(var(--modal-max-w) - var(--gap-mid) * 2),calc(100vw - var(--gap-mid) * 2));height:100vh;max-height:var(--modal-max-content-height)}lr-camera-source.initialized{height:max-content}@media only screen and (max-width: 430px){lr-camera-source{width:calc(100vw - var(--gap-mid) * 2);height:var(--modal-content-height-fill, 100%)}}lr-camera-source video{display:block;width:100%;max-height:100%;object-fit:contain;object-position:center center;background-color:var(--clr-background-dark);border-radius:var(--border-radius-element)}lr-camera-source .toolbar{position:absolute;bottom:0;display:flex;justify-content:space-between;width:100%;padding:var(--gap-mid);background-color:var(--clr-background-light)}lr-camera-source .content{display:flex;flex:1;justify-content:center;width:100%;padding:var(--gap-mid);padding-top:0;overflow:hidden}lr-camera-source .message-box{--padding: calc(var(--gap-max) * 2);display:flex;flex-direction:column;grid-gap:var(--gap-max);align-items:center;justify-content:center;padding:var(--padding) var(--padding) 0 var(--padding);color:var(--clr-txt)}lr-camera-source .message-box button{color:var(--clr-btn-txt-primary);background-color:var(--clr-btn-bgr-primary)}lr-camera-source .shot-btn{position:absolute;bottom:var(--gap-max);width:calc(var(--ui-size) * 1.8);height:calc(var(--ui-size) * 1.8);color:var(--clr-background-light);background-color:var(--clr-txt);border-radius:50%;opacity:.85;transition:var(--transition-duration) ease}lr-camera-source .shot-btn:hover{transform:scale(1.05);opacity:1}lr-camera-source .shot-btn:active{background-color:var(--clr-txt-mid);opacity:1}lr-camera-source .shot-btn[disabled]{bottom:calc(var(--gap-max) * -1 - var(--gap-mid) - var(--ui-size) * 2)}lr-camera-source .shot-btn lr-icon svg{width:calc(var(--ui-size) / 1.5);height:calc(var(--ui-size) / 1.5)}lr-external-source{display:flex;flex-direction:column;width:100%;height:100%;background-color:var(--clr-background-light);overflow:hidden}lr-modal lr-external-source{width:min(calc(var(--modal-max-w) - var(--gap-mid) * 2),calc(100vw - var(--gap-mid) * 2));height:var(--modal-content-height-fill, 100%);max-height:var(--modal-max-content-height)}lr-external-source>.content{position:relative;display:grid;flex:1;grid-template-rows:1fr min-content}@media only screen and (max-width: 430px){lr-external-source{width:calc(100vw - var(--gap-mid) * 2);height:var(--modal-content-height-fill, 100%)}}lr-external-source iframe{display:block;width:100%;height:100%;border:none}lr-external-source .iframe-wrapper{overflow:hidden}lr-external-source .toolbar{display:grid;grid-gap:var(--gap-mid);grid-template-columns:max-content 1fr max-content max-content;align-items:center;width:100%;padding:var(--gap-mid);border-top:var(--border-light)}lr-external-source .back-btn{padding-left:0}lr-external-source .back-btn:after{content:var(--l10n-back)}lr-external-source .selected-counter{display:flex;grid-gap:var(--gap-mid);align-items:center;justify-content:space-between;padding:var(--gap-mid);color:var(--clr-txt-light)}lr-upload-list{display:flex;flex-direction:column;width:100%;height:100%;overflow:hidden;background-color:var(--clr-background-light);transition:opacity var(--transition-duration)}lr-modal lr-upload-list{width:min(calc(var(--modal-normal-w) - var(--gap-mid) * 2),calc(100vw - var(--gap-mid) * 2));height:max-content;max-height:var(--modal-max-content-height)}lr-upload-list .no-files{height:var(--ui-size);padding:var(--gap-max)}lr-upload-list .files{display:block;flex:1;min-height:var(--ui-size);padding:0 var(--gap-mid);overflow:auto}lr-upload-list .toolbar{display:flex;gap:var(--gap-small);justify-content:space-between;padding:var(--gap-mid);background-color:var(--clr-background-light)}lr-upload-list .toolbar .add-more-btn{padding-left:.2em}lr-upload-list .toolbar-spacer{flex:1}lr-upload-list lr-drop-area{position:absolute;top:0;left:0;width:calc(100% - var(--gap-mid) * 2);height:calc(100% - var(--gap-mid) * 2);margin:var(--gap-mid);border-radius:var(--border-radius-element)}lr-upload-list lr-activity-header>.header-text{padding:0 var(--gap-mid)}lr-start-from{display:grid;grid-auto-flow:row;grid-auto-rows:1fr max-content max-content;gap:var(--gap-max);width:100%;height:max-content;padding:var(--gap-max);overflow-y:auto;background-color:var(--clr-background-light)}lr-modal lr-start-from{width:min(calc(var(--modal-normal-w) - var(--gap-mid) * 2),calc(100vw - var(--gap-mid) * 2))}lr-file-item{display:block}lr-file-item>.inner{position:relative;display:grid;grid-template-columns:32px 1fr max-content;gap:var(--gap-min);align-items:center;margin-bottom:var(--gap-small);padding:var(--gap-mid);overflow:hidden;font-size:.95em;background-color:var(--clr-background);border-radius:var(--border-radius-element);transition:var(--transition-duration)}lr-file-item:last-of-type>.inner{margin-bottom:0}lr-file-item>.inner[focused]{background-color:transparent}lr-file-item>.inner[uploading] .edit-btn{display:none}lr-file-item>:where(.inner[failed],.inner[limit-overflow]){background-color:var(--clr-error-lightest)}lr-file-item .thumb{position:relative;display:inline-flex;width:var(--ui-size);height:var(--ui-size);background-color:var(--clr-shade-lv1);background-position:center center;background-size:cover;border-radius:var(--border-radius-thumb)}lr-file-item .file-name-wrapper{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;max-width:100%;padding-right:var(--gap-mid);padding-left:var(--gap-mid);overflow:hidden;color:var(--clr-txt-light);transition:color var(--transition-duration)}lr-file-item .file-name{max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}lr-file-item .file-error{display:none;color:var(--clr-error);font-size:.85em;line-height:130%}lr-file-item button.remove-btn,lr-file-item button.edit-btn{color:var(--clr-txt-lightest)!important}lr-file-item button.upload-btn{display:none}lr-file-item button:hover{color:var(--clr-txt-light)}lr-file-item .badge{position:absolute;top:calc(var(--ui-size) * -.13);right:calc(var(--ui-size) * -.13);width:calc(var(--ui-size) * .44);height:calc(var(--ui-size) * .44);color:var(--clr-background-light);background-color:var(--clr-txt);border-radius:50%;transform:scale(.3);opacity:0;transition:var(--transition-duration) ease}lr-file-item>.inner:where([failed],[limit-overflow],[finished]) .badge{transform:scale(1);opacity:1}lr-file-item>.inner[finished] .badge{background-color:var(--clr-confirm)}lr-file-item>.inner:where([failed],[limit-overflow]) .badge{background-color:var(--clr-error)}lr-file-item>.inner:where([failed],[limit-overflow]) .file-error{display:block}lr-file-item .badge lr-icon,lr-file-item .badge lr-icon svg{width:100%;height:100%}lr-file-item .progress-bar{top:calc(100% - 2px);height:2px}lr-file-item .file-actions{display:flex;gap:var(--gap-min);align-items:center;justify-content:center}lr-upload-details{display:flex;flex-direction:column;width:min(calc(var(--modal-max-w) - var(--gap-mid) * 2),calc(100vw - var(--gap-mid) * 2));height:var(--modal-content-height-fill, 100%);max-height:var(--modal-max-content-height);overflow:hidden;background-color:var(--clr-background-light)}lr-upload-details>.content{position:relative;display:grid;flex:1;grid-template-rows:auto min-content}lr-upload-details lr-tabs .tabs-context{position:relative}lr-upload-details .toolbar{display:grid;grid-template-columns:min-content min-content 1fr min-content;gap:var(--gap-mid);padding:var(--gap-mid);border-top:var(--border-light)}lr-upload-details .toolbar[edit-disabled]{display:flex;justify-content:space-between}lr-upload-details .remove-btn{padding-left:.5em}lr-upload-details .detail-btn{padding-left:0;color:var(--clr-txt);background-color:var(--clr-background)}lr-upload-details .edit-btn{padding-left:.5em}lr-upload-details .details{padding:var(--gap-max)}lr-upload-details .info-block{padding-top:var(--gap-max);padding-bottom:calc(var(--gap-max) + var(--gap-table));color:var(--clr-txt);border-bottom:var(--border-light)}lr-upload-details .info-block:first-of-type{padding-top:0}lr-upload-details .info-block:last-of-type{border-bottom:none}lr-upload-details .info-block>.info-block_name{margin-bottom:.4em;color:var(--clr-txt-light);font-size:.8em}lr-upload-details .cdn-link[disabled]{pointer-events:none}lr-upload-details .cdn-link[disabled]:before{filter:grayscale(1);content:var(--l10n-not-uploaded-yet)}lr-file-preview{position:absolute;inset:0;display:flex;align-items:center;justify-content:center}lr-file-preview>lr-img{display:contents}lr-file-preview>lr-img>.img-view{position:absolute;inset:0;width:100%;max-width:100%;height:100%;max-height:100%;object-fit:scale-down}lr-message-box{position:fixed;right:var(--gap-mid);bottom:var(--gap-mid);left:var(--gap-mid);z-index:100000;display:grid;grid-template-rows:min-content auto;color:var(--clr-txt);font-size:.9em;background:var(--clr-background);border-radius:var(--border-radius-frame);box-shadow:var(--modal-shadow);transition:calc(var(--transition-duration) * 2)}lr-message-box[inline]{position:static}lr-message-box:not([active]){transform:translateY(10px);visibility:hidden;opacity:0}lr-message-box[error]{color:var(--clr-error);background-color:var(--clr-error-message-bgr)}lr-message-box .heading{display:grid;grid-template-columns:min-content auto min-content;padding:var(--gap-mid)}lr-message-box .caption{display:flex;align-items:center;word-break:break-word}lr-message-box .heading button{width:var(--ui-size);padding:0;color:currentColor;background-color:transparent;opacity:var(--opacity-normal)}lr-message-box .heading button:hover{opacity:var(--opacity-hover)}lr-message-box .heading button:active{opacity:var(--opacity-active)}lr-message-box .msg{padding:var(--gap-max);padding-top:0;text-align:left}lr-confirmation-dialog{display:block;padding:var(--gap-mid);padding-top:var(--gap-max)}lr-confirmation-dialog .message{display:flex;justify-content:center;padding:var(--gap-mid);padding-bottom:var(--gap-max);font-weight:500;font-size:1.1em}lr-confirmation-dialog .toolbar{display:grid;grid-template-columns:1fr 1fr;gap:var(--gap-mid);margin-top:var(--gap-mid)}lr-progress-bar-common{position:absolute;right:0;bottom:0;left:0;z-index:10000;display:block;height:var(--gap-mid);background-color:var(--clr-background);transition:opacity .3s}lr-progress-bar-common:not([active]){opacity:0;pointer-events:none}lr-progress-bar{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;overflow:hidden;pointer-events:none}lr-progress-bar .progress{width:calc(var(--l-width) * 1%);height:100%;background-color:var(--clr-accent-light);transform:translate(0);opacity:1;transition:width .6s,opacity .3s}lr-progress-bar .progress--unknown{width:100%;transform-origin:0% 50%;animation:lr-indeterminateAnimation 1s infinite linear}lr-progress-bar .progress--hidden{opacity:0}@keyframes lr-indeterminateAnimation{0%{transform:translate(0) scaleX(0)}40%{transform:translate(0) scaleX(.4)}to{transform:translate(100%) scaleX(.5)}}lr-activity-header{display:flex;gap:var(--gap-mid);justify-content:space-between;padding:var(--gap-mid);color:var(--clr-txt);font-weight:500;font-size:1em;line-height:var(--ui-size)}lr-activity-header lr-icon{height:var(--ui-size)}lr-activity-header>*{display:flex;align-items:center}lr-activity-header button{display:inline-flex;align-items:center;justify-content:center;color:var(--clr-txt-mid)}lr-activity-header button:hover{background-color:var(--clr-background)}lr-activity-header button:active{background-color:var(--clr-background-dark)}lr-copyright .credits{padding:0 var(--gap-mid) var(--gap-mid) calc(var(--gap-mid) * 1.5);color:var(--clr-txt-lightest);font-weight:400;font-size:.85em;opacity:.7;transition:var(--transition-duration) ease}lr-copyright .credits:hover{opacity:1}:host(.lr-cloud-image-editor) lr-icon,.lr-cloud-image-editor lr-icon{display:flex;align-items:center;justify-content:center;width:100%;height:100%}:host(.lr-cloud-image-editor) lr-icon svg,.lr-cloud-image-editor lr-icon svg{width:unset;height:unset}:host(.lr-cloud-image-editor) lr-icon:not([raw]) path,.lr-cloud-image-editor lr-icon:not([raw]) path{stroke-linejoin:round;fill:none;stroke:currentColor;stroke-width:1.2}:host(.lr-cloud-image-editor),.lr-cloud-image-editor{--icon-rotate: "M13.5.399902L12 1.9999l1.5 1.6M12.0234 2H14.4C16.3882 2 18 3.61178 18 5.6V8M4 17h9c.5523 0 1-.4477 1-1V7c0-.55228-.4477-1-1-1H4c-.55228 0-1 .44771-1 1v9c0 .5523.44771 1 1 1z";--icon-mirror: "M5.00042.399902l-1.5 1.599998 1.5 1.6M15.0004.399902l1.5 1.599998-1.5 1.6M3.51995 2H16.477M8.50042 16.7V6.04604c0-.30141-.39466-.41459-.5544-.159L1.28729 16.541c-.12488.1998.01877.459.2544.459h6.65873c.16568 0 .3-.1343.3-.3zm2.99998 0V6.04604c0-.30141.3947-.41459.5544-.159L18.7135 16.541c.1249.1998-.0187.459-.2544.459h-6.6587c-.1657 0-.3-.1343-.3-.3z";--icon-flip: "M19.6001 4.99993l-1.6-1.5-1.6 1.5m3.2 9.99997l-1.6 1.5-1.6-1.5M18 3.52337V16.4765M3.3 8.49993h10.654c.3014 0 .4146-.39466.159-.5544L3.459 1.2868C3.25919 1.16192 3 1.30557 3 1.5412v6.65873c0 .16568.13432.3.3.3zm0 2.99997h10.654c.3014 0 .4146.3947.159.5544L3.459 18.7131c-.19981.1248-.459-.0188-.459-.2544v-6.6588c0-.1657.13432-.3.3-.3z";--icon-sad: "M2 17c4.41828-4 11.5817-4 16 0M16.5 5c0 .55228-.4477 1-1 1s-1-.44772-1-1 .4477-1 1-1 1 .44772 1 1zm-11 0c0 .55228-.44772 1-1 1s-1-.44772-1-1 .44772-1 1-1 1 .44772 1 1z";--icon-closeMax: "M3 3l14 14m0-14L3 17";--icon-crop: "M20 14H7.00513C6.45001 14 6 13.55 6 12.9949V0M0 6h13.0667c.5154 0 .9333.41787.9333.93333V20M14.5.399902L13 1.9999l1.5 1.6M13 2h2c1.6569 0 3 1.34315 3 3v2M5.5 19.5999l1.5-1.6-1.5-1.6M7 18H5c-1.65685 0-3-1.3431-3-3v-2";--icon-sliders: "M8 10h11M1 10h4M1 4.5h11m3 0h4m-18 11h11m3 0h4M12 4.5a1.5 1.5 0 103 0 1.5 1.5 0 10-3 0M5 10a1.5 1.5 0 103 0 1.5 1.5 0 10-3 0M12 15.5a1.5 1.5 0 103 0 1.5 1.5 0 10-3 0";--icon-filters: "M4.5 6.5a5.5 5.5 0 1011 0 5.5 5.5 0 10-11 0m-3.5 6a5.5 5.5 0 1011 0 5.5 5.5 0 10-11 0m7 0a5.5 5.5 0 1011 0 5.5 5.5 0 10-11 0";--icon-done: "M1 10.6316l5.68421 5.6842L19 4";--icon-original: "M0 40L40-.00000133";--icon-slider: "M0 10h11m0 0c0 1.1046.8954 2 2 2s2-.8954 2-2m-4 0c0-1.10457.8954-2 2-2s2 .89543 2 2m0 0h5";--icon-exposure: "M10 20v-3M2.92946 2.92897l2.12132 2.12132M0 10h3m-.07054 7.071l2.12132-2.1213M10 0v3m7.0705 14.071l-2.1213-2.1213M20 10h-3m.0705-7.07103l-2.1213 2.12132M5 10a5 5 0 1010 0 5 5 0 10-10 0";--icon-contrast: "M2 10a8 8 0 1016 0 8 8 0 10-16 0m8-8v16m8-8h-8m7.5977 2.5H10m6.24 2.5H10m7.6-7.5H10M16.2422 5H10";--icon-brightness: "M15 10c0 2.7614-2.2386 5-5 5m5-5c0-2.76142-2.2386-5-5-5m5 5h-5m0 5c-2.76142 0-5-2.2386-5-5 0-2.76142 2.23858-5 5-5m0 10V5m0 15v-3M2.92946 2.92897l2.12132 2.12132M0 10h3m-.07054 7.071l2.12132-2.1213M10 0v3m7.0705 14.071l-2.1213-2.1213M20 10h-3m.0705-7.07103l-2.1213 2.12132M14.3242 7.5H10m4.3242 5H10";--icon-gamma: "M17 3C9 6 2.5 11.5 2.5 17.5m0 0h1m-1 0v-1m14 1h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3-14v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1";--icon-enhance: "M19 13h-2m0 0c-2.2091 0-4-1.7909-4-4m4 4c-2.2091 0-4 1.7909-4 4m0-8V7m0 2c0 2.2091-1.7909 4-4 4m-2 0h2m0 0c2.2091 0 4 1.7909 4 4m0 0v2M8 8.5H6.5m0 0c-1.10457 0-2-.89543-2-2m2 2c-1.10457 0-2 .89543-2 2m0-4V5m0 1.5c0 1.10457-.89543 2-2 2M1 8.5h1.5m0 0c1.10457 0 2 .89543 2 2m0 0V12M12 3h-1m0 0c-.5523 0-1-.44772-1-1m1 1c-.5523 0-1 .44772-1 1m0-2V1m0 1c0 .55228-.44772 1-1 1M8 3h1m0 0c.55228 0 1 .44772 1 1m0 0v1";--icon-saturation: '    <circle cx="10.0006" cy="10.0001" r="9" transform="rotate(90 10.0006 10.0001)" fill="url(#paint0_linear)"/>     <defs>       <linearGradient id="paint0_linear" x1="10.0006" y1="1.00009" x2="10.0006" y2="19.0001" gradientUnits="userSpaceOnUse">         <stop stop-color="#DE15FF"/>         <stop offset=".203125" stop-color="#0029FF"/>         <stop offset=".479167" stop-color="#2AE4F0"/>         <stop offset=".604167" stop-color="#15EF11"/>         <stop offset=".75" stop-color="#FAE528"/>         <stop offset="1" stop-color="#EB2A2A"/>       </linearGradient>     </defs>  ';--icon-warmth: '    <path d="M7.5 13.0505l.42854.4199.17146-.1749v-.245h-.6zm5 0h-.6v.245l.1715.1749.4285-.4199zM8.1 3.5c0-1.04934.85066-1.9 1.9-1.9V.4C8.28792.4 6.9 1.78792 6.9 3.5h1.2zm0 9.5505V3.5H6.9v9.5505h1.2zM7.1 15.5c0-.7904.31539-1.5059.82854-2.0296l-.85708-.8398C6.34742 13.3694 5.9 14.3831 5.9 15.5h1.2zm2.9 2.9c-1.60163 0-2.9-1.2984-2.9-2.9H5.9c0 2.2644 1.83563 4.1 4.1 4.1v-1.2zm2.9-2.9c0 1.6016-1.2984 2.9-2.9 2.9v1.2c2.2644 0 4.1-1.8356 4.1-4.1h-1.2zm-.8285-2.0296c.5131.5237.8285 1.2392.8285 2.0296h1.2c0-1.1169-.4474-2.1306-1.1715-2.8694l-.857.8398zM11.9 3.5v9.5505h1.2V3.5h-1.2zM10 1.6c1.0493 0 1.9.85066 1.9 1.9h1.2c0-1.71208-1.3879-3.1-3.1-3.1v1.2z" fill="currentColor"/>    <path d="M10 14V8" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>    <path d="M14 3h3m-3 3h3m-3 3h3m-8 6.5a1 1 0 102 0 1 1 0 10-2 0" stroke="currentColor" stroke-width="1.2"/>  ';--icon-vibrance: '  <path d="M2.125 5.6407c-.71643 1.29152-1.12439 2.77782-1.12439 4.3594 0 1.5816.40796 3.0679 1.12439 4.3594V5.6407z" fill="url(#paint0_linear)"/>  <path d="M2.875 15.4986V4.5016c.50222-.64987 1.09136-1.22915 1.75-1.72041V17.219c-.65864-.4912-1.24778-1.0705-1.75-1.7204z" fill="url(#paint1_linear)"/>  <path d="M5.375 17.722c.54811.3291 1.13415.6014 1.75.8089V1.46929c-.61585.20751-1.20189.47984-1.75.80888V17.722z" fill="url(#paint2_linear)"/>  <path d="M7.875 1.25258V18.7476c.56442.1367 1.14962.2202 1.75.2448V1.0078c-.60038.02465-1.18558.10811-1.75.24478z" fill="url(#paint3_linear)"/>  <path d="M10.375 1.00775V18.9925c.6004-.0246 1.1856-.108 1.75-.2446V1.25228c-.5644-.13658-1.1496-.21996-1.75-.24453z" fill="url(#paint4_linear)"/>  <path d="M12.875 1.46887V18.5313c.6158-.2074 1.2019-.4796 1.75-.8085V2.27744c-.5481-.32893-1.1342-.60115-1.75-.80857z" fill="url(#paint5_linear)"/>  <path d="M15.375 2.78028V17.2199c.6586-.491 1.2477-1.0701 1.75-1.7197V4.50002c-.5023-.64963-1.0914-1.22868-1.75-1.71974z" fill="url(#paint6_linear)"/>  <path d="M17.875 5.6385v8.7232c.7172-1.292 1.1256-2.7791 1.1256-4.3616 0-1.58248-.4084-3.06956-1.1256-4.3616z" fill="url(#paint7_linear)"/>  <defs>    <linearGradient id="paint0_linear" x1="19.0006" y1="10.0001" x2="1.00061" y2="10.0001" gradientUnits="userSpaceOnUse">      <stop stop-color="#DE15FF"/>      <stop offset=".203125" stop-color="#0029FF"/>      <stop offset=".479167" stop-color="#2AE4F0"/>      <stop offset=".604167" stop-color="#15EF11"/>      <stop offset=".75" stop-color="#FAE528"/>      <stop offset="1" stop-color="#EB2A2A"/>    </linearGradient>    <linearGradient id="paint1_linear" x1="19.0006" y1="10.0001" x2="1.00061" y2="10.0001" gradientUnits="userSpaceOnUse">      <stop stop-color="#DE15FF"/>      <stop offset=".203125" stop-color="#0029FF"/>      <stop offset=".479167" stop-color="#2AE4F0"/>      <stop offset=".604167" stop-color="#15EF11"/>      <stop offset=".75" stop-color="#FAE528"/>      <stop offset="1" stop-color="#EB2A2A"/>    </linearGradient>    <linearGradient id="paint2_linear" x1="19.0006" y1="10.0001" x2="1.00061" y2="10.0001" gradientUnits="userSpaceOnUse">      <stop stop-color="#DE15FF"/>      <stop offset=".203125" stop-color="#0029FF"/>      <stop offset=".479167" stop-color="#2AE4F0"/>      <stop offset=".604167" stop-color="#15EF11"/>      <stop offset=".75" stop-color="#FAE528"/>      <stop offset="1" stop-color="#EB2A2A"/>    </linearGradient>    <linearGradient id="paint3_linear" x1="19.0006" y1="10.0001" x2="1.00061" y2="10.0001" gradientUnits="userSpaceOnUse">      <stop stop-color="#DE15FF"/>      <stop offset=".203125" stop-color="#0029FF"/>      <stop offset=".479167" stop-color="#2AE4F0"/>      <stop offset=".604167" stop-color="#15EF11"/>      <stop offset=".75" stop-color="#FAE528"/>      <stop offset="1" stop-color="#EB2A2A"/>    </linearGradient>    <linearGradient id="paint4_linear" x1="19.0006" y1="10.0001" x2="1.00061" y2="10.0001" gradientUnits="userSpaceOnUse">      <stop stop-color="#DE15FF"/>      <stop offset=".203125" stop-color="#0029FF"/>      <stop offset=".479167" stop-color="#2AE4F0"/>      <stop offset=".604167" stop-color="#15EF11"/>      <stop offset=".75" stop-color="#FAE528"/>      <stop offset="1" stop-color="#EB2A2A"/>    </linearGradient>    <linearGradient id="paint5_linear" x1="19.0006" y1="10.0001" x2="1.00061" y2="10.0001" gradientUnits="userSpaceOnUse">      <stop stop-color="#DE15FF"/>      <stop offset=".203125" stop-color="#0029FF"/>      <stop offset=".479167" stop-color="#2AE4F0"/>      <stop offset=".604167" stop-color="#15EF11"/>      <stop offset=".75" stop-color="#FAE528"/>      <stop offset="1" stop-color="#EB2A2A"/>    </linearGradient>    <linearGradient id="paint6_linear" x1="19.0006" y1="10.0001" x2="1.00061" y2="10.0001" gradientUnits="userSpaceOnUse">      <stop stop-color="#DE15FF"/>      <stop offset=".203125" stop-color="#0029FF"/>      <stop offset=".479167" stop-color="#2AE4F0"/>      <stop offset=".604167" stop-color="#15EF11"/>      <stop offset=".75" stop-color="#FAE528"/>      <stop offset="1" stop-color="#EB2A2A"/>    </linearGradient>    <linearGradient id="paint7_linear" x1="19.0006" y1="10.0001" x2="1.00061" y2="10.0001" gradientUnits="userSpaceOnUse">      <stop stop-color="#DE15FF"/>      <stop offset=".203125" stop-color="#0029FF"/>      <stop offset=".479167" stop-color="#2AE4F0"/>      <stop offset=".604167" stop-color="#15EF11"/>      <stop offset=".75" stop-color="#FAE528"/>      <stop offset="1" stop-color="#EB2A2A"/>    </linearGradient>  </defs>  '}:host(.lr-cloud-image-editor),.lr-cloud-image-editor{--l10n-cancel: "Cancel";--l10n-apply: "Apply";--l10n-brightness: "Brightness";--l10n-exposure: "Exposure";--l10n-gamma: "Gamma";--l10n-contrast: "Contrast";--l10n-saturation: "Saturation";--l10n-vibrance: "Vibrance";--l10n-warmth: "Warmth";--l10n-enhance: "Enhance";--l10n-original: "Original"}:host(.lr-cloud-image-editor),.lr-cloud-image-editor{--rgb-primary-accent: 6, 2, 196;--rgb-text-base: 0, 0, 0;--rgb-text-accent-contrast: 255, 255, 255;--rgb-fill-contrast: 255, 255, 255;--rgb-fill-shaded: 245, 245, 245;--rgb-shadow: 0, 0, 0;--rgb-error: 209, 81, 81;--opacity-shade-mid: .2;--color-primary-accent: rgb(var(--rgb-primary-accent));--color-text-base: rgb(var(--rgb-text-base));--color-text-accent-contrast: rgb(var(--rgb-text-accent-contrast));--color-text-soft: rgb(var(--rgb-fill-contrast));--color-text-error: rgb(var(--rgb-error));--color-fill-contrast: rgb(var(--rgb-fill-contrast));--color-modal-backdrop: rgba(var(--rgb-fill-shaded), .95);--color-image-background: rgba(var(--rgb-fill-shaded));--color-outline: rgba(var(--rgb-text-base), var(--opacity-shade-mid));--color-underline: rgba(var(--rgb-text-base), .08);--color-shade: rgba(var(--rgb-text-base), .02);--color-focus-ring: var(--color-primary-accent);--color-input-placeholder: rgba(var(--rgb-text-base), .32);--color-error: rgb(var(--rgb-error));--font-size-ui: 16px;--font-size-title: 18px;--font-weight-title: 500;--font-size-soft: 14px;--size-touch-area: 40px;--size-panel-heading: 66px;--size-ui-min-width: 130px;--size-line-width: 1px;--size-modal-width: 650px;--border-radius-connect: 2px;--border-radius-editor: 3px;--border-radius-thumb: 4px;--border-radius-ui: 5px;--border-radius-base: 6px;--cldtr-gap-min: 5px;--cldtr-gap-mid-1: 10px;--cldtr-gap-mid-2: 15px;--cldtr-gap-max: 20px;--opacity-min: var(--opacity-shade-mid);--opacity-mid: .1;--opacity-max: .05;--transition-duration-2: var(--transition-duration-all, .2s);--transition-duration-3: var(--transition-duration-all, .3s);--transition-duration-4: var(--transition-duration-all, .4s);--transition-duration-5: var(--transition-duration-all, .5s);--shadow-base: 0px 5px 15px rgba(var(--rgb-shadow), .1), 0px 1px 4px rgba(var(--rgb-shadow), .15);--modal-header-opacity: 1;--modal-header-height: var(--size-panel-heading);--modal-toolbar-height: var(--size-panel-heading);--transparent-pixel: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=);display:block;width:100%;height:100%;max-height:100%}:host(.lr-cloud-image-editor) :is([can-handle-paste]:hover,[can-handle-paste]:focus),.lr-cloud-image-editor :is([can-handle-paste]:hover,[can-handle-paste]:focus){--can-handle-paste: "true"}:host(.lr-cloud-image-editor) :is([tabindex][focus-visible],[tabindex]:hover,[with-effects][focus-visible],[with-effects]:hover),.lr-cloud-image-editor :is([tabindex][focus-visible],[tabindex]:hover,[with-effects][focus-visible],[with-effects]:hover){--filter-effect: var(--hover-filter) !important;--opacity-effect: var(--hover-opacity) !important;--color-effect: var(--hover-color-rgb) !important}:host(.lr-cloud-image-editor) :is([tabindex]:active,[with-effects]:active),.lr-cloud-image-editor :is([tabindex]:active,[with-effects]:active){--filter-effect: var(--down-filter) !important;--opacity-effect: var(--down-opacity) !important;--color-effect: var(--down-color-rgb) !important}:host(.lr-cloud-image-editor) :is([tabindex][active],[with-effects][active]),.lr-cloud-image-editor :is([tabindex][active],[with-effects][active]){--filter-effect: var(--active-filter) !important;--opacity-effect: var(--active-opacity) !important;--color-effect: var(--active-color-rgb) !important}:host(.lr-cloud-image-editor) [hidden-scrollbar]::-webkit-scrollbar,.lr-cloud-image-editor [hidden-scrollbar]::-webkit-scrollbar{display:none}:host(.lr-cloud-image-editor) [hidden-scrollbar],.lr-cloud-image-editor [hidden-scrollbar]{-ms-overflow-style:none;scrollbar-width:none}:host(.lr-cloud-image-editor.editor_ON),.lr-cloud-image-editor.editor_ON{--modal-header-opacity: 0;--modal-header-height: 0px;--modal-toolbar-height: calc(var(--size-panel-heading) * 2)}:host(.lr-cloud-image-editor.editor_OFF),.lr-cloud-image-editor.editor_OFF{--modal-header-opacity: 1;--modal-header-height: var(--size-panel-heading);--modal-toolbar-height: var(--size-panel-heading)}:host(.lr-cloud-image-editor)>.wrapper,.lr-cloud-image-editor>.wrapper{--l-min-img-height: var(--modal-toolbar-height);--l-max-img-height: 100%;--l-edit-button-width: 120px;--l-toolbar-horizontal-padding: var(--cldtr-gap-mid-1);position:relative;display:grid;grid-template-rows:minmax(var(--l-min-img-height),var(--l-max-img-height)) minmax(var(--modal-toolbar-height),auto);height:100%;overflow:hidden;overflow-y:auto;transition:.3s}@media only screen and (max-width: 800px){:host(.lr-cloud-image-editor)>.wrapper,.lr-cloud-image-editor>.wrapper{--l-edit-button-width: 70px;--l-toolbar-horizontal-padding: var(--cldtr-gap-min)}}:host(.lr-cloud-image-editor)>.wrapper>.viewport,.lr-cloud-image-editor>.wrapper>.viewport{display:flex;align-items:center;justify-content:center;overflow:hidden}:host(.lr-cloud-image-editor)>.wrapper>.viewport>.image_container>.image,.lr-cloud-image-editor>.wrapper>.viewport>.image_container>.image{--viewer-image-opacity: 1;position:absolute;top:0;left:0;z-index:10;display:block;box-sizing:border-box;width:100%;height:100%;object-fit:scale-down;background-color:var(--color-image-background);transform:scale(1);opacity:var(--viewer-image-opacity);user-select:none;pointer-events:auto}:host(.lr-cloud-image-editor)>.wrapper>.viewport>.image_container>.image.image_visible_viewer,.lr-cloud-image-editor>.wrapper>.viewport>.image_container>.image.image_visible_viewer{transition:opacity var(--transition-duration-3) ease-in-out,transform var(--transition-duration-4)}:host(.lr-cloud-image-editor)>.wrapper>.viewport>.image_container>.image.image_hidden_to_cropper,.lr-cloud-image-editor>.wrapper>.viewport>.image_container>.image.image_hidden_to_cropper{--viewer-image-opacity: 0;background-image:var(--transparent-pixel);transform:scale(1);transition:transform var(--transition-duration-4),opacity var(--transition-duration-3) steps(1,jump-end);pointer-events:none}:host(.lr-cloud-image-editor)>.wrapper>.viewport>.image_container>.image.image_hidden_effects,.lr-cloud-image-editor>.wrapper>.viewport>.image_container>.image.image_hidden_effects{--viewer-image-opacity: 0;transform:scale(1);transition:opacity var(--transition-duration-3) cubic-bezier(.5,0,1,1),transform var(--transition-duration-4);pointer-events:none}:host(.lr-cloud-image-editor)>.wrapper>.viewport>.image_container,.lr-cloud-image-editor>.wrapper>.viewport>.image_container{position:relative;display:block;width:100%;height:100%;background-color:var(--color-image-background);transition:var(--transition-duration-3)}:host(.lr-cloud-image-editor)>.wrapper>.toolbar,.lr-cloud-image-editor>.wrapper>.toolbar{position:relative;transition:.3s}:host(.lr-cloud-image-editor)>.wrapper>.toolbar>.toolbar_content,.lr-cloud-image-editor>.wrapper>.toolbar>.toolbar_content{position:absolute;bottom:0;left:0;box-sizing:border-box;width:100%;height:var(--modal-toolbar-height);min-height:var(--size-panel-heading);background-color:var(--color-fill-contrast)}:host(.lr-cloud-image-editor)>.wrapper>.toolbar>.toolbar_content.toolbar_content__viewer,.lr-cloud-image-editor>.wrapper>.toolbar>.toolbar_content.toolbar_content__viewer{display:flex;align-items:center;justify-content:space-between;height:var(--size-panel-heading);padding-right:var(--l-toolbar-horizontal-padding);padding-left:var(--l-toolbar-horizontal-padding)}:host(.lr-cloud-image-editor)>.wrapper>.toolbar>.toolbar_content.toolbar_content__editor,.lr-cloud-image-editor>.wrapper>.toolbar>.toolbar_content.toolbar_content__editor{display:flex}:host(.lr-cloud-image-editor)>.wrapper>.viewport>.info_pan,.lr-cloud-image-editor>.wrapper>.viewport>.info_pan{position:absolute;user-select:none}:host(.lr-cloud-image-editor)>.wrapper>.viewport>.file_type_outer,.lr-cloud-image-editor>.wrapper>.viewport>.file_type_outer{position:absolute;z-index:2;display:flex;max-width:120px;transform:translate(-40px);user-select:none}:host(.lr-cloud-image-editor)>.wrapper>.viewport>.file_type_outer>.file_type,.lr-cloud-image-editor>.wrapper>.viewport>.file_type_outer>.file_type{padding:4px .8em}:host(.lr-cloud-image-editor)>.wrapper>.network_problems_splash,.lr-cloud-image-editor>.wrapper>.network_problems_splash{position:absolute;z-index:4;display:flex;flex-direction:column;width:100%;height:100%;background-color:var(--color-fill-contrast)}:host(.lr-cloud-image-editor)>.wrapper>.network_problems_splash>.network_problems_content,.lr-cloud-image-editor>.wrapper>.network_problems_splash>.network_problems_content{display:flex;flex:1;flex-direction:column;align-items:center;justify-content:center}:host(.lr-cloud-image-editor)>.wrapper>.network_problems_splash>.network_problems_content>.network_problems_icon,.lr-cloud-image-editor>.wrapper>.network_problems_splash>.network_problems_content>.network_problems_icon{display:flex;align-items:center;justify-content:center;width:40px;height:40px;color:rgba(var(--rgb-text-base),.6);background-color:rgba(var(--rgb-fill-shaded));border-radius:50%}:host(.lr-cloud-image-editor)>.wrapper>.network_problems_splash>.network_problems_content>.network_problems_text,.lr-cloud-image-editor>.wrapper>.network_problems_splash>.network_problems_content>.network_problems_text{margin-top:var(--cldtr-gap-max);font-size:var(--font-size-ui)}:host(.lr-cloud-image-editor)>.wrapper>.network_problems_splash>.network_problems_footer,.lr-cloud-image-editor>.wrapper>.network_problems_splash>.network_problems_footer{display:flex;align-items:center;justify-content:center;height:var(--size-panel-heading)}lr-crop-frame>.svg{position:absolute;top:0;left:0;z-index:2;width:100%;height:100%;border-top-left-radius:var(--border-radius-base);border-top-right-radius:var(--border-radius-base);opacity:inherit;transition:var(--transition-duration-3)}lr-crop-frame>.thumb{--idle-color-rgb: var(--color-text-base);--hover-color-rgb: var(--color-primary-accent);--focus-color-rgb: var(--color-primary-accent);--down-color-rgb: var(--color-primary-accent);--color-effect: var(--idle-color-rgb);color:var(--color-effect);transition:color var(--transition-duration-3),opacity var(--transition-duration-3)}lr-crop-frame>.thumb--visible{opacity:1;pointer-events:auto}lr-crop-frame>.thumb--hidden{opacity:0;pointer-events:none}lr-crop-frame>.guides{transition:var(--transition-duration-3)}lr-crop-frame>.guides--hidden{opacity:0}lr-crop-frame>.guides--semi-hidden{opacity:.2}lr-crop-frame>.guides--visible{opacity:1}lr-editor-button-control,lr-editor-crop-button-control,lr-editor-filter-control,lr-editor-operation-control{--l-base-min-width: 40px;--l-base-height: var(--l-base-min-width);--opacity-effect: var(--idle-opacity);--color-effect: var(--idle-color-rgb);--filter-effect: var(--idle-filter);--idle-color-rgb: var(--rgb-text-base);--idle-opacity: .05;--idle-filter: 1;--hover-color-rgb: var(--idle-color-rgb);--hover-opacity: .08;--hover-filter: .8;--down-color-rgb: var(--hover-color-rgb);--down-opacity: .12;--down-filter: .6;position:relative;display:grid;grid-template-columns:var(--l-base-min-width) auto;align-items:center;height:var(--l-base-height);color:rgba(var(--idle-color-rgb));outline:none;cursor:pointer;transition:var(--l-width-transition)}lr-editor-button-control.active,lr-editor-operation-control.active,lr-editor-crop-button-control.active,lr-editor-filter-control.active{--idle-color-rgb: var(--rgb-primary-accent)}lr-editor-filter-control.not_active .preview[loaded]{opacity:1}lr-editor-filter-control.active .preview{opacity:0}lr-editor-button-control.not_active,lr-editor-operation-control.not_active,lr-editor-crop-button-control.not_active,lr-editor-filter-control.not_active{--idle-color-rgb: var(--rgb-text-base)}lr-editor-button-control>.before,lr-editor-operation-control>.before,lr-editor-crop-button-control>.before,lr-editor-filter-control>.before{position:absolute;right:0;left:0;z-index:-1;width:100%;height:100%;background-color:rgba(var(--color-effect),var(--opacity-effect));border-radius:var(--border-radius-editor);transition:var(--transition-duration-3)}lr-editor-button-control>.title,lr-editor-operation-control>.title,lr-editor-crop-button-control>.title,lr-editor-filter-control>.title{padding-right:var(--cldtr-gap-mid-1);font-size:.7em;letter-spacing:1.004px;text-transform:uppercase}lr-editor-filter-control>.preview{position:absolute;right:0;left:0;z-index:1;width:100%;height:var(--l-base-height);background-repeat:no-repeat;background-size:contain;border-radius:var(--border-radius-editor);opacity:0;filter:brightness(var(--filter-effect));transition:var(--transition-duration-3)}lr-editor-filter-control>.original-icon{color:var(--color-text-base);opacity:.3}lr-editor-image-cropper{position:absolute;top:0;left:0;z-index:10;display:block;width:100%;height:100%;opacity:0;pointer-events:none;touch-action:none}lr-editor-image-cropper.active_from_editor{transform:scale(1) translate(0);opacity:1;transition:transform var(--transition-duration-4) cubic-bezier(.37,0,.63,1) .4s,opacity var(--transition-duration-3);pointer-events:auto}lr-editor-image-cropper.active_from_viewer{transform:scale(1) translate(0);opacity:1;transition:transform var(--transition-duration-4) cubic-bezier(.37,0,.63,1) .4s,opacity var(--transition-duration-3);pointer-events:auto}lr-editor-image-cropper.inactive_to_editor{opacity:0;transition:transform var(--transition-duration-4) cubic-bezier(.37,0,.63,1),opacity var(--transition-duration-3) calc(var(--transition-duration-3) + .05s);pointer-events:none}lr-editor-image-cropper>.canvas{position:absolute;top:0;left:0;z-index:1;display:block;width:100%;height:100%}lr-editor-image-fader{position:absolute;top:0;left:0;display:block;width:100%;height:100%}lr-editor-image-fader.active_from_viewer{z-index:3;transform:scale(1);opacity:1;transition:transform var(--transition-duration-4),opacity var(--transition-duration-3) steps(1,jump-start);pointer-events:auto}lr-editor-image-fader.active_from_cropper{z-index:3;transform:scale(1);opacity:1;transition:transform var(--transition-duration-4),opacity var(--transition-duration-3) steps(1,jump-end);pointer-events:auto}lr-editor-image-fader.inactive_to_cropper{z-index:3;transform:scale(1);opacity:0;transition:transform var(--transition-duration-4),opacity var(--transition-duration-3) steps(1,jump-end);pointer-events:none}lr-editor-image-fader .fader-image{position:absolute;top:0;left:0;display:block;width:100%;height:100%;object-fit:scale-down;transform:scale(1);user-select:none;content-visibility:auto}lr-editor-image-fader .fader-image--preview{background-color:var(--color-image-background);border-top-left-radius:var(--border-radius-base);border-top-right-radius:var(--border-radius-base);transform:scale(1);opacity:0;transition:var(--transition-duration-3)}lr-editor-scroller{display:flex;align-items:center;width:100%;height:100%;overflow-x:scroll}lr-editor-slider{display:flex;align-items:center;justify-content:center;width:100%;height:66px}lr-editor-toolbar{position:relative;width:100%;height:100%}@media only screen and (max-width: 600px){lr-editor-toolbar{--l-tab-gap: var(--cldtr-gap-mid-1);--l-slider-padding: var(--cldtr-gap-min);--l-controls-padding: var(--cldtr-gap-min)}}@media only screen and (min-width: 601px){lr-editor-toolbar{--l-tab-gap: calc(var(--cldtr-gap-mid-1) + var(--cldtr-gap-max));--l-slider-padding: var(--cldtr-gap-mid-1);--l-controls-padding: var(--cldtr-gap-mid-1)}}lr-editor-toolbar>.toolbar-container{position:relative;width:100%;height:100%;overflow:hidden}lr-editor-toolbar>.toolbar-container>.sub-toolbar{position:absolute;display:grid;grid-template-rows:1fr 1fr;width:100%;height:100%;background-color:var(--color-fill-contrast);transition:opacity var(--transition-duration-3) ease-in-out,transform var(--transition-duration-3) ease-in-out,visibility var(--transition-duration-3) ease-in-out}lr-editor-toolbar>.toolbar-container>.sub-toolbar.sub-toolbar--visible{transform:translateY(0);opacity:1;pointer-events:auto}lr-editor-toolbar>.toolbar-container>.sub-toolbar.sub-toolbar--top-hidden{transform:translateY(100%);opacity:0;pointer-events:none}lr-editor-toolbar>.toolbar-container>.sub-toolbar.sub-toolbar--bottom-hidden{transform:translateY(-100%);opacity:0;pointer-events:none}lr-editor-toolbar>.toolbar-container>.sub-toolbar>.controls-row{display:flex;align-items:center;justify-content:space-between;padding-right:var(--l-controls-padding);padding-left:var(--l-controls-padding)}lr-editor-toolbar>.toolbar-container>.sub-toolbar>.controls-row>.tab-toggles{position:relative;display:grid;grid-auto-flow:column;grid-gap:0px var(--l-tab-gap);align-items:center;height:100%}lr-editor-toolbar>.toolbar-container>.sub-toolbar>.controls-row>.tab-toggles>.tab-toggles_indicator{position:absolute;bottom:0;left:0;width:var(--size-touch-area);height:2px;background-color:var(--color-primary-accent);transform:translate(0);transition:transform var(--transition-duration-3)}lr-editor-toolbar>.toolbar-container>.sub-toolbar>.tab-content-row{position:relative}lr-editor-toolbar>.toolbar-container>.sub-toolbar>.tab-content-row>.tab-content{position:absolute;top:0;left:0;display:flex;width:100%;height:100%;overflow:hidden;opacity:0;content-visibility:auto}lr-editor-toolbar>.toolbar-container>.sub-toolbar>.tab-content-row>.tab-content.tab-content--visible{opacity:1;pointer-events:auto}lr-editor-toolbar>.toolbar-container>.sub-toolbar>.tab-content-row>.tab-content.tab-content--hidden{opacity:0;pointer-events:none}lr-editor-toolbar>.toolbar-container>.sub-toolbar>.tab-content-row>.tab-content .controls-list_align{display:grid;grid-template-areas:". inner .";grid-template-columns:1fr auto 1fr;box-sizing:border-box;min-width:100%;padding-left:var(--cldtr-gap-max)}lr-editor-toolbar>.toolbar-container>.sub-toolbar>.tab-content-row>.tab-content .controls-list_inner{display:grid;grid-area:inner;grid-auto-flow:column;grid-gap:calc((var(--cldtr-gap-min) - 1px) * 3)}lr-editor-toolbar>.toolbar-container>.sub-toolbar>.tab-content-row>.tab-content .controls-list_inner:last-child{padding-right:var(--cldtr-gap-max)}lr-editor-toolbar .controls-list_last-item{margin-right:var(--cldtr-gap-max)}lr-editor-toolbar .info-tooltip_container{position:absolute;display:flex;align-items:flex-start;justify-content:center;width:100%;height:100%}lr-editor-toolbar .info-tooltip_wrapper{position:absolute;top:calc(-100% - var(--cldtr-gap-mid-2));display:flex;flex-direction:column;justify-content:flex-end;height:100%;pointer-events:none}lr-editor-toolbar .info-tooltip{z-index:3;padding-top:calc(var(--cldtr-gap-min) / 2);padding-right:var(--cldtr-gap-min);padding-bottom:calc(var(--cldtr-gap-min) / 2);padding-left:var(--cldtr-gap-min);color:var(--color-text-base);font-size:.7em;letter-spacing:1px;text-transform:uppercase;background-color:var(--color-text-accent-contrast);border-radius:var(--border-radius-editor);transform:translateY(100%);opacity:0;transition:var(--transition-duration-3)}lr-editor-toolbar .info-tooltip_visible{transform:translateY(0);opacity:1}lr-editor-toolbar .slider{padding-right:var(--l-slider-padding);padding-left:var(--l-slider-padding)}lr-btn-ui{--filter-effect: var(--idle-brightness);--opacity-effect: var(--idle-opacity);--color-effect: var(--idle-color-rgb);--l-transition-effect: var(--css-transition, color var(--transition-duration-2), filter var(--transition-duration-2));display:inline-flex;align-items:center;box-sizing:var(--css-box-sizing, border-box);height:var(--css-height, var(--size-touch-area));padding-right:var(--css-padding-right, var(--cldtr-gap-mid-1));padding-left:var(--css-padding-left, var(--cldtr-gap-mid-1));color:rgba(var(--color-effect),var(--opacity-effect));outline:none;cursor:pointer;filter:brightness(var(--filter-effect));transition:var(--l-transition-effect);user-select:none}lr-btn-ui .text{white-space:nowrap}lr-btn-ui .icon{display:flex;align-items:center;justify-content:center;color:rgba(var(--color-effect),var(--opacity-effect));filter:brightness(var(--filter-effect));transition:var(--l-transition-effect)}lr-btn-ui .icon_left{margin-right:var(--cldtr-gap-mid-1);margin-left:0}lr-btn-ui .icon_right{margin-right:0;margin-left:var(--cldtr-gap-mid-1)}lr-btn-ui .icon_single{margin-right:0;margin-left:0}lr-btn-ui .icon_hidden{display:none;margin:0}lr-btn-ui.primary{--idle-color-rgb: var(--rgb-primary-accent);--idle-brightness: 1;--idle-opacity: .6;--hover-color-rgb: var(--idle-color-rgb);--hover-brightness: 1;--hover-opacity: 1;--down-color-rgb: var(--hover-color-rgb);--down-brightness: .75;--down-opacity: 1;--active-color-rgb: var(--rgb-primary-accent);--active-brightness: 1;--active-opacity: 1}lr-btn-ui.boring{--idle-color-rgb: var(--rgb-text-base);--idle-brightness: 1;--idle-opacity: .6;--hover-color-rgb: var(--rgb-text-base);--hover-brightness: 1;--hover-opacity: 1;--down-color-rgb: var(--hover-color-rgb);--down-brightness: 1;--down-opacity: 1;--active-color-rgb: var(--rgb-primary-accent);--active-brightness: 1;--active-opacity: 1}lr-btn-ui.default{--idle-color-rgb: var(--rgb-text-base);--idle-brightness: 1;--idle-opacity: .6;--hover-color-rgb: var(--rgb-primary-accent);--hover-brightness: 1;--hover-opacity: 1;--down-color-rgb: var(--hover-color-rgb);--down-brightness: .75;--down-opacity: 1;--active-color-rgb: var(--rgb-primary-accent);--active-brightness: 1;--active-opacity: 1}lr-line-loader-ui{position:absolute;top:0;left:0;z-index:9999;width:100%;height:2px;opacity:.5}lr-line-loader-ui .inner{width:25%;max-width:200px;height:100%}lr-line-loader-ui .line{width:100%;height:100%;background-color:var(--color-primary-accent);transform:translate(-101%);transition:transform 1s}lr-slider-ui{--l-thumb-size: 24px;--l-zero-dot-size: 5px;--l-zero-dot-offset: 2px;--idle-color-rgb: var(--rgb-text-base);--hover-color-rgb: var(--rgb-primary-accent);--down-color-rgb: var(--rgb-primary-accent);--color-effect: var(--idle-color-rgb);--l-color: rgb(var(--color-effect));position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:calc(var(--l-thumb-size) + (var(--l-zero-dot-size) + var(--l-zero-dot-offset)) * 2)}lr-slider-ui .thumb{position:absolute;left:0;width:var(--l-thumb-size);height:var(--l-thumb-size);background-color:var(--l-color);border-radius:50%;transform:translate(0);opacity:1;transition:opacity var(--transition-duration-2)}lr-slider-ui .steps{position:absolute;display:flex;align-items:center;justify-content:space-between;box-sizing:border-box;width:100%;height:100%;padding-right:calc(var(--l-thumb-size) / 2);padding-left:calc(var(--l-thumb-size) / 2)}lr-slider-ui .border-step{width:0px;height:10px;border-right:1px solid var(--l-color);opacity:.6;transition:var(--transition-duration-2)}lr-slider-ui .minor-step{width:0px;height:4px;border-right:1px solid var(--l-color);opacity:.2;transition:var(--transition-duration-2)}lr-slider-ui .zero-dot{position:absolute;top:calc(100% - var(--l-zero-dot-offset) * 2);left:calc(var(--l-thumb-size) / 2 - var(--l-zero-dot-size) / 2);width:var(--l-zero-dot-size);height:var(--l-zero-dot-size);background-color:var(--color-primary-accent);border-radius:50%;opacity:0;transition:var(--transition-duration-3)}lr-slider-ui .input{position:absolute;width:calc(100% - 10px);height:100%;margin:0;cursor:pointer;opacity:0}lr-presence-toggle.transition{transition:opacity var(--transition-duration-3),visibility var(--transition-duration-3)}lr-presence-toggle.visible{opacity:1;pointer-events:inherit}lr-presence-toggle.hidden{opacity:0;pointer-events:none}ctx-provider{--color-text-base: black;--color-primary-accent: blue;display:flex;align-items:center;justify-content:center;width:190px;height:40px;padding-right:10px;padding-left:10px;background-color:#f5f5f5;border-radius:3px}lr-cloud-image-editor-activity{position:relative;display:flex;width:100%;height:100%;overflow:hidden;background-color:var(--clr-background-light)}lr-modal lr-cloud-image-editor-activity{width:min(calc(var(--modal-max-w) - var(--gap-mid) * 2),calc(100vw - var(--gap-mid) * 2));height:var(--modal-content-height-fill, 100%)}lr-select{display:inline-flex}lr-select>button{position:relative;display:inline-flex;align-items:center;padding-right:0!important;color:var(--clr-btn-txt-secondary);background-color:var(--clr-btn-bgr-secondary);box-shadow:var(--shadow-btn-secondary)}lr-select>button>select{position:absolute;display:block;width:100%;height:100%;opacity:0}:host{--cfg-pubkey: "demopublickey";--cfg-source-list: "unsplash"}@keyframes splide-loading{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.splide__track--draggable{-webkit-touch-callout:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.splide__track--fade>.splide__list>.splide__slide{margin:0!important;opacity:0;z-index:0}.splide__track--fade>.splide__list>.splide__slide.is-active{opacity:1;z-index:1}.splide--rtl{direction:rtl}.splide__track--ttb>.splide__list{display:block}.splide__container{box-sizing:border-box;position:relative}.splide__list{backface-visibility:hidden;display:-ms-flexbox;display:flex;height:100%;margin:0!important;padding:0!important}.splide.is-initialized:not(.is-active) .splide__list{display:block}.splide__pagination{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:center;justify-content:center;margin:0;pointer-events:none}.splide__pagination li{display:inline-block;line-height:1;list-style-type:none;margin:0;pointer-events:auto}.splide:not(.is-overflow) .splide__pagination{display:none}.splide__progress__bar{width:0}.splide{position:relative;visibility:hidden}.splide.is-initialized,.splide.is-rendered{visibility:visible}.splide__slide{backface-visibility:hidden;box-sizing:border-box;-ms-flex-negative:0;flex-shrink:0;list-style-type:none!important;margin:0;position:relative}.splide__slide img{vertical-align:bottom}.splide__spinner{animation:splide-loading 1s linear infinite;border:2px solid #999;border-left-color:transparent;border-radius:50%;bottom:0;contain:strict;display:inline-block;height:20px;left:0;margin:auto;position:absolute;right:0;top:0;width:20px}.splide__sr{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.splide__toggle.is-active .splide__toggle__play,.splide__toggle__pause{display:none}.splide__toggle.is-active .splide__toggle__pause{display:inline}.splide__track{overflow:hidden;position:relative;z-index:0}:host{--icon-unsplash: "M15 4.5H9v4h6v-4ZM4 10.5h5v4h6v-4h5v9H4v-9Z";--l10n-src-type-unsplash: "Unsplash"}lr-unsplash-source{display:flex;flex-direction:column;width:100%;height:100%;background-color:var(--clr-background-light);overflow:hidden}lr-modal lr-unsplash-source{width:min(calc(var(--modal-max-w) - var(--gap-mid) * 2),calc(100vw - var(--gap-mid) * 2));height:var(--modal-content-height-fill, 100%);max-height:var(--modal-max-content-height)}lr-unsplash-source .toolbar{display:flex;justify-content:space-between;align-items:center;width:100%;padding:var(--gap-mid)}lr-unsplash-source .content{display:flex;overflow:hidden;flex:1 1 0;min-height:0}lr-unsplash-source .image-slider{display:flex;height:100%;width:100%;transition:all .3s}lr-unsplash-source .image-slider img{max-width:100%;max-height:100%;object-fit:cover;flex:0 0 100%}lr-unsplash-source .splide{width:100%}lr-unsplash-source .splide__track{height:100%}lr-unsplash-source .splide__slide{display:flex;align-items:center;justify-content:center;overflow:hidden}lr-unsplash-source .splide__slide img{height:100%;object-fit:cover;flex:0 1 100%}
`;class ln extends an{}f(ln,"template",`
    <lr-simple-btn></lr-simple-btn>

    <lr-modal strokes block-body-scrolling>
      <lr-start-from>
        <lr-drop-area with-icon clickable></lr-drop-area>
        <lr-source-list wrap></lr-source-list>
        <lr-copyright></lr-copyright>
      </lr-start-from>
      <lr-upload-list></lr-upload-list>
      <lr-camera-source></lr-camera-source>
      <lr-url-source></lr-url-source>
      <lr-external-source></lr-external-source>
      <lr-cloud-image-editor></lr-cloud-image-editor>
      <lr-unsplash-source></lr-unsplash-source>
    </lr-modal>

    <lr-message-box></lr-message-box>
    <lr-progress-bar-common></lr-progress-bar-common>
  `);ln.shadowStyles=Qc;class Jc extends rr{initTypes(){super.initTypes(),this.registerType({type:"unsplash",activity:"unsplash",icon:"unsplash"})}}function Gn(i,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,t.key,t)}}function ed(i,r,e){return r&&Gn(i.prototype,r),e&&Gn(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}/*!
 * Splide.js
 * Version  : 4.1.4
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */var Xn="(prefers-reduced-motion: reduce)",Mt=1,td=2,Wt=3,qt=4,_i=5,Ni=6,Gi=7,id={CREATED:Mt,MOUNTED:td,IDLE:Wt,MOVING:qt,SCROLLING:_i,DRAGGING:Ni,DESTROYED:Gi};function Ye(i){i.length=0}function dt(i,r,e){return Array.prototype.slice.call(i,r,e)}function G(i){return i.bind.apply(i,[null].concat(dt(arguments,1)))}var vo=setTimeout,Pr=function(){};function qn(i){return requestAnimationFrame(i)}function sr(i,r){return typeof r===i}function ci(i){return!dn(i)&&sr("object",i)}var cn=Array.isArray,bo=G(sr,"function"),nt=G(sr,"string"),yi=G(sr,"undefined");function dn(i){return i===null}function _o(i){try{return i instanceof(i.ownerDocument.defaultView||window).HTMLElement}catch{return!1}}function wi(i){return cn(i)?i:[i]}function Ee(i,r){wi(i).forEach(r)}function un(i,r){return i.indexOf(r)>-1}function Di(i,r){return i.push.apply(i,wi(r)),i}function je(i,r,e){i&&Ee(r,function(t){t&&i.classList[e?"add":"remove"](t)})}function Ne(i,r){je(i,nt(r)?r.split(" "):r,!0)}function xi(i,r){Ee(r,i.appendChild.bind(i))}function hn(i,r){Ee(i,function(e){var t=(r||e).parentNode;t&&t.insertBefore(e,r)})}function di(i,r){return _o(i)&&(i.msMatchesSelector||i.matches).call(i,r)}function yo(i,r){var e=i?dt(i.children):[];return r?e.filter(function(t){return di(t,r)}):e}function Ci(i,r){return r?yo(i,r)[0]:i.firstElementChild}var ui=Object.keys;function wt(i,r,e){return i&&(e?ui(i).reverse():ui(i)).forEach(function(t){t!=="__proto__"&&r(i[t],t)}),i}function hi(i){return dt(arguments,1).forEach(function(r){wt(r,function(e,t){i[t]=r[t]})}),i}function et(i){return dt(arguments,1).forEach(function(r){wt(r,function(e,t){cn(e)?i[t]=e.slice():ci(e)?i[t]=et({},ci(i[t])?i[t]:{},e):i[t]=e})}),i}function Yn(i,r){Ee(r||ui(i),function(e){delete i[e]})}function De(i,r){Ee(i,function(e){Ee(r,function(t){e&&e.removeAttribute(t)})})}function D(i,r,e){ci(r)?wt(r,function(t,n){D(i,n,t)}):Ee(i,function(t){dn(e)||e===""?De(t,r):t.setAttribute(r,String(e))})}function Ut(i,r,e){var t=document.createElement(i);return r&&(nt(r)?Ne(t,r):D(t,r)),e&&xi(e,t),t}function Se(i,r,e){if(yi(e))return getComputedStyle(i)[r];dn(e)||(i.style[r]=""+e)}function pi(i,r){Se(i,"display",r)}function wo(i){i.setActive&&i.setActive()||i.focus({preventScroll:!0})}function $e(i,r){return i.getAttribute(r)}function Kn(i,r){return i&&i.classList.contains(r)}function ye(i){return i.getBoundingClientRect()}function Ct(i){Ee(i,function(r){r&&r.parentNode&&r.parentNode.removeChild(r)})}function xo(i){return Ci(new DOMParser().parseFromString(i,"text/html").body)}function Be(i,r){i.preventDefault(),r&&(i.stopPropagation(),i.stopImmediatePropagation())}function Co(i,r){return i&&i.querySelector(r)}function pn(i,r){return r?dt(i.querySelectorAll(r)):[]}function We(i,r){je(i,r,!1)}function Nr(i){return i.timeStamp}function gt(i){return nt(i)?i:i?i+"px":""}var Ei="splide",fn="data-"+Ei;function oi(i,r){if(!i)throw new Error("["+Ei+"] "+(r||""))}var at=Math.min,Xi=Math.max,qi=Math.floor,fi=Math.ceil,pe=Math.abs;function Eo(i,r,e){return pe(i-r)<e}function zi(i,r,e,t){var n=at(r,e),a=Xi(r,e);return t?n<i&&i<a:n<=i&&i<=a}function It(i,r,e){var t=at(r,e),n=Xi(r,e);return at(Xi(t,i),n)}function Dr(i){return+(i>0)-+(i<0)}function zr(i,r){return Ee(r,function(e){i=i.replace("%s",""+e)}),i}function mn(i){return i<10?"0"+i:""+i}var Zn={};function rd(i){return""+i+mn(Zn[i]=(Zn[i]||0)+1)}function Ao(){var i=[];function r(o,s,l,c){n(o,s,function(d,u,h){var m="addEventListener"in d,p=m?d.removeEventListener.bind(d,u,l,c):d.removeListener.bind(d,l);m?d.addEventListener(u,l,c):d.addListener(l),i.push([d,u,h,l,p])})}function e(o,s,l){n(o,s,function(c,d,u){i=i.filter(function(h){return h[0]===c&&h[1]===d&&h[2]===u&&(!l||h[3]===l)?(h[4](),!1):!0})})}function t(o,s,l){var c,d=!0;return typeof CustomEvent=="function"?c=new CustomEvent(s,{bubbles:d,detail:l}):(c=document.createEvent("CustomEvent"),c.initCustomEvent(s,d,!1,l)),o.dispatchEvent(c),c}function n(o,s,l){Ee(o,function(c){c&&Ee(s,function(d){d.split(" ").forEach(function(u){var h=u.split(".");l(c,h[0],h[1])})})})}function a(){i.forEach(function(o){o[4]()}),Ye(i)}return{bind:r,unbind:e,dispatch:t,destroy:a}}var Tt="mounted",Qn="ready",ot="move",Ai="moved",To="click",nd="active",ad="inactive",od="visible",sd="hidden",ee="refresh",me="updated",mi="resize",gn="resized",ld="drag",cd="dragging",dd="dragged",vn="scroll",Yt="scrolled",ud="overflow",ko="destroy",hd="arrows:mounted",pd="arrows:updated",fd="pagination:mounted",md="pagination:updated",So="navigation:mounted",$o="autoplay:play",gd="autoplay:playing",Lo="autoplay:pause",Io="lazyload:loaded",Oo="sk",Ro="sh",Yi="ei";function K(i){var r=i?i.event.bus:document.createDocumentFragment(),e=Ao();function t(a,o){e.bind(r,wi(a).join(" "),function(s){o.apply(o,cn(s.detail)?s.detail:[])})}function n(a){e.dispatch(r,a,dt(arguments,1))}return i&&i.event.on(ko,e.destroy),hi(e,{bus:r,on:t,off:G(e.unbind,r),emit:n})}function lr(i,r,e,t){var n=Date.now,a,o=0,s,l=!0,c=0;function d(){if(!l){if(o=i?at((n()-a)/i,1):1,e&&e(o),o>=1&&(r(),a=n(),t&&++c>=t))return h();s=qn(d)}}function u(y){y||p(),a=n()-(y?o*i:0),l=!1,s=qn(d)}function h(){l=!0}function m(){a=n(),o=0,e&&e(o)}function p(){s&&cancelAnimationFrame(s),o=0,s=0,l=!0}function g(y){i=y}function _(){return l}return{start:u,rewind:m,pause:h,cancel:p,set:g,isPaused:_}}function vd(i){var r=i;function e(n){r=n}function t(n){return un(wi(n),r)}return{set:e,is:t}}function bd(i,r){var e=lr(r||0,i,null,1);return function(){e.isPaused()&&e.start()}}function _d(i,r,e){var t=i.state,n=e.breakpoints||{},a=e.reducedMotion||{},o=Ao(),s=[];function l(){var p=e.mediaQuery==="min";ui(n).sort(function(g,_){return p?+g-+_:+_-+g}).forEach(function(g){d(n[g],"("+(p?"min":"max")+"-width:"+g+"px)")}),d(a,Xn),u()}function c(p){p&&o.destroy()}function d(p,g){var _=matchMedia(g);o.bind(_,"change",u),s.push([p,_])}function u(){var p=t.is(Gi),g=e.direction,_=s.reduce(function(y,b){return et(y,b[1].matches?b[0]:{})},{});Yn(e),m(_),e.destroy?i.destroy(e.destroy==="completely"):p?(c(!0),i.mount()):g!==e.direction&&i.refresh()}function h(p){matchMedia(Xn).matches&&(p?et(e,a):Yn(e,ui(a)))}function m(p,g,_){et(e,p),g&&et(Object.getPrototypeOf(e),p),(_||!t.is(Mt))&&i.emit(me,e)}return{setup:l,destroy:c,reduce:h,set:m}}var cr="Arrow",dr=cr+"Left",ur=cr+"Right",Mo=cr+"Up",Uo=cr+"Down",Jn="rtl",hr="ttb",xr={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[Mo,ur],ArrowRight:[Uo,dr]};function yd(i,r,e){function t(a,o,s){s=s||e.direction;var l=s===Jn&&!o?1:s===hr?0:-1;return xr[a]&&xr[a][l]||a.replace(/width|left|right/i,function(c,d){var u=xr[c.toLowerCase()][l]||c;return d>0?u.charAt(0).toUpperCase()+u.slice(1):u})}function n(a){return a*(e.direction===Jn?1:-1)}return{resolve:t,orient:n}}var Ge="role",Pt="tabindex",wd="disabled",Ie="aria-",Ti=Ie+"controls",Po=Ie+"current",ea=Ie+"selected",Ce=Ie+"label",bn=Ie+"labelledby",No=Ie+"hidden",_n=Ie+"orientation",gi=Ie+"roledescription",ta=Ie+"live",ia=Ie+"busy",ra=Ie+"atomic",yn=[Ge,Pt,wd,Ti,Po,Ce,bn,No,_n,gi],ze=Ei+"__",ut="is-",Cr=Ei,na=ze+"track",xd=ze+"list",pr=ze+"slide",Do=pr+"--clone",Cd=pr+"__container",wn=ze+"arrows",fr=ze+"arrow",zo=fr+"--prev",Vo=fr+"--next",mr=ze+"pagination",Fo=mr+"__page",Ed=ze+"progress",Ad=Ed+"__bar",Td=ze+"toggle",kd=ze+"spinner",Sd=ze+"sr",$d=ut+"initialized",Et=ut+"active",Bo=ut+"prev",Ho=ut+"next",Vr=ut+"visible",Fr=ut+"loading",jo=ut+"focus-in",Wo=ut+"overflow",Ld=[Et,Vr,Bo,Ho,Fr,jo,Wo],Id={slide:pr,clone:Do,arrows:wn,arrow:fr,prev:zo,next:Vo,pagination:mr,page:Fo,spinner:kd};function Od(i,r){if(bo(i.closest))return i.closest(r);for(var e=i;e&&e.nodeType===1&&!di(e,r);)e=e.parentElement;return e}var Rd=5,aa=200,Go="touchstart mousedown",Er="touchmove mousemove",Ar="touchend touchcancel mouseup click";function Md(i,r,e){var t=K(i),n=t.on,a=t.bind,o=i.root,s=e.i18n,l={},c=[],d=[],u=[],h,m,p;function g(){v(),I(),b()}function _(){n(ee,y),n(ee,g),n(me,b),a(document,Go+" keydown",function(w){p=w.type==="keydown"},{capture:!0}),a(o,"focusin",function(){je(o,jo,!!p)})}function y(w){var T=yn.concat("style");Ye(c),We(o,d),We(h,u),De([h,m],T),De(o,w?T:["style",gi])}function b(){We(o,d),We(h,u),d=R(Cr),u=R(na),Ne(o,d),Ne(h,u),D(o,Ce,e.label),D(o,bn,e.labelledby)}function v(){h=k("."+na),m=Ci(h,"."+xd),oi(h&&m,"A track/list element is missing."),Di(c,yo(m,"."+pr+":not(."+Do+")")),wt({arrows:wn,pagination:mr,prev:zo,next:Vo,bar:Ad,toggle:Td},function(w,T){l[T]=k("."+w)}),hi(l,{root:o,track:h,list:m,slides:c})}function I(){var w=o.id||rd(Ei),T=e.role;o.id=w,h.id=h.id||w+"-track",m.id=m.id||w+"-list",!$e(o,Ge)&&o.tagName!=="SECTION"&&T&&D(o,Ge,T),D(o,gi,s.carousel),D(m,Ge,"presentation")}function k(w){var T=Co(o,w);return T&&Od(T,"."+Cr)===o?T:void 0}function R(w){return[w+"--"+e.type,w+"--"+e.direction,e.drag&&w+"--draggable",e.isNavigation&&w+"--nav",w===Cr&&Et]}return hi(l,{setup:g,mount:_,destroy:y})}var Gt="slide",Kt="loop",ki="fade";function Ud(i,r,e,t){var n=K(i),a=n.on,o=n.emit,s=n.bind,l=i.Components,c=i.root,d=i.options,u=d.isNavigation,h=d.updateOnMove,m=d.i18n,p=d.pagination,g=d.slideFocus,_=l.Direction.resolve,y=$e(t,"style"),b=$e(t,Ce),v=e>-1,I=Ci(t,"."+Cd),k;function R(){v||(t.id=c.id+"-slide"+mn(r+1),D(t,Ge,p?"tabpanel":"group"),D(t,gi,m.slide),D(t,Ce,b||zr(m.slideLabel,[r+1,i.length]))),w()}function w(){s(t,"click",G(o,To,P)),s(t,"keydown",G(o,Oo,P)),a([Ai,Ro,Yt],x),a(So,U),h&&a(ot,S)}function T(){k=!0,n.destroy(),We(t,Ld),De(t,yn),D(t,"style",y),D(t,Ce,b||"")}function U(){var M=i.splides.map(function(E){var O=E.splide.Components.Slides.getAt(r);return O?O.slide.id:""}).join(" ");D(t,Ce,zr(m.slideX,(v?e:r)+1)),D(t,Ti,M),D(t,Ge,g?"button":""),g&&De(t,gi)}function S(){k||x()}function x(){if(!k){var M=i.index;A(),$(),je(t,Bo,r===M-1),je(t,Ho,r===M+1)}}function A(){var M=z();M!==Kn(t,Et)&&(je(t,Et,M),D(t,Po,u&&M||""),o(M?nd:ad,P))}function $(){var M=Z(),E=!M&&(!z()||v);if(i.state.is([qt,_i])||D(t,No,E||""),D(pn(t,d.focusableNodes||""),Pt,E?-1:""),g&&D(t,Pt,E?-1:0),M!==Kn(t,Vr)&&(je(t,Vr,M),o(M?od:sd,P)),!M&&document.activeElement===t){var O=l.Slides.getAt(i.index);O&&wo(O.slide)}}function N(M,E,O){Se(O&&I||t,M,E)}function z(){var M=i.index;return M===r||d.cloneStatus&&M===e}function Z(){if(i.is(ki))return z();var M=ye(l.Elements.track),E=ye(t),O=_("left",!0),H=_("right",!0);return qi(M[O])<=fi(E[O])&&qi(E[H])<=fi(M[H])}function Y(M,E){var O=pe(M-r);return!v&&(d.rewind||i.is(Kt))&&(O=at(O,i.length-O)),O<=E}var P={index:r,slideIndex:e,slide:t,container:I,isClone:v,mount:R,destroy:T,update:x,style:N,isWithin:Y};return P}function Pd(i,r,e){var t=K(i),n=t.on,a=t.emit,o=t.bind,s=r.Elements,l=s.slides,c=s.list,d=[];function u(){h(),n(ee,m),n(ee,h)}function h(){l.forEach(function(x,A){g(x,A,-1)})}function m(){k(function(x){x.destroy()}),Ye(d)}function p(){k(function(x){x.update()})}function g(x,A,$){var N=Ud(i,A,$,x);N.mount(),d.push(N),d.sort(function(z,Z){return z.index-Z.index})}function _(x){return x?R(function(A){return!A.isClone}):d}function y(x){var A=r.Controller,$=A.toIndex(x),N=A.hasFocus()?1:e.perPage;return R(function(z){return zi(z.index,$,$+N-1)})}function b(x){return R(x)[0]}function v(x,A){Ee(x,function($){if(nt($)&&($=xo($)),_o($)){var N=l[A];N?hn($,N):xi(c,$),Ne($,e.classes.slide),T($,G(a,mi))}}),a(ee)}function I(x){Ct(R(x).map(function(A){return A.slide})),a(ee)}function k(x,A){_(A).forEach(x)}function R(x){return d.filter(bo(x)?x:function(A){return nt(x)?di(A.slide,x):un(wi(x),A.index)})}function w(x,A,$){k(function(N){N.style(x,A,$)})}function T(x,A){var $=pn(x,"img"),N=$.length;N?$.forEach(function(z){o(z,"load error",function(){--N||A()})}):A()}function U(x){return x?l.length:d.length}function S(){return d.length>e.perPage}return{mount:u,destroy:m,update:p,register:g,get:_,getIn:y,getAt:b,add:v,remove:I,forEach:k,filter:R,style:w,getLength:U,isEnough:S}}function Nd(i,r,e){var t=K(i),n=t.on,a=t.bind,o=t.emit,s=r.Slides,l=r.Direction.resolve,c=r.Elements,d=c.root,u=c.track,h=c.list,m=s.getAt,p=s.style,g,_,y;function b(){v(),a(window,"resize load",bd(G(o,mi))),n([me,ee],v),n(mi,I)}function v(){g=e.direction===hr,Se(d,"maxWidth",gt(e.width)),Se(u,l("paddingLeft"),k(!1)),Se(u,l("paddingRight"),k(!0)),I(!0)}function I(P){var M=ye(d);(P||_.width!==M.width||_.height!==M.height)&&(Se(u,"height",R()),p(l("marginRight"),gt(e.gap)),p("width",T()),p("height",U(),!0),_=M,o(gn),y!==(y=Y())&&(je(d,Wo,y),o(ud,y)))}function k(P){var M=e.padding,E=l(P?"right":"left");return M&&gt(M[E]||(ci(M)?0:M))||"0px"}function R(){var P="";return g&&(P=w(),oi(P,"height or heightRatio is missing."),P="calc("+P+" - "+k(!1)+" - "+k(!0)+")"),P}function w(){return gt(e.height||ye(h).width*e.heightRatio)}function T(){return e.autoWidth?null:gt(e.fixedWidth)||(g?"":S())}function U(){return gt(e.fixedHeight)||(g?e.autoHeight?null:S():w())}function S(){var P=gt(e.gap);return"calc((100%"+(P&&" + "+P)+")/"+(e.perPage||1)+(P&&" - "+P)+")"}function x(){return ye(h)[l("width")]}function A(P,M){var E=m(P||0);return E?ye(E.slide)[l("width")]+(M?0:z()):0}function $(P,M){var E=m(P);if(E){var O=ye(E.slide)[l("right")],H=ye(h)[l("left")];return pe(O-H)+(M?0:z())}return 0}function N(P){return $(i.length-1)-$(0)+A(0,P)}function z(){var P=m(0);return P&&parseFloat(Se(P.slide,l("marginRight")))||0}function Z(P){return parseFloat(Se(u,l("padding"+(P?"Right":"Left"))))||0}function Y(){return i.is(ki)||N(!0)>x()}return{mount:b,resize:I,listSize:x,slideSize:A,sliderSize:N,totalSize:$,getPadding:Z,isOverflow:Y}}var Dd=2;function zd(i,r,e){var t=K(i),n=t.on,a=r.Elements,o=r.Slides,s=r.Direction.resolve,l=[],c;function d(){n(ee,u),n([me,mi],m),(c=_())&&(p(c),r.Layout.resize(!0))}function u(){h(),d()}function h(){Ct(l),Ye(l),t.destroy()}function m(){var y=_();c!==y&&(c<y||!y)&&t.emit(ee)}function p(y){var b=o.get().slice(),v=b.length;if(v){for(;b.length<y;)Di(b,b);Di(b.slice(-y),b.slice(0,y)).forEach(function(I,k){var R=k<y,w=g(I.slide,k);R?hn(w,b[0].slide):xi(a.list,w),Di(l,w),o.register(w,k-y+(R?0:v),I.index)})}}function g(y,b){var v=y.cloneNode(!0);return Ne(v,e.classes.clone),v.id=i.root.id+"-clone"+mn(b+1),v}function _(){var y=e.clones;if(!i.is(Kt))y=0;else if(yi(y)){var b=e[s("fixedWidth")]&&r.Layout.slideSize(0),v=b&&fi(ye(a.track)[s("width")]/b);y=v||e[s("autoWidth")]&&i.length||e.perPage*Dd}return y}return{mount:d,destroy:h}}function Vd(i,r,e){var t=K(i),n=t.on,a=t.emit,o=i.state.set,s=r.Layout,l=s.slideSize,c=s.getPadding,d=s.totalSize,u=s.listSize,h=s.sliderSize,m=r.Direction,p=m.resolve,g=m.orient,_=r.Elements,y=_.list,b=_.track,v;function I(){v=r.Transition,n([Tt,gn,me,ee],k)}function k(){r.Controller.isBusy()||(r.Scroll.cancel(),w(i.index),r.Slides.update())}function R(E,O,H,ie){E!==O&&P(E>H)&&(x(),T(S(N(),E>H),!0)),o(qt),a(ot,O,H,E),v.start(O,function(){o(Wt),a(Ai,O,H,E),ie&&ie()})}function w(E){T($(E,!0))}function T(E,O){if(!i.is(ki)){var H=O?E:U(E);Se(y,"transform","translate"+p("X")+"("+H+"px)"),E!==H&&a(Ro)}}function U(E){if(i.is(Kt)){var O=A(E),H=O>r.Controller.getEnd(),ie=O<0;(ie||H)&&(E=S(E,H))}return E}function S(E,O){var H=E-Y(O),ie=h();return E-=g(ie*(fi(pe(H)/ie)||1))*(O?1:-1),E}function x(){T(N(),!0),v.cancel()}function A(E){for(var O=r.Slides.get(),H=0,ie=1/0,te=0;te<O.length;te++){var Ze=O[te].index,C=pe($(Ze,!0)-E);if(C<=ie)ie=C,H=Ze;else break}return H}function $(E,O){var H=g(d(E-1)-Z(E));return O?z(H):H}function N(){var E=p("left");return ye(y)[E]-ye(b)[E]+g(c(!1))}function z(E){return e.trimSpace&&i.is(Gt)&&(E=It(E,0,g(h(!0)-u()))),E}function Z(E){var O=e.focus;return O==="center"?(u()-l(E,!0))/2:+O*l(E)||0}function Y(E){return $(E?r.Controller.getEnd():0,!!e.trimSpace)}function P(E){var O=g(S(N(),E));return E?O>=0:O<=y[p("scrollWidth")]-ye(b)[p("width")]}function M(E,O){O=yi(O)?N():O;var H=E!==!0&&g(O)<g(Y(!1)),ie=E!==!1&&g(O)>g(Y(!0));return H||ie}return{mount:I,move:R,jump:w,translate:T,shift:S,cancel:x,toIndex:A,toPosition:$,getPosition:N,getLimit:Y,exceededLimit:M,reposition:k}}function Fd(i,r,e){var t=K(i),n=t.on,a=t.emit,o=r.Move,s=o.getPosition,l=o.getLimit,c=o.toPosition,d=r.Slides,u=d.isEnough,h=d.getLength,m=e.omitEnd,p=i.is(Kt),g=i.is(Gt),_=G(N,!1),y=G(N,!0),b=e.start||0,v,I=b,k,R,w;function T(){U(),n([me,ee,Yi],U),n(gn,S)}function U(){k=h(!0),R=e.perMove,w=e.perPage,v=P();var C=It(b,0,m?v:k-1);C!==b&&(b=C,o.reposition())}function S(){v!==P()&&a(Yi)}function x(C,j,le){if(!Ze()){var J=$(C),ae=Y(J);ae>-1&&(j||ae!==b)&&(H(ae),o.move(J,ae,I,le))}}function A(C,j,le,J){r.Scroll.scroll(C,j,le,function(){var ae=Y(o.toIndex(s()));H(m?at(ae,v):ae),J&&J()})}function $(C){var j=b;if(nt(C)){var le=C.match(/([+\-<>])(\d+)?/)||[],J=le[1],ae=le[2];J==="+"||J==="-"?j=z(b+ +(""+J+(+ae||1)),b):J===">"?j=ae?M(+ae):_(!0):J==="<"&&(j=y(!0))}else j=p?C:It(C,0,v);return j}function N(C,j){var le=R||(te()?1:w),J=z(b+le*(C?-1:1),b,!(R||te()));return J===-1&&g&&!Eo(s(),l(!C),1)?C?0:v:j?J:Y(J)}function z(C,j,le){if(u()||te()){var J=Z(C);J!==C&&(j=C,C=J,le=!1),C<0||C>v?!R&&(zi(0,C,j,!0)||zi(v,j,C,!0))?C=M(E(C)):p?C=le?C<0?-(k%w||w):k:C:e.rewind?C=C<0?v:0:C=-1:le&&C!==j&&(C=M(E(j)+(C<j?-1:1)))}else C=-1;return C}function Z(C){if(g&&e.trimSpace==="move"&&C!==b)for(var j=s();j===c(C,!0)&&zi(C,0,i.length-1,!e.rewind);)C<b?--C:++C;return C}function Y(C){return p?(C+k)%k||0:C}function P(){for(var C=k-(te()||p&&R?1:w);m&&C-- >0;)if(c(k-1,!0)!==c(C,!0)){C++;break}return It(C,0,k-1)}function M(C){return It(te()?C:w*C,0,v)}function E(C){return te()?at(C,v):qi((C>=v?k-1:C)/w)}function O(C){var j=o.toIndex(C);return g?It(j,0,v):j}function H(C){C!==b&&(I=b,b=C)}function ie(C){return C?I:b}function te(){return!yi(e.focus)||e.isNavigation}function Ze(){return i.state.is([qt,_i])&&!!e.waitForTransition}return{mount:T,go:x,scroll:A,getNext:_,getPrev:y,getAdjacent:N,getEnd:P,setIndex:H,getIndex:ie,toIndex:M,toPage:E,toDest:O,hasFocus:te,isBusy:Ze}}var Bd="http://www.w3.org/2000/svg",Hd="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",Oi=40;function jd(i,r,e){var t=K(i),n=t.on,a=t.bind,o=t.emit,s=e.classes,l=e.i18n,c=r.Elements,d=r.Controller,u=c.arrows,h=c.track,m=u,p=c.prev,g=c.next,_,y,b={};function v(){k(),n(me,I)}function I(){R(),v()}function k(){var A=e.arrows;A&&!(p&&g)&&U(),p&&g&&(hi(b,{prev:p,next:g}),pi(m,A?"":"none"),Ne(m,y=wn+"--"+e.direction),A&&(w(),x(),D([p,g],Ti,h.id),o(hd,p,g)))}function R(){t.destroy(),We(m,y),_?(Ct(u?[p,g]:m),p=g=null):De([p,g],yn)}function w(){n([Tt,Ai,ee,Yt,Yi],x),a(g,"click",G(T,">")),a(p,"click",G(T,"<"))}function T(A){d.go(A,!0)}function U(){m=u||Ut("div",s.arrows),p=S(!0),g=S(!1),_=!0,xi(m,[p,g]),!u&&hn(m,h)}function S(A){var $='<button class="'+s.arrow+" "+(A?s.prev:s.next)+'" type="button"><svg xmlns="'+Bd+'" viewBox="0 0 '+Oi+" "+Oi+'" width="'+Oi+'" height="'+Oi+'" focusable="false"><path d="'+(e.arrowPath||Hd)+'" />';return xo($)}function x(){if(p&&g){var A=i.index,$=d.getPrev(),N=d.getNext(),z=$>-1&&A<$?l.last:l.prev,Z=N>-1&&A>N?l.first:l.next;p.disabled=$<0,g.disabled=N<0,D(p,Ce,z),D(g,Ce,Z),o(pd,p,g,$,N)}}return{arrows:b,mount:v,destroy:R,update:x}}var Wd=fn+"-interval";function Gd(i,r,e){var t=K(i),n=t.on,a=t.bind,o=t.emit,s=lr(e.interval,i.go.bind(i,">"),w),l=s.isPaused,c=r.Elements,d=r.Elements,u=d.root,h=d.toggle,m=e.autoplay,p,g,_=m==="pause";function y(){m&&(b(),h&&D(h,Ti,c.track.id),_||v(),R())}function b(){e.pauseOnHover&&a(u,"mouseenter mouseleave",function(U){p=U.type==="mouseenter",k()}),e.pauseOnFocus&&a(u,"focusin focusout",function(U){g=U.type==="focusin",k()}),h&&a(h,"click",function(){_?v():I(!0)}),n([ot,vn,ee],s.rewind),n(ot,T)}function v(){l()&&r.Slides.isEnough()&&(s.start(!e.resetProgress),g=p=_=!1,R(),o($o))}function I(U){U===void 0&&(U=!0),_=!!U,R(),l()||(s.pause(),o(Lo))}function k(){_||(p||g?I(!1):v())}function R(){h&&(je(h,Et,!_),D(h,Ce,e.i18n[_?"play":"pause"]))}function w(U){var S=c.bar;S&&Se(S,"width",U*100+"%"),o(gd,U)}function T(U){var S=r.Slides.getAt(U);s.set(S&&+$e(S.slide,Wd)||e.interval)}return{mount:y,destroy:s.cancel,play:v,pause:I,isPaused:l}}function Xd(i,r,e){var t=K(i),n=t.on;function a(){e.cover&&(n(Io,G(s,!0)),n([Tt,me,ee],G(o,!0)))}function o(l){r.Slides.forEach(function(c){var d=Ci(c.container||c.slide,"img");d&&d.src&&s(l,d,c)})}function s(l,c,d){d.style("background",l?'center/cover no-repeat url("'+c.src+'")':"",!0),pi(c,l?"none":"")}return{mount:a,destroy:G(o,!1)}}var qd=10,Yd=600,Kd=.6,Zd=1.5,Qd=800;function Jd(i,r,e){var t=K(i),n=t.on,a=t.emit,o=i.state.set,s=r.Move,l=s.getPosition,c=s.getLimit,d=s.exceededLimit,u=s.translate,h=i.is(Gt),m,p,g=1;function _(){n(ot,I),n([me,ee],k)}function y(w,T,U,S,x){var A=l();if(I(),U&&(!h||!d())){var $=r.Layout.sliderSize(),N=Dr(w)*$*qi(pe(w)/$)||0;w=s.toPosition(r.Controller.toDest(w%$))+N}var z=Eo(A,w,1);g=1,T=z?0:T||Xi(pe(w-A)/Zd,Qd),p=S,m=lr(T,b,G(v,A,w,x),1),o(_i),a(vn),m.start()}function b(){o(Wt),p&&p(),a(Yt)}function v(w,T,U,S){var x=l(),A=w+(T-w)*R(S),$=(A-x)*g;u(x+$),h&&!U&&d()&&(g*=Kd,pe($)<qd&&y(c(d(!0)),Yd,!1,p,!0))}function I(){m&&m.cancel()}function k(){m&&!m.isPaused()&&(I(),b())}function R(w){var T=e.easingFunc;return T?T(w):1-Math.pow(1-w,4)}return{mount:_,destroy:I,scroll:y,cancel:k}}var Ot={passive:!1,capture:!0};function eu(i,r,e){var t=K(i),n=t.on,a=t.emit,o=t.bind,s=t.unbind,l=i.state,c=r.Move,d=r.Scroll,u=r.Controller,h=r.Elements.track,m=r.Media.reduce,p=r.Direction,g=p.resolve,_=p.orient,y=c.getPosition,b=c.exceededLimit,v,I,k,R,w,T=!1,U,S,x;function A(){o(h,Er,Pr,Ot),o(h,Ar,Pr,Ot),o(h,Go,N,Ot),o(h,"click",Y,{capture:!0}),o(h,"dragstart",Be),n([Tt,me],$)}function $(){var L=e.drag;An(!L),R=L==="free"}function N(L){if(U=!1,!S){var q=ae(L);J(L.target)&&(q||!L.button)&&(u.isBusy()?Be(L,!0):(x=q?h:window,w=l.is([qt,_i]),k=null,o(x,Er,z,Ot),o(x,Ar,Z,Ot),c.cancel(),d.cancel(),P(L)))}}function z(L){if(l.is(Ni)||(l.set(Ni),a(ld)),L.cancelable)if(w){c.translate(v+le(te(L)));var q=Ze(L)>aa,ht=T!==(T=b());(q||ht)&&P(L),U=!0,a(cd),Be(L)}else O(L)&&(w=E(L),Be(L))}function Z(L){l.is(Ni)&&(l.set(Wt),a(dd)),w&&(M(L),Be(L)),s(x,Er,z),s(x,Ar,Z),w=!1}function Y(L){!S&&U&&Be(L,!0)}function P(L){k=I,I=L,v=y()}function M(L){var q=H(L),ht=ie(q),Zt=e.rewind&&e.rewindByDrag;m(!1),R?u.scroll(ht,0,e.snap):i.is(ki)?u.go(_(Dr(q))<0?Zt?"<":"-":Zt?">":"+"):i.is(Gt)&&T&&Zt?u.go(b(!0)?">":"<"):u.go(u.toDest(ht),!0),m(!0)}function E(L){var q=e.dragMinThreshold,ht=ci(q),Zt=ht&&q.mouse||0,Ko=(ht?q.touch:+q)||10;return pe(te(L))>(ae(L)?Ko:Zt)}function O(L){return pe(te(L))>pe(te(L,!0))}function H(L){if(i.is(Kt)||!T){var q=Ze(L);if(q&&q<aa)return te(L)/q}return 0}function ie(L){return y()+Dr(L)*at(pe(L)*(e.flickPower||600),R?1/0:r.Layout.listSize()*(e.flickMaxPages||1))}function te(L,q){return j(L,q)-j(C(L),q)}function Ze(L){return Nr(L)-Nr(C(L))}function C(L){return I===L&&k||I}function j(L,q){return(ae(L)?L.changedTouches[0]:L)["page"+g(q?"Y":"X")]}function le(L){return L/(T&&i.is(Gt)?Rd:1)}function J(L){var q=e.noDrag;return!di(L,"."+Fo+", ."+fr)&&(!q||!di(L,q))}function ae(L){return typeof TouchEvent<"u"&&L instanceof TouchEvent}function Yo(){return w}function An(L){S=L}return{mount:A,disable:An,isDragging:Yo}}var tu={Spacebar:" ",Right:ur,Left:dr,Up:Mo,Down:Uo};function xn(i){return i=nt(i)?i:i.key,tu[i]||i}var oa="keydown";function iu(i,r,e){var t=K(i),n=t.on,a=t.bind,o=t.unbind,s=i.root,l=r.Direction.resolve,c,d;function u(){h(),n(me,m),n(me,h),n(ot,g)}function h(){var y=e.keyboard;y&&(c=y==="global"?window:s,a(c,oa,_))}function m(){o(c,oa)}function p(y){d=y}function g(){var y=d;d=!0,vo(function(){d=y})}function _(y){if(!d){var b=xn(y);b===l(dr)?i.go("<"):b===l(ur)&&i.go(">")}}return{mount:u,destroy:m,disable:p}}var si=fn+"-lazy",Vi=si+"-srcset",ru="["+si+"], ["+Vi+"]";function nu(i,r,e){var t=K(i),n=t.on,a=t.off,o=t.bind,s=t.emit,l=e.lazyLoad==="sequential",c=[Ai,Yt],d=[];function u(){e.lazyLoad&&(h(),n(ee,h))}function h(){Ye(d),m(),l?y():(a(c),n(c,p),p())}function m(){r.Slides.forEach(function(b){pn(b.slide,ru).forEach(function(v){var I=$e(v,si),k=$e(v,Vi);if(I!==v.src||k!==v.srcset){var R=e.classes.spinner,w=v.parentElement,T=Ci(w,"."+R)||Ut("span",R,w);d.push([v,b,T]),v.src||pi(v,"none")}})})}function p(){d=d.filter(function(b){var v=e.perPage*((e.preloadPages||1)+1)-1;return b[1].isWithin(i.index,v)?g(b):!0}),d.length||a(c)}function g(b){var v=b[0];Ne(b[1].slide,Fr),o(v,"load error",G(_,b)),D(v,"src",$e(v,si)),D(v,"srcset",$e(v,Vi)),De(v,si),De(v,Vi)}function _(b,v){var I=b[0],k=b[1];We(k.slide,Fr),v.type!=="error"&&(Ct(b[2]),pi(I,""),s(Io,I,k),s(mi)),l&&y()}function y(){d.length&&g(d.shift())}return{mount:u,destroy:G(Ye,d),check:p}}function au(i,r,e){var t=K(i),n=t.on,a=t.emit,o=t.bind,s=r.Slides,l=r.Elements,c=r.Controller,d=c.hasFocus,u=c.getIndex,h=c.go,m=r.Direction.resolve,p=l.pagination,g=[],_,y;function b(){v(),n([me,ee,Yi],b);var S=e.pagination;p&&pi(p,S?"":"none"),S&&(n([ot,vn,Yt],U),I(),U(),a(fd,{list:_,items:g},T(i.index)))}function v(){_&&(Ct(p?dt(_.children):_),We(_,y),Ye(g),_=null),t.destroy()}function I(){var S=i.length,x=e.classes,A=e.i18n,$=e.perPage,N=d()?c.getEnd()+1:fi(S/$);_=p||Ut("ul",x.pagination,l.track.parentElement),Ne(_,y=mr+"--"+w()),D(_,Ge,"tablist"),D(_,Ce,A.select),D(_,_n,w()===hr?"vertical":"");for(var z=0;z<N;z++){var Z=Ut("li",null,_),Y=Ut("button",{class:x.page,type:"button"},Z),P=s.getIn(z).map(function(E){return E.slide.id}),M=!d()&&$>1?A.pageX:A.slideX;o(Y,"click",G(k,z)),e.paginationKeyboard&&o(Y,"keydown",G(R,z)),D(Z,Ge,"presentation"),D(Y,Ge,"tab"),D(Y,Ti,P.join(" ")),D(Y,Ce,zr(M,z+1)),D(Y,Pt,-1),g.push({li:Z,button:Y,page:z})}}function k(S){h(">"+S,!0)}function R(S,x){var A=g.length,$=xn(x),N=w(),z=-1;$===m(ur,!1,N)?z=++S%A:$===m(dr,!1,N)?z=(--S+A)%A:$==="Home"?z=0:$==="End"&&(z=A-1);var Z=g[z];Z&&(wo(Z.button),h(">"+z),Be(x,!0))}function w(){return e.paginationDirection||e.direction}function T(S){return g[c.toPage(S)]}function U(){var S=T(u(!0)),x=T(u());if(S){var A=S.button;We(A,Et),De(A,ea),D(A,Pt,-1)}if(x){var $=x.button;Ne($,Et),D($,ea,!0),D($,Pt,"")}a(md,{list:_,items:g},S,x)}return{items:g,mount:b,destroy:v,getAt:T,update:U}}var ou=[" ","Enter"];function su(i,r,e){var t=e.isNavigation,n=e.slideFocus,a=[];function o(){i.splides.forEach(function(p){p.isParent||(c(i,p.splide),c(p.splide,i))}),t&&d()}function s(){a.forEach(function(p){p.destroy()}),Ye(a)}function l(){s(),o()}function c(p,g){var _=K(p);_.on(ot,function(y,b,v){g.go(g.is(Kt)?v:y)}),a.push(_)}function d(){var p=K(i),g=p.on;g(To,h),g(Oo,m),g([Tt,me],u),a.push(p),p.emit(So,i.splides)}function u(){D(r.Elements.list,_n,e.direction===hr?"vertical":"")}function h(p){i.go(p.index)}function m(p,g){un(ou,xn(g))&&(h(p),Be(g))}return{setup:G(r.Media.set,{slideFocus:yi(n)?t:n},!0),mount:o,destroy:s,remount:l}}function lu(i,r,e){var t=K(i),n=t.bind,a=0;function o(){e.wheel&&n(r.Elements.track,"wheel",s,Ot)}function s(c){if(c.cancelable){var d=c.deltaY,u=d<0,h=Nr(c),m=e.wheelMinThreshold||0,p=e.wheelSleep||0;pe(d)>m&&h-a>p&&(i.go(u?"<":">"),a=h),l(u)&&Be(c)}}function l(c){return!e.releaseWheel||i.state.is(qt)||r.Controller.getAdjacent(c)!==-1}return{mount:o}}var cu=90;function du(i,r,e){var t=K(i),n=t.on,a=r.Elements.track,o=e.live&&!e.isNavigation,s=Ut("span",Sd),l=lr(cu,G(d,!1));function c(){o&&(h(!r.Autoplay.isPaused()),D(a,ra,!0),s.textContent="",n($o,G(h,!0)),n(Lo,G(h,!1)),n([Ai,Yt],G(d,!0)))}function d(m){D(a,ia,m),m?(xi(a,s),l.start()):(Ct(s),l.cancel())}function u(){De(a,[ta,ra,ia]),Ct(s)}function h(m){o&&D(a,ta,m?"off":"polite")}return{mount:c,disable:h,destroy:u}}var uu=Object.freeze({__proto__:null,Media:_d,Direction:yd,Elements:Md,Slides:Pd,Layout:Nd,Clones:zd,Move:Vd,Controller:Fd,Arrows:jd,Autoplay:Gd,Cover:Xd,Scroll:Jd,Drag:eu,Keyboard:iu,LazyLoad:nu,Pagination:au,Sync:su,Wheel:lu,Live:du}),hu={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},pu={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:Id,i18n:hu,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function fu(i,r,e){var t=r.Slides;function n(){K(i).on([Tt,ee],a)}function a(){t.forEach(function(s){s.style("transform","translateX(-"+100*s.index+"%)")})}function o(s,l){t.style("transition","opacity "+e.speed+"ms "+e.easing),vo(l)}return{mount:n,start:o,cancel:Pr}}function mu(i,r,e){var t=r.Move,n=r.Controller,a=r.Scroll,o=r.Elements.list,s=G(Se,o,"transition"),l;function c(){K(i).bind(o,"transitionend",function(m){m.target===o&&l&&(u(),l())})}function d(m,p){var g=t.toPosition(m,!0),_=t.getPosition(),y=h(m);pe(g-_)>=1&&y>=1?e.useScroll?a.scroll(g,y,!1,p):(s("transform "+y+"ms "+e.easing),t.translate(g,!0),l=p):(t.jump(m),p())}function u(){s(""),a.cancel()}function h(m){var p=e.rewindSpeed;if(i.is(Gt)&&p){var g=n.getIndex(!0),_=n.getEnd();if(g===0&&m>=_||g>=_&&m===0)return p}return e.speed}return{mount:c,start:d,cancel:u}}var gu=function(){function i(e,t){this.event=K(),this.Components={},this.state=vd(Mt),this.splides=[],this._o={},this._E={};var n=nt(e)?Co(document,e):e;oi(n,n+" is invalid."),this.root=n,t=et({label:$e(n,Ce)||"",labelledby:$e(n,bn)||""},pu,i.defaults,t||{});try{et(t,JSON.parse($e(n,fn)))}catch{oi(!1,"Invalid JSON")}this._o=Object.create(et({},t))}var r=i.prototype;return r.mount=function(t,n){var a=this,o=this.state,s=this.Components;oi(o.is([Mt,Gi]),"Already mounted!"),o.set(Mt),this._C=s,this._T=n||this._T||(this.is(ki)?fu:mu),this._E=t||this._E;var l=hi({},uu,this._E,{Transition:this._T});return wt(l,function(c,d){var u=c(a,s,a._o);s[d]=u,u.setup&&u.setup()}),wt(s,function(c){c.mount&&c.mount()}),this.emit(Tt),Ne(this.root,$d),o.set(Wt),this.emit(Qn),this},r.sync=function(t){return this.splides.push({splide:t}),t.splides.push({splide:this,isParent:!0}),this.state.is(Wt)&&(this._C.Sync.remount(),t.Components.Sync.remount()),this},r.go=function(t){return this._C.Controller.go(t),this},r.on=function(t,n){return this.event.on(t,n),this},r.off=function(t){return this.event.off(t),this},r.emit=function(t){var n;return(n=this.event).emit.apply(n,[t].concat(dt(arguments,1))),this},r.add=function(t,n){return this._C.Slides.add(t,n),this},r.remove=function(t){return this._C.Slides.remove(t),this},r.is=function(t){return this._o.type===t},r.refresh=function(){return this.emit(ee),this},r.destroy=function(t){t===void 0&&(t=!0);var n=this.event,a=this.state;return a.is(Mt)?K(this).on(Qn,this.destroy.bind(this,t)):(wt(this._C,function(o){o.destroy&&o.destroy(t)},!0),n.emit(ko),n.destroy(),t&&Ye(this.splides),a.set(Gi)),this},ed(i,[{key:"options",get:function(){return this._o},set:function(t){this._C.Media.set(t,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),i}(),Cn=gu;Cn.defaults={};Cn.STATES=id;const vu=async i=>(await(await fetch(`https://api.unsplash.com/photos/random?client_id=${i}&orientation=landscape&count=5`)).json()).map(n=>({id:n.id,rawUrl:n.urls.full,url:n.urls.regular}));class Xo extends W{constructor(){super(...arguments);f(this,"activityType","unsplash");f(this,"_currentItemId",null);f(this,"init$",{handleNext:()=>{this.next()},handlePick:()=>{this.pick()}});f(this,"cssInit$",{"--cfg-unsplash-token":null})}get token(){return this.getCssData("--cfg-unsplash-token")}async fetch(){const e=await vu(this.token);this._items.push(...e);for(const t of e)this._splide.add(`<li data-id="${t.id}" class="splide__slide"><img src="${t.url}" /></li>`)}mount(){this.unmount();const e=this.ref.slider;this._items=[],this._splide=new Cn(e).mount(),this._splide.options={arrows:!1},this._splide.on("move",()=>{this._items.shift()}),this._splide.on("active",({slide:t})=>{const n=t.dataset.id;this._currentItemId=n})}unmount(){var e;(e=this._splide)==null||e.destroy()}next(){this._items.length<3&&this.fetch(),this._splide.go(">")}pick(){const e=this._items.find(t=>t.id===this._currentItemId);this.uploadCollection.add({externalUrl:e.rawUrl}),this.$["*currentActivity"]=F.activities.UPLOAD_LIST}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{this.fetch(),this.mount()},onDeactivate:()=>{this.unmount()}})}}f(Xo,"template",`
    <lr-activity-header>
      <button
        type="button"
        class="mini-btn close-btn"
        set="onclick: *historyBack"
      >
        <lr-icon name="back"></lr-icon>
      </button>
      <div>
        <lr-icon name="unsplash"></lr-icon>
        <span>Unsplash</span>
      </div>
      <button
        type="button"
        class="mini-btn close-btn"
        set="onclick: *historyBack"
      >
        <lr-icon name="close"></lr-icon>
      </button>
    </lr-activity-header>
    <div class="content">
      <div ref="slider" class="splide">
        <div class="splide__track">
          <ul class="splide__list"></ul>
        </div>
      </div>
    </div>
    <div class="toolbar">
      <button
        type="button"
        class="done-btn primary-btn w-30"
        set="onclick: handlePick"
      >
        Pick
      </button>
      <button
        type="button"
        class="cancel-btn secondary-btn"
        set="onclick: handleNext"
      >
        Next 
      </button>
    </div>
  `);sn({...Zc,CustomFileUploader:ln,UnsplashSource:Xo,SourceBtn:Jc});const bu=document.querySelector("#app"),qo=document.createElement("lr-custom-file-uploader");qo.style.setProperty("--cfg-unsplash-token",'"VHt039vCvlgYs9GKZNk7IL3iYojG2v0Zz8lNRjipm3M"');bu.appendChild(qo);
